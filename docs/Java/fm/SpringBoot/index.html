<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Java/fm/SpringBoot">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">SpringBoot | Computer Science Learn Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/docs/Java/fm/SpringBoot"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SpringBoot | Computer Science Learn Notes"><meta data-rh="true" name="description" content="- Spring-Boot-Note"><meta data-rh="true" property="og:description" content="- Spring-Boot-Note"><link data-rh="true" rel="icon" href="/Computer-Science-Learn-Notes/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/docs/Java/fm/SpringBoot"><link data-rh="true" rel="alternate" href="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/docs/Java/fm/SpringBoot" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/docs/Java/fm/SpringBoot" hreflang="x-default"><link rel="stylesheet" href="/Computer-Science-Learn-Notes/assets/css/styles.e7823470.css">
<link rel="preload" href="/Computer-Science-Learn-Notes/assets/js/runtime~main.24523488.js" as="script">
<link rel="preload" href="/Computer-Science-Learn-Notes/assets/js/main.ade148c6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Computer-Science-Learn-Notes/"><div class="navbar__logo"><img src="/Computer-Science-Learn-Notes/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/Computer-Science-Learn-Notes/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Computer Science Learn Notes</b></a><a class="navbar__item navbar__link" href="/Computer-Science-Learn-Notes/docs/intro">主页</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/Computer-Science-Learn-Notes/docs/golang/learnInProblem">目录</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/golang/learnInProblem">Go语言</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/frontend/react/">前端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/fundamental/datastruct">基础知识</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/basic/">Java基础</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/basic/">基础知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/concurrent/">并发编程</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/简介">虚拟机</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/Spring">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringMVC">SpringMVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/Mybatis">Mybatis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringBoot">SpringBoot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringDataJpa">SpringDataJpa</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringSecurity">SpringSecurity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringCloud">SpringCloud</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/kotlin/">Kotlin with Spring</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/eightpart/giant">Java面试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/others/personal_tech">其他分享</a></div></li></ul></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/Computer-Science-Learn-Notes/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">目录</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Java基础</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SpringBoot</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Spring-Boot-Note</h1><ul><li><a href="#spring-boot-note">Spring-Boot-Note</a><ul><li><a href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA--%E7%AE%80%E5%8C%96%E9%83%A8%E7%BD%B2">环境搭建 &amp; 简化部署</a><ul><li><a href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">环境搭建</a></li><li><a href="#%E7%AE%80%E5%8C%96%E9%83%A8%E7%BD%B2">简化部署</a></li></ul></li><li><a href="#springbootapplication%E5%90%AF%E5%8A%A8%E5%8E%9F%E7%90%86">@SpringBootApplication启动原理</a></li><li><a href="#idea-%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BA">IDEA 快速构建</a></li><li><a href="#yaml">YAML</a><ul><li><a href="#yaml%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">YAML基本语法</a></li></ul></li><li><a href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95">单元测试</a><ul><li><a href="#ssm">SSM</a></li><li><a href="#springboot">SpringBoot</a></li></ul></li><li><a href="#configurationpropertiesvalue">@ConfigurationProperties&amp;@Value</a></li><li><a href="#propertysourceimportresource">@PropertySource&amp;@ImportResource</a><ul><li><a href="#%E6%8E%A8%E8%8D%90%E8%87%AA%E5%B7%B1%E5%88%9B%E5%BB%BA%E4%B8%AA%E9%85%8D%E7%BD%AE%E7%B1%BB">【推荐】自己创建个配置类</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6">配置文件的占位符</a></li><li><a href="#%E5%A4%9Aprofile%E6%94%AF%E6%8C%81">多Profile支持</a></li></ul></li><li><a href="#%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%8D%E7%BD%AE%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7">加载配置文件的位置和优先级</a></li><li><a href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">自动配置原理</a><ul><li><a href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86-1">自动配置原理</a></li><li><a href="#%E4%BB%A5httpencodingautoconfiguration%E4%B8%BA%E4%BE%8B%E8%A7%A3%E9%87%8A%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">以HttpEncodingAutoConfiguration为例解释自动配置原理</a></li><li><a href="#%E5%B0%8F%E7%BB%93">小结</a></li></ul></li><li><a href="#conditional%E7%9B%B8%E5%85%B3%E6%B3%A8%E8%A7%A3%E5%92%8Cdebug">@Conditional相关注解和Debug</a></li><li><a href="#%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6sl4j">日志框架SL4J</a><ul><li><a href="#%E5%85%B6%E4%BB%96%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%E8%BD%AC%E6%8D%A2%E4%B8%BAsl4j">其他日志框架转换为SL4J</a></li><li><a href="#springboot%E5%92%8C%E6%97%A5%E5%BF%97%E5%85%B3%E7%B3%BB">SpringBoot和日志关系</a></li><li><a href="#%E6%97%A5%E5%BF%97%E7%9A%84%E9%85%8D%E7%BD%AE">日志的配置</a></li><li><a href="#%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6">指定日志框架</a></li><li><a href="#%E5%88%87%E6%8D%A2%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6">切换日志框架</a></li></ul></li><li><a href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99">静态资源映射规则</a></li><li><a href="#%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8Ethymeleaf">模板引擎Thymeleaf</a></li><li><a href="#springmvc%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">SpringMVC自动配置原理</a><ul><li><a href="#%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE">默认配置</a></li><li><a href="#contentnegotiatingviewresolver">ContentNegotiatingViewResolver</a></li><li><a href="#httpmessageconverters">HttpMessageConverters</a></li><li><a href="#messagecodesresolver">MessageCodesResolver</a></li><li><a href="#springboot%E5%9C%A8springmvc%E7%9A%84%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%BC%8F">SpringBoot在SpringMVC的配置模式</a></li><li><a href="#%E6%8E%A5%E7%AE%A1springboot%E7%9A%84springmvc">接管SpringBoot的SpringMVC</a></li><li><a href="#%E5%B0%8F%E7%BB%93-1">小结：</a></li></ul></li><li><a href="#%E5%9B%BD%E9%99%85%E5%8C%96">国际化</a><ul><li><a href="#%E4%BD%BF%E7%94%A8thymeleaf%E5%9B%BD%E9%99%85%E5%8C%96">使用thymeleaf国际化</a></li><li><a href="#springboot%E5%8C%BA%E5%9F%9F%E4%BF%A1%E6%81%AF%E8%A7%A3%E6%9E%90%E5%99%A8">SpringBoot区域信息解析器</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9B%BD%E9%99%85%E5%8C%96">自定义国际化</a></li></ul></li><li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8">拦截器</a></li><li><a href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E5%8E%9F%E7%90%86">错误处理原理</a></li><li><a href="#%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2%E5%92%8Cjson%E9%94%99%E8%AF%AF%E6%95%B0%E6%8D%AE">定制错误页面和JSON错误数据</a><ul><li><a href="#%E5%AE%9A%E5%88%B6%E4%B8%80%E4%B8%AAjson%E6%95%B0%E6%8D%AE">定制一个JSON数据</a></li></ul></li><li><a href="#%E5%B5%8C%E5%85%A5%E5%BC%8Fservlet">嵌入式Servlet</a><ul><li><a href="#spring%E4%B8%A4%E7%A7%8D%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F">Spring两种配置方式：</a></li><li><a href="#%E5%B5%8C%E5%85%A5%E5%BC%8Fservlet%E4%B8%A4%E7%A7%8D%E4%BF%AE%E6%94%B9%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE">嵌入式Servlet两种修改相关配置</a></li><li><a href="#%E6%B3%A8%E5%86%8C%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6">注册三大组件</a><ul><li><a href="#%E5%AE%9A%E5%88%B6servlet">定制Servlet</a></li><li><a href="#%E5%AE%9A%E5%88%B6filter">定制Filter</a></li><li><a href="#%E5%AE%9A%E5%88%B6listener">定制Listener</a></li></ul></li></ul></li><li><a href="#%E6%BA%90%E7%A0%81%E5%88%A8%E6%9E%90-%E5%B5%8C%E5%85%A5%E5%BC%8Fservlet%E5%8E%9F%E7%90%86">源码刨析 嵌入式Servlet原理</a><ul><li><a href="#%E4%BB%A5tomcat%E4%B8%BA%E4%BE%8B">以Tomcat为例</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%98%AF%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%8E%9F%E7%90%86">配置是如何修改原理</a></li><li><a href="#%E5%B0%8F%E7%BB%93-2">小结：</a></li></ul></li><li><a href="#%E5%B5%8C%E5%85%A5%E5%BC%8Fservlet%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">嵌入式Servlet自动配置原理</a></li><li><a href="#%E6%95%B4%E5%90%88jdbc">整合JDBC</a><ul><li><a href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86-2">自动配置原理</a></li></ul></li><li><a href="#%E6%95%B4%E5%90%88druid">整合Druid</a></li><li><a href="#%E6%95%B4%E5%90%88mybatis">整合Mybatis</a><ul><li><a href="#maven">Maven</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3">使用注解</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">使用配置文件</a></li></ul></li><li><a href="#springboot%E5%90%AF%E5%8A%A8%E5%8E%9F%E7%90%86">SpringBoot启动原理</a><ul><li><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%E5%88%9B%E5%BB%BAspringapplication%E5%AF%B9%E8%B1%A1">第一步：创建SpringApplication对象</a></li><li><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8">第二步：启动应用</a></li></ul></li><li><a href="#%E5%9F%BA%E4%BA%8E%E5%8E%9F%E7%90%86%E7%9A%84%E6%B5%8B%E8%AF%95%E7%AC%94%E8%AE%B0%E6%B5%8B%E8%AF%95%E5%90%AF%E5%8A%A8%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%B1%BB">（基于原理的测试笔记）测试启动的四个类</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89starters%E6%9A%82%E6%97%B6%E6%97%A0%E6%B3%95%E7%90%86%E8%A7%A3">自定义starters【暂时无法理解】</a></li><li><a href="#springboot%E7%BC%93%E5%AD%98%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">SpringBoot缓存基本使用</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">基本使用</a></li><li><a href="#%E5%87%A0%E4%B8%AA%E5%B1%9E%E6%80%A7%E4%BB%8B%E7%BB%8D">几个属性介绍</a></li></ul></li><li><a href="#%E7%BC%93%E5%AD%98%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">缓存自动配置原理</a><ul><li><a href="#%E4%BB%A5cacheable%E4%B8%BA%E4%BE%8B">以@Cacheable为例</a></li><li><a href="#%E5%B0%8F%E7%BB%93-3">小结：</a><ul><li><a href="#%E6%A0%B8%E5%BF%83">核心：</a></li><li><a href="#%E6%80%9D%E8%B7%AF%E6%95%B4%E7%90%86">思路整理</a></li></ul></li></ul></li><li><a href="#cacheput%E7%9A%84%E4%BD%BF%E7%94%A8">@CachePut的使用</a></li><li><a href="#cacheevict-%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98">@CacheEvict 清除缓存</a></li><li><a href="#caching%E5%92%8Ccacheconfig">@Caching和@CacheConfig</a><ul><li><a href="#caching">@Caching</a></li><li><a href="#cacheconfig">@CacheConfig</a></li></ul></li><li><a href="#%E6%95%B4%E5%90%88%E7%BC%93%E5%AD%98%E4%B8%AD%E9%97%B4%E4%BB%B6redis">整合缓存中间件Redis</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89rediscachemanager">自定义RedisCacheManager</a><ul><li><a href="#%E6%89%A9%E5%B1%95cachemanager%E7%9A%84%E7%94%A8%E6%B3%95">扩展CacheManager的用法</a></li></ul></li><li><a href="#springsecurity%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8">SpringSecurity的简单使用</a><ul><li><a href="#thymeleaf%E6%95%B4%E5%90%88springsecurity">Thymeleaf整合SpringSecurity</a></li><li><a href="#%E8%AE%B0%E4%BD%8F%E6%88%91"><strong>记住我</strong></a></li><li><a href="#%E5%AE%9A%E5%88%B6%E8%87%AA%E5%B7%B1%E7%9A%84%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2">定制自己的登录页面</a></li></ul></li><li><a href="#shiro%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8">Shiro的简单使用</a><ul><li><a href="#%E5%BC%80%E5%A7%8B%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AAshiro">开始配置一个shiro</a></li><li><a href="#%E6%95%B4%E5%90%88shiro%E5%90%AF%E5%8A%A8%E5%99%A8">整合Shiro启动器</a></li><li><a href="#%E6%89%A9%E5%B1%95">扩展：</a><ul><li><a href="#shiro%E9%BB%98%E8%AE%A4%E8%BF%87%E6%BB%A4%E5%99%A8">shiro默认过滤器</a></li><li><a href="#shiro%E5%B8%B8%E7%94%A8%E7%9A%84%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E6%B3%A8%E8%A7%A3%E5%8F%AF%E4%BB%A5%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E4%B8%8A%E4%BD%BF%E7%94%A8">shiro常用的权限控制注解，可以在控制器类上使用</a></li></ul></li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="环境搭建--简化部署">环境搭建 &amp; 简化部署<a href="#环境搭建--简化部署" class="hash-link" aria-label="环境搭建 &amp; 简化部署的直接链接" title="环境搭建 &amp; 简化部署的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="环境搭建">环境搭建<a href="#环境搭建" class="hash-link" aria-label="环境搭建的直接链接" title="环境搭建的直接链接">​</a></h3><p>导包：</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!--Spring Boot的版本仲裁中心--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">parent</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-parent</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.3.1.RELEASE</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">parent</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">Spring Boot将所有的功能场景都抽取出来，做成一个个的starters（启动器），</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">只需要在项目里面引入这些starter相关场景的所有依赖都会导入进来。要用什么功能就导入什么场景的启动器</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在默认包下创建一个启动器 标注为SpringBoot程序<strong>@SpringBootApplication</strong></p><p><strong>注：这个类必须和controller在同一个包下，不然就无法访问controller</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloWorldApplicationContext {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(HelloWorldApplicationContext.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="简化部署">简化部署<a href="#简化部署" class="hash-link" aria-label="简化部署的直接链接" title="简化部署的直接链接">​</a></h3><p>Maven下导入这个插件点击package即可打包成功</p><p>java -jar 包名既可以运行</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-maven-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="1" src="data:image/png;base64,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" width="301" height="232" class="img_ev3q"></p><p>一些场景启动器：</p><table><thead><tr><th>名称</th><th>描述</th><th>Pom</th></tr></thead><tbody><tr><td><code>spring-boot-starter</code></td><td>核心 starter，包括 auto-configuration 支持，logging 和 YAML</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-activemq</code></td><td>Starter 使用 Apache ActiveMQ 进行 JMS 消息传递</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-amqp</code></td><td>Starter 用于使用 Spring AMQP 和 Rabbit MQ</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-aop</code></td><td>使用 Spring AOP 和 AspectJ 进行 aspect-oriented 编程的 Starter</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-artemis</code></td><td>Starter 使用 Apache Artemis 进行 JMS 消息传递</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-batch</code></td><td>Starter 使用 Spring Batch</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-cache</code></td><td>Starter 用于使用 Spring Framework 的缓存支持</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-cloud-connectors</code></td><td>Starter 使用 Spring Cloud 连接器简化连接到云平台中的服务，如 Cloud Foundry 和 Heroku</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-cassandra</code></td><td>Starter 用于使用 Cassandra 分布式数据库和 Spring Data Cassandra</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-cassandra-reactive</code></td><td>Starter 用于使用 Cassandra 分布式数据库和 Spring Data Cassandra Reactive</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-couchbase</code></td><td>Starter 用于使用 Couchbase document-oriented 数据库和 Spring Data Couchbase</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-couchbase-reactive</code></td><td>Starter 用于使用 Couchbase document-oriented 数据库和 Spring Data Couchbase Reactive</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-elasticsearch</code></td><td>Starter 用于使用 Elasticsearch 搜索和分析引擎和 Spring Data Elasticsearch</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-jdbc</code></td><td>Starter 使用 Spring Data JDBC</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-jpa</code></td><td>Starter 使用 Spring Data JPA 和 Hibernate</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-ldap</code></td><td>Starter 使用 Spring Data LDAP</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-mongodb</code></td><td>Starter 用于使用 MongoDB document-oriented 数据库和 Spring Data MongoDB</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-mongodb-reactive</code></td><td>Starter 用于使用 MongoDB document-oriented 数据库和 Spring Data MongoDB Reactive</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-neo4j</code></td><td>Starter 用于使用 Neo4j 图形数据库和 Spring Data Neo4j</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-redis</code></td><td>Starter 使用 Redis key-value data store 与 Spring Data Redis 和 Lettuce client</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-redis-reactive</code></td><td>Starter 用于将 Redis key-value data store 与 Spring Data Redis reactive 和 Lettuce client 一起使用</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-rest</code></td><td>Starter 使用 Spring Data REST 在 REST 上公开 Spring Data repositories</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-solr</code></td><td>Starter 将 Apache Solr 搜索平台与 Spring Data Solr 一起使用</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-freemarker</code></td><td>Starter for building MVC web applications 使用 FreeMarker 视图</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-groovy-templates</code></td><td>Starter for building MVC web applications 使用 Groovy 模板视图</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-hateoas</code></td><td>Starter for building hypermedia-based RESTful web application with Spring MVC and Spring HATEOAS</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-integration</code></td><td>Starter 使用 Spring Integration</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jdbc</code></td><td>Starter 用于将 JDBC 与 HikariCP 连接池一起使用</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jersey</code></td><td>Starter for building RESTful web applications 使用 JAX-RS 和 Jersey。 spring-boot-starter-web的替代方案</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jooq</code></td><td>Starter 用于使用 jOOQ 访问 SQL 数据库。 spring-boot-starter-data-jpa或spring-boot-starter-jdbc的替代方案</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-json</code></td><td>Starter 用于读写 json</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jta-atomikos</code></td><td>Starter for JTA transactions 使用 Atomikos</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jta-bitronix</code></td><td>Starter for JTA transactions 使用 Bitronix</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-mail</code></td><td>Starter 用于使用 Java Mail 和 Spring Framework 的电子邮件发送支持</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-mustache</code></td><td>Starter for building web applications 使用 Mustache 视图</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-oauth2-client</code></td><td>Starter 使用 Spring Security 的 OAuth2/OpenID Connect client features</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-oauth2-resource-server</code></td><td>Starter 用于使用 Spring Security 的 OAuth2 资源服务器 features</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-quartz</code></td><td>Starter 用于使用 Quartz 调度程序</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-security</code></td><td>Starter 使用 Spring Security</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-test</code></td><td>Starter 用于测试 Spring Boot applications with libraries，包括 JUnit，Hamcrest 和 Mockito</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-thymeleaf</code></td><td>Starter for building MVC web applications 使用 Thymeleaf 视图</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-validation</code></td><td>Starter 用于使用 Hibernate Validator 进行 Java Bean 验证</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-web</code></td><td>Starter for building web，包括使用 Spring MVC 的 RESTful，applications。使用 Tomcat 作为默认嵌入式容器</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-web-services</code></td><td>Starter 使用 Spring Web Services</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-webflux</code></td><td>Starter for building WebFlux applications 使用 Spring Framework 的 Reactive Web 支持</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-websocket</code></td><td>Starter for building WebSocket applications 使用 Spring Framework 的 WebSocket 支持</td><td>Pom</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="springbootapplication启动原理">@SpringBootApplication启动原理<a href="#springbootapplication启动原理" class="hash-link" aria-label="@SpringBootApplication启动原理的直接链接" title="@SpringBootApplication启动原理的直接链接">​</a></h2><p><strong>@SpringBootApplication</strong></p><p>Spring Boot应用标注在某个类上说明这个类是SpringBoot的主配置类，SpringBoot就应该运行这个类的main方法来启动SpringBoot应用</p><p>下面是这个注解的内部：组合注解</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Target(ElementType.TYPE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Documented</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Inherited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAutoConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ComponentScan(excludeFilters = { @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface SpringBootApplication {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>@SpringBootConfiguration：</strong>Spring Boot的配置类；</p><p>​    标注在某个类上，表示这是一个Spring Boot的配置类；</p><p>这个注解进去后是一个标注了<strong>@Configuration</strong>的类：</p><p>配置类上来标注这个注解；配置类 ----- 配置文件；配置类也是容器中的一个组件</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Target(ElementType.TYPE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Documented</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface SpringBootConfiguration {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>@EnableAutoConfiguration：</strong>开启自动配置功能</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Target(ElementType.TYPE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Documented</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Inherited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigurationPackage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import(AutoConfigurationImportSelector.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface EnableAutoConfiguration {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>@AutoConfigurationPackage：</strong>自动配置包</p><p>  <strong>@Import(AutoConfigurationPackages.Registrar.class)：</strong>Spring的底层注解@Import，给容器中导入一个组件；导入的组件由AutoConfigurationPackages.Registrar.class</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Target(ElementType.TYPE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Documented</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Inherited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import(AutoConfigurationPackages.Registrar.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface AutoConfigurationPackage {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>内部注册SpringBoot启动器：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static class Registrar implements ImportBeanDefinitionRegistrar, DeterminableImports {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void registerBeanDefinitions(AnnotationMetadata metadata, BeanDefinitionRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        register(registry, new PackageImports(metadata).getPackageNames().toArray(new String[0]));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Set&lt;Object&gt; determineImports(AnnotationMetadata metadata) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Collections.singleton(new PackageImports(metadata));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过调试可以看出</p><p><img loading="lazy" alt="2" src="/Computer-Science-Learn-Notes/assets/images/2-2caa89c7e4f3864eb510576d131fc6fa.png" width="1356" height="571" class="img_ev3q"></p><p>再次调试这段：<em>register(registry, new PackageImports(metadata).getPackageNames().toArray(new String<!-- -->[0]<!-- -->));</em></p><p><img loading="lazy" alt="3" src="/Computer-Science-Learn-Notes/assets/images/3-652ee5ad3b5aa7ed2fa281ac967696be.png" width="474" height="224" class="img_ev3q"></p><p>可得出结论：将<strong>主配置类（@SpringBootApplication标注的类）的所在包及下面所有子包里面的所有组件扫描到Spring容器</strong></p><p>再看<strong>EnableAutoConfiguration的**</strong>@Import(AutoConfigurationImportSelector.class)**给容器导入组件，将所有需要导入的组件以全类名的方式返回；这些组件就会被添加到容器中；</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public String[] selectImports(AnnotationMetadata annotationMetadata) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!isEnabled(annotationMetadata)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return NO_IMPORTS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AutoConfigurationEntry autoConfigurationEntry = getAutoConfigurationEntry(annotationMetadata);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过观察，这个2.0的SpringBoot是跳转到了<strong>getAutoConfigurationEntry</strong>进行了遍历依赖包</p><p>通过单步调试可以看到，这个会给容器中导入非常多的自动配置类（xxxAutoConfiguration）；就是给容器中导入这个场景需要的所有组件，并配置好这些组件；自动配置类</p><p><img loading="lazy" alt="4" src="/Computer-Science-Learn-Notes/assets/images/4-691b39872d7d7e17b797ccf3eb3216e6.png" width="941" height="871" class="img_ev3q"></p><p>可以观察到这个查到包的调用方式：getCandidateConfigurations</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected AutoConfigurationEntry getAutoConfigurationEntry(AnnotationMetadata annotationMetadata) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!isEnabled(annotationMetadata)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return EMPTY_ENTRY;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AnnotationAttributes attributes = getAttributes(annotationMetadata);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configurations = removeDuplicates(configurations);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set&lt;String&gt; exclusions = getExclusions(annotationMetadata, attributes);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    checkExcludedClasses(configurations, exclusions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configurations.removeAll(exclusions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configurations = getConfigurationClassFilter().filter(configurations);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fireAutoConfigurationImportEvents(configurations, exclusions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new AutoConfigurationEntry(configurations, exclusions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过调用getSpringFactoriesLoaderFactoryClass</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected List&lt;String&gt; getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                         getBeanClassLoader());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Assert.notEmpty(configurations, &quot;No auto configuration classes found in META-INF/spring.factories. If you &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    + &quot;are using a custom packaging, make sure that file is correct.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return configurations;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个方法中：loadFactoryNames就是对这个SpringBoot依赖包进行加载（把得到的properties添加到容器中进行加载）</p><p><img loading="lazy" alt="5" src="/Computer-Science-Learn-Notes/assets/images/5-288bfd78efdd6fc358fe57f7df5cd711.png" width="1066" height="530" class="img_ev3q"></p><p>这个<strong>FACTORIES_RESOURCE_LOCATION</strong>静态变量也标识了这些<strong>包的路径位置</strong>：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static final String FACTORIES_RESOURCE_LOCATION = &quot;META-INF/spring.factories&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>仔细看，还真是。SpringBoot将这些值作为自动配置类导入到容器中，自动配置类就生效</p><p><img loading="lazy" alt="6" src="/Computer-Science-Learn-Notes/assets/images/6-cbcf8a9b89c433d902e9f7227e6765e0.png" width="1559" height="651" class="img_ev3q"></p><p><strong>小结</strong></p><p>将META-INF/spring.factories里面配置的所有通过EnableAutoConfiguration加入到容器中</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="idea-快速构建">IDEA 快速构建<a href="#idea-快速构建" class="hash-link" aria-label="IDEA 快速构建的直接链接" title="IDEA 快速构建的直接链接">​</a></h2><p><img loading="lazy" alt="7" src="/Computer-Science-Learn-Notes/assets/images/7-cce28cef24bd579d4d0b946d88c7a1cb.png" width="858" height="594" class="img_ev3q"></p><p>默认生成的Spring Boot项目结果</p><p>resources文件夹中目录结构</p><ul><li><strong>static</strong>：保存所有的静态资源； js css images；</li><li></li><li><strong>templates</strong>：保存所有的模板页面；（Spring Boot默认jar包使用嵌入式的Tomcat，默认不支持JSP页面）；可以使用模板引擎（freemarker、thymeleaf）；</li><li><strong>application.properties</strong>：Spring Boot应用的配置文件；可以修改一些默认设置；</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="yaml">YAML<a href="#yaml" class="hash-link" aria-label="YAML的直接链接" title="YAML的直接链接">​</a></h2><p>XML和YAML区别：</p><p>XML：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;server&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;port&gt;8080&lt;/port&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/server&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>YAML:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="yaml基本语法">YAML基本语法<a href="#yaml基本语法" class="hash-link" aria-label="YAML基本语法的直接链接" title="YAML基本语法的直接链接">​</a></h3><p>写法：Key:(空格)Value</p><p>其他数组、对象语法可以阅读：<a href="https://juejin.im/post/5c1a4a0fe51d45344a1c3d2a" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5c1a4a0fe51d45344a1c3d2a</a></p><p>将YAML的配置的属性映射到实体类中<strong>@ConfigurationProperties</strong>对实体类的配置进行绑定</p><p><strong>prefix：</strong>配置用哪个进行绑定</p><p>在YAML可以配置这样一个案例：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 张三</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">isBoss</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">birthday</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2020/2/2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token key atrule" style="color:#00a4db">k1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token key atrule" style="color:#00a4db">k2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> lisi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> zhaoliu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dog</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 小狗</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以创建一个实体类进行绑定测试：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Person {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String lastName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer age;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Boolean isBoss;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Date birthday;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;String, Object&gt; map;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;Object&gt; list;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Dog dog;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果使用ConfigurationProperties出现以下错误：</p><p><img loading="lazy" alt="8" src="data:image/png;base64,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" width="497" height="36" class="img_ev3q"></p><p>解决方案：导入配置文件处理器</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-configuration-processor</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">optional</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">optional</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意：这里必须使用<strong>@Component</strong>把它加入到容器中，就像<strong>@Repository</strong>一样才能使用</p><p>测试结果：</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Person</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">lastName=&#x27;张三&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age=</span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isBoss=</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> birthday=Sun Feb </span><span class="token number" style="color:#36acaa">02</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token plain"> CST </span><span class="token number" style="color:#36acaa">2020</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> map=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">k1=</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k2=</span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> list=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">lisi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> zhaoliu</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dog=Dog</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name=&#x27;小狗&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="单元测试">单元测试<a href="#单元测试" class="hash-link" aria-label="单元测试的直接链接" title="单元测试的直接链接">​</a></h2><p>注：测试类和主类要包名要统一才能启动</p><p><img loading="lazy" alt="9" src="data:image/png;base64,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" width="325" height="217" class="img_ev3q"></p><p><strong>使用SSM和使用SpringBoot的Test功能的对比</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssm">SSM<a href="#ssm" class="hash-link" aria-label="SSM的直接链接" title="SSM的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//@RunWith 指定用哪种驱动进行单元测试，默认是junit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration(locations = &quot;classpath:applicationContext.xml&quot;) //指定配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ApplicationContext ioc = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private BookServlet bookServlet;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bookServlet.doGet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="springboot">SpringBoot<a href="#springboot" class="hash-link" aria-label="SpringBoot的直接链接" title="SpringBoot的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Springboot02ApplicationTests {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Person person;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void contextLoads() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(person);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果要使用RunWith需要进入Maven删除exclusions</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">exclusions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">exclusion</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.junit.vintage</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">junit-vintage-engine</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">exclusion</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">exclusions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>就可以使用Runnwith测试啦：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Springboot02ApplicationTests {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Person person;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void contextLoads() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(person);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configurationpropertiesvalue">@ConfigurationProperties&amp;@Value<a href="#configurationpropertiesvalue" class="hash-link" aria-label="@ConfigurationProperties&amp;@Value的直接链接" title="@ConfigurationProperties&amp;@Value的直接链接">​</a></h2><table><thead><tr><th></th><th>@ConfigurationProperties</th><th>@Value</th></tr></thead><tbody><tr><td>功能</td><td>批量注入配置文件中的属性</td><td>一个个指定</td></tr><tr><td>松散绑定（松散语法“-”）</td><td>支持</td><td>不支持</td></tr><tr><td>SpEL</td><td>不支持</td><td>支持</td></tr><tr><td>JSR303数据校验</td><td>支持</td><td>不支持</td></tr><tr><td>复杂类型封装</td><td>支持</td><td>不支持</td></tr></tbody></table><p><strong>@Value</strong>测试的实体类：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//@ConfigurationProperties(prefix = &quot;person&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Person {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;zhiyu&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String lastName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;#{2*10}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer age;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;true&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Boolean isBoss;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Date birthday;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>测试结果：</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Person</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">lastName=&#x27;zhiyu&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age=</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isBoss=</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> birthday=</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> map=</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> list=</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dog=</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="propertysourceimportresource">@PropertySource&amp;@ImportResource<a href="#propertysourceimportresource" class="hash-link" aria-label="@PropertySource&amp;@ImportResource的直接链接" title="@PropertySource&amp;@ImportResource的直接链接">​</a></h2><p><strong>@PropertySource</strong>：加载指定的配置文件</p><p><strong>注：</strong>加载配置文件时需要配置<strong>@ConfigurationProperties(prefix = &quot;&quot;)</strong>使用</p><p>使用案例：</p><p>YAML文件中只有端口：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在类路径下创建一个配置文件：person.properties</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">person.lastName=李四</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.age=18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.isBoss=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.birthday=2020/2/2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.map.k1=12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.map.k2=13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.list=a,b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.dog.name=小狗</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.dog.age=2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在实体类中使用即可：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@PropertySource(&quot;classpath:person.properties&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Person {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>测试结果：</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Person</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">lastName=&#x27;李四&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age=</span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isBoss=</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> birthday=Sun Feb </span><span class="token number" style="color:#36acaa">02</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token plain"> CST </span><span class="token number" style="color:#36acaa">2020</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> map=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">k2=</span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k1=</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> list=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dog=Dog</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name=&#x27;小狗&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>@ImportResource</strong> 导入自定义的Spring文件</p><p>创建一个配置文件导入一个自定义的bean</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>创建一个spring配置文件：beans.xml，加入这个类</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">cn.zhiyucs.servcie.HelloService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">helloService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在入口加入这个注解导入这个spring文件：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ImportResource(locations = {&quot;classpath:beans.xml&quot;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Springboot02Application {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>测试即可：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ApplicationContext ioc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void containServiceTest() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    boolean b = ioc.containsBean(&quot;helloService&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 结果：true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当然这是不推荐的，SpringBoot推荐的方式如下：</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="推荐自己创建个配置类">【推荐】自己创建个配置类<a href="#推荐自己创建个配置类" class="hash-link" aria-label="【推荐】自己创建个配置类的直接链接" title="【推荐】自己创建个配置类的直接链接">​</a></h3><p>使用<strong>@Configuration</strong>指定这是一个配置类</p><p>使用<strong>@Bean</strong>把这个返回值加入到容器中，ID就是这个方法的方法名。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public HelloService helloService() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new HelloService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置文件的占位符">配置文件的占位符<a href="#配置文件的占位符" class="hash-link" aria-label="配置文件的占位符的直接链接" title="配置文件的占位符的直接链接">​</a></h3><p>在配置文件可以使用${} 取值random</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">person.lastName=${random.uuid}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.age=${random.int}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.isBoss=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.birthday=2020/2/2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.map.k1=12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.map.k2=13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.list=a,b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.dog.name=${person.last-name}_dog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person.dog.age=2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Person</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">lastName=&#x27;20b50b74</span><span class="token number" style="color:#36acaa">-4721</span><span class="token plain">-4d80-a786-f0e726b195f3&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age=</span><span class="token number" style="color:#36acaa">-790018533</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isBoss=</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> birthday=Sun Feb </span><span class="token number" style="color:#36acaa">02</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token plain"> CST </span><span class="token number" style="color:#36acaa">2020</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> map=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">k2=</span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k1=</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> list=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dog=Dog</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name=&#x27;6a1ab7a2-c65c-4df5-be46-3614ef009efd_dog&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="多profile支持">多Profile支持<a href="#多profile支持" class="hash-link" aria-label="多Profile支持的直接链接" title="多Profile支持的直接链接">​</a></h3><p>在编写配置文件的时候，文件名可以是，application-{profile}.yml/properties</p><p>两种激活方式：创建两个环境 -- 开发/生产</p><p><img loading="lazy" alt="10" src="data:image/png;base64,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" width="277" height="122" class="img_ev3q"></p><p>application中写激活哪个：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">active</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其他就写生产/开发环境的配置</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也可以直接都写在一个配置中</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">active</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>还可以使用命令行的方式更换环境</p><p>java -jar 包名 --spring.profiles.active=dev/pro</p><p>还可以使用IDEA的虚拟环境激活</p><p><img loading="lazy" alt="11" src="/Computer-Science-Learn-Notes/assets/images/11-698441d348bf5f73fd6cc9eabe40164b.png" width="1076" height="683" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="加载配置文件的位置和优先级">加载配置文件的位置和优先级<a href="#加载配置文件的位置和优先级" class="hash-link" aria-label="加载配置文件的位置和优先级的直接链接" title="加载配置文件的位置和优先级的直接链接">​</a></h2><p>测试<strong>类路径下</strong>（port:8080）和<strong>类路径的config</strong>文件夹下（port:8081）：</p><p><img loading="lazy" alt="12" src="data:image/png;base64,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" width="289" height="124" class="img_ev3q"></p><p><img loading="lazy" alt="12.1" src="data:image/png;base64,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" width="881" height="24" class="img_ev3q"></p><p>前两个同时存在，再把一个端口为8083的文件放在<strong>根目录下</strong>：</p><p><img loading="lazy" alt="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAABiCAYAAAA7mr2EAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAuXSURBVHhe7Z3vbxTHGcf5A+jfEfqmKq9KUTAmQJsY1Q6cHRcIJqkTEdtHioNBakh8RhW1+sKhyV0LQWpxavk4BSGl7bvlj5vOM7PP7tzcs3d7d3vLrO/74qO9nR/PrtF8PLNza55jb589p0Jgt/lsJPw4p2fqarsdqcPGcnLebLfU9tJs2majpQ5bO6o2Y8tOzyyr7VZbNeM+3G+73dbt6kkZl/fE4/4baRkAEsEIB8A0AOEAKBEIB0CJQDgASgTCAVAiEA6AEoFwAJQIhAOgRCAcACUSjHD+GySNvz5W1z76RGwLQFUZW7hvHj9W85eviHXD4AvHfPRZ96tVAFSZsYV79eqVevnypWrsPFQX350T2+RBki0PUiwAQqUQ4ZgXLzpq84u76uw7F8S2/ZBkyoMUy7ycHEXq9evXKmq31Xb8UjG/eLy2tKOPkYriF5Pp5eO1Vtu0J9wXmwEokkKFY54/f65WP70lts9CkikPfhwjVURv7ts3/2sbO+qwbQWydVo0I+FyItVai8p2tIjUht78j3r+SgCAIpiIcMyDr74W+0hIMuXBj3Naz16HWjj3z2eSulg4989o+rUHoGiO3AxH8PLwUM9kzUZd1WKZePbz/zYuivQyE0tIUAJH8hmOoKUhLSebWjoWCsKBN00hwoW2S8kzGuEuI0XhsKQEJTK2cJP+Hm4QfpxkxooFqpkdSyuUJByBTRNQFmMLVxSSTHmQYtUa/b8W8IXD1wKgLIIRDoBpAMIBUCIQDoASgXAAlAiEA6BEji1cOqcAAOUA4QAoEQgHQIlAOABKJBjh/nP9F10cXj2p7l3+tdgWgKoytnDN7x6rletXxLph8IVjtq+cEtv3Y36zpTpPdtTq3KxYXxah3AcIh7GF478W2H30UH1QmxPb5EGSLQ9SLBroUScM4UK4DxAOhQjHdDod9eBPd9WV+Qti235IMuXBj7P6SM8q8YvLnU5bzzB1Uz4/t6x2n9gXlKOorZ4+WtZt7XF+rq6edlpq6+aOPkYqyuqzuay29Dn14Xo655ee6VosV9Z9gOmmUOGYH/afqzu3b4nts5BkyoMfhyRYjWeWrZv6cyzA1hMtkimb7RKlw8JpOSItxq6WKk8ft57a2/puWaX7ANPNRIRj/vzwa7GPhCRTHqRY/lJuXs9cHT1D7WpxkjaxZK5wTzed+kF9pHqvDEtK4HPkZjiiRzg6j/SS0Rn4NAPt6uVjKpwnz6A+pp6Wii31NEGfO+JCOOBz5J7hiPKEo+c+vVz06IoB4YBDIcKFvkuZb0nZf3mYlsV9hHpi1ZcWwgGHsYWb9Pdwg5Bi8ezjyjB406RXHtuHZ7G6nt3kTROKSee06+nOitJ9gOlmbOGKQpIpD1IsVyh31zAp03JJXwv4YnAfs61v6tMlZVe9nvVMXCNnGkO6DzDdBCNciLjPYwQvQ93dTACGAcJlkDyv0ZfZyZIy/d5N6gPAICBcH+ZJsmRJScvP9E0SAEYBwgFQIhAOgBLBfyIEQIlAOABKBMIBUCJBC/fx2m1zzJvEA4DQCVY4ko3F8mXj8iKwmXPS9FbD1gMwDEEKx7KxWK5obnkR2ISMkTps2CT8lF/OTVfl1wMwDsEJ58rGYrnnbvkkMAkd28gPByZDJTZNxhXOZjVNX1xubtgEjE09a9kkjVQ225XIkRLyUxZUtz5fLFp+0jF+oZnaOLNjv+SPaX/KTR6pKM7C2tunjl8IFSU44SS5JKS+WfgphXnw0jLRDHItmc0BTon47Qy3tqQ/60Ht1ueLpUU1WVetZCaeLuOsq7397bl7LZu11V7f7WPbxH2QErmSHHnhpKT5PLB94Uydt6R064eNZev1jKhnq0H9Tb3UX+ojlIFqUAnh/vLt9+rT25vq0kJNnX3nonrvd++LfSWSJPuxQKYslmBo4XLF8oVyhBulv+lDy9uWaiboc09MUA2CF45km19cVss3/mA+/+PfL82RzqX+PkdDON2Hlrge3AZUh+CF+2TjjpHr8bMDtXhtxcxwt+89UM9e/JRLuuwl2QjC5YrVRzipvxtf6i/0IWreOagGwQt36f2amdGWrt809b+/8bH6+w8/qvq9L025398McL3kot1DLrObDjxL1LUA8qaJ6R/PKDzA/frBsbKFS/v32zTplcvtQ+e1hv2/U9yZElSD4IU7e/6iEWz2/G8S2ehI5/TZ70+DlpdoaZndTTRb/VqWbS1L1zJOlyfCxW1JItoJzKrPjpXKyu3tL4De+EZU4WsBX7jkmlp8c19G+O42oBoEL9y7lxbMTEYzGstG7WjGk2Y4Cf95xwxsZ9YahiJjgekjeOFW1/9ontXomY2e3egZjp7l6Jku/zOcnoHoy+JkGZgu46Q+WRQZC0wnwQmXBclFM9qwu5TEaRIjWQbSmx+jv6lRZCwwfVRGOACOAhAOgBI59rOfzygAQDlAOABKBMIBUCJBC3fxww1z3P7m+x78tgBUgdzCqcZbALwxpDFZRSAcqATSmKwiQwsn1RUJLSP9paN77pa/CY6fWFe7UaR2V86I9aNyfKWpooOGOnmi2LhlMKl/EwLCCXWTZljhjp9YVPW9+AXkqK127y+qk/ft0QyOg6ZauEDH+GXgg7aqx4MlV308uGxbHTepW1QL8XWJ/b1UoH73dPJ+U+3rmKaPjre/tz5kbOGe42tQvQ9dd9+Tm69Xv8A/F8VrpPHM+Znue9X3mfSFcLkITjhJLgmpL7OwF5nZggaIO1D3WTg9OGhA0uCi9idpdonP89YnwjkDzb9uXZ/zoOx/T1q6eIZbuKA/axEGxebztC1JRL8YrGTuPdO5y3Et0r5X586wyb+Bc726Fo/i7d9ft21MDPnfoUggnFBXJJJcElJfQhxM8YBwhaPPbj8zgHlmyVHvDzTpusygezLnzoB367NiZ91HWm8lccv8OvdnpJ8vuRcpnhFYz3LJ/aUxpPZFAeGEupDwB4Yp6xkcvWLQMosG/C/fWstR3zvQpesyg+4paZMl3Ag/E9dnSeBez+8vxuu5Pwg3CsEI97/PH46MG2eUwUlMnXBOH/naEG4SBCPcnfcW1d7Vz4xAe1dvqTtz+jnl1Bn13YcbtuzaLTX/qzPmMx8ZN870Lin9+v7CEXYZuW6ObjsxHoQrhGCE+3H9K3Vj9rfqX6t3zZHOSazlt88b6ZZOn8slHGHk0IOjKpsmVM+zGF9zUGw+JwFsW0+QWAh7n3QvtOPZ/UvEiEy7oj2zpxAPwhVCUEvKv11fV5dPzahv9ZHFos8009Exr3DugCZRer4WoMG0oo96wJg2B/5AH1Afb9e7n/3rGpm8rwWy7qmnnmfS3LGpbXqP3N5KZu+T5eD6pI0up+t1lwvxtHDS1xzJv6lzr0UC4YS6IiBx/vv5TpdM/Pmfq1td54OE64cZHN5v72HqjxL2Z53MzFQUEE6oKwISJ0s4/5yOzE7tphgvCwiX4i8TQ2TqhQPgTSCNySoC4UAlkMZkFcktHABgfPCfCAFQIhAOgBKBcACUSNDCUYJ9Ovr//TnhtwWgCgQrHMnGYvmycbmEzVbTm4HG1C3tqGacrYbbpVlFme56MY7Q183JPSkobZWbFQhUjyCFY9lYLFc0t1yiXzYbNwMpt6OUU644qXB94gh9D0tI6gHhqk9wwrmysVjuuVsuMaxwWWmm8gjn1iUSTlAICFd9KrFpUgXhCJOptFXvKiNMe5NEUS9p9UxoXlCOkyrWGnp21LGojNJgpX1sIkfTNqIsPZSUEcJVneCEk+SSkPoSqQyUv81DFM5rEy8JhxXOCBJnQnXb2jrbntMGc1sS6TBOd8W55zimkddpz1lTIVy1ObLC0eCU8IXrqY9nmXzCpaKSECSQvMnSG8udbW2bVFgpkT7HgHDVphJLymHoK0rBS0pXVNpAycq7bdt7AtG9OJssXcJ5MjJYUlafYIQ72/xpZNw4ZQqX1dcHwgHLOfV/Ea1qakiWuHUAAAAASUVORK5CYII=" width="220" height="98" class="img_ev3q"></p><p><img loading="lazy" alt="13.1" src="data:image/png;base64,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" width="921" height="17" class="img_ev3q"></p><p>前三个同时存在，把这个文件放到<strong>根目录下的config</strong>（端口为8084）：</p><p><img loading="lazy" alt="14" src="data:image/png;base64,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" width="316" height="221" class="img_ev3q"></p><p><img loading="lazy" alt="14.1" src="data:image/png;base64,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" width="895" height="33" class="img_ev3q"></p><p><strong>小结</strong>:优先级由高到低
-file:./config &gt; -file:./ &gt; -classpath:/config/ &gt; -classpath:/
SpringBoot这四个位置的配置文件都会加载
并且会互补配置</p><p><strong>测试：使用最低级的配置文件配置路径</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">servlet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">context-path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="15" src="/Computer-Science-Learn-Notes/assets/images/15-adab19a91f063ce3abef084bcafbba04.png" width="493" height="258" class="img_ev3q"></p><p><img loading="lazy" alt="16" src="/Computer-Science-Learn-Notes/assets/images/16-e7f2ca0154618d8e1b3c0e225fc79a0c.png" width="539" height="119" class="img_ev3q"></p><p><strong>运维配置</strong>
还可以使用命令行：
java -jar 包名 --spring.config.location=指定配置文件绝对路径</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="自动配置原理">自动配置原理<a href="#自动配置原理" class="hash-link" aria-label="自动配置原理的直接链接" title="自动配置原理的直接链接">​</a></h2><p><a href="https://www.docs4dev.com/docs/zh/spring-boot/2.1.1.RELEASE/reference/common-application-properties.html#a-common-application-properties" target="_blank" rel="noopener noreferrer">在YML/Properties能配置的属性</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动配置原理-1">自动配置原理<a href="#自动配置原理-1" class="hash-link" aria-label="自动配置原理的直接链接" title="自动配置原理的直接链接">​</a></h3><p>SpringBoot启动的时候加载主配置类<strong>@SpringBootApplication</strong>，开启了自动配置功能<strong>@EnableAutoConfiguration</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringbootAutoconfigApplication {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Target(ElementType.TYPE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Documented</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Inherited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAutoConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ComponentScan(excludeFilters = { @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface SpringBootApplication {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="wiz://open_document?guid=62a96d1e-af78-4e7c-92d5-9a06b8beedf8&amp;kbguid=&amp;private_kbguid=51ed7a20-5f58-11ea-ac04-65f1a2b61811" target="_blank" rel="noopener noreferrer">@EnableAutoConfiguration的作用</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="以httpencodingautoconfiguration为例解释自动配置原理">以HttpEncodingAutoConfiguration为例解释自动配置原理<a href="#以httpencodingautoconfiguration为例解释自动配置原理" class="hash-link" aria-label="以HttpEncodingAutoConfiguration为例解释自动配置原理的直接链接" title="以HttpEncodingAutoConfiguration为例解释自动配置原理的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties(ServerProperties.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.SERVLET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnClass(CharacterEncodingFilter.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnProperty(prefix = &quot;server.servlet.encoding&quot;, value = &quot;enabled&quot;, matchIfMissing = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HttpEncodingAutoConfiguration {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>@Configuration</strong>：配置类（相当于配置文件）</p><p><strong>@EnableConfigurationProperties</strong>：启用<a href="wiz://open_document?guid=5294ee2c-1921-4f6e-a62d-cd516a7f3bb2&amp;kbguid=&amp;private_kbguid=51ed7a20-5f58-11ea-ac04-65f1a2b61811" target="_blank" rel="noopener noreferrer">ConfigurationProperties</a>（从配置文件中获取值和bean的属性进行绑定）功能（ServerProperties）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;server&quot;, ignoreUnknownFields = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ServerProperties {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Server HTTP port.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer port;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>相当于把server的属性绑定到这个ServerProperties类中的属性（比如我们熟悉的port）</p><p><strong>@ConditionalOnWebApplication</strong>：根据不同的条件，如果满足指定的条件，整个配置类的配置才会生效</p><p><strong>@ConditionalOnClass</strong>：判断当前项目有无这个类（CharacterEncodingFilter）</p><p><strong>@ConditionalOnProperty</strong>：“判断文件是否存在这个配置</p><p><strong>@Bean</strong>给容器添加组件</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//和SpringBoot的值映射</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private final Encoding properties;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//只有一个有参构造器情况，参数从容器中拿</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public HttpEncodingAutoConfiguration(ServerProperties properties) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.properties = properties.getServlet().getEncoding();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 给容器添加组件，这个组件从properties获取</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public CharacterEncodingFilter characterEncodingFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filter.setEncoding(this.properties.getCharset().name());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filter.setForceRequestEncoding(this.properties.shouldForce(Encoding.Type.REQUEST));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filter.setForceResponseEncoding(this.properties.shouldForce(Encoding.Type.RESPONSE));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return filter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这一系列下来相当于可以实现</p><p>这个方法在<strong>ServerProperties</strong>中，而自动配置实现了<strong>@EnableConfigurationProperties(ServerProperties.class)</strong></p><p><img loading="lazy" alt="17" src="data:image/png;base64,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" width="464" height="98" class="img_ev3q"></p><p>主配置文件就可以写</p><p><img loading="lazy" alt="18" src="data:image/png;base64,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" width="265" height="66" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="小结">小结<a href="#小结" class="hash-link" aria-label="小结的直接链接" title="小结的直接链接">​</a></h3><p>SpringBoot 启动的时候加载主配置类，开启了自动配置功能 @EnableAutoConfiguration 。</p><p>@EnableAutoConfiguration 给容器导入META-INF/spring.factories 里定义的自动配置类。</p><p>筛选有效的自动配置类。</p><p>每一个自动配置类结合对应的 xxxProperties.java 读取配置文件进行自动配置功能 。</p><ul><li><code>xxxAutoConfiguration</code>：自动配置类给容器中添加组件。</li><li><code>xxxProperties</code>：封装配置文件中相关属性。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conditional相关注解和debug">@Conditional相关注解和Debug<a href="#conditional相关注解和debug" class="hash-link" aria-label="@Conditional相关注解和Debug的直接链接" title="@Conditional相关注解和Debug的直接链接">​</a></h2><p>@ConditionalOnBean:仅仅在当前上下文中存在某个对象时，才会实例化一个Bean
@ConditionalOnClass:某个class位于类路径上才会实例化一个Bean
@ConditionalOnExpression:当表达式为true的时候，才会实例化一个Bean
@ConditionalOnMissingBean:仅仅在当前上下文中不存在某个对象时，才会实例化一个Bean
@ConditionalOnMissingClass:某个class不位于类路径上才会实例化一个Bean
@ConditionalOnNotWebApplication:不是web应用</p><p>开启SpringBoot debug查看使用了哪些配置类</p><p><img loading="lazy" alt="19" src="/Computer-Science-Learn-Notes/assets/images/19-6849390b29fe0b86fe3c69febadd7bb6.png" width="1049" height="590" class="img_ev3q"></p><p>以及没有启动的</p><p><img loading="lazy" alt="20" src="/Computer-Science-Learn-Notes/assets/images/20-749278a166799ee0e6786be4f3377750.png" width="982" height="322" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="日志框架sl4j">日志框架SL4J<a href="#日志框架sl4j" class="hash-link" aria-label="日志框架SL4J的直接链接" title="日志框架SL4J的直接链接">​</a></h2><p>SL4J的几种实现方式：</p><p><img loading="lazy" alt="21" src="/Computer-Science-Learn-Notes/assets/images/21-261277d65f22e622e4fcffabab2e36cd.png" width="1152" height="636" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="其他日志框架转换为sl4j">其他日志框架转换为SL4J<a href="#其他日志框架转换为sl4j" class="hash-link" aria-label="其他日志框架转换为SL4J的直接链接" title="其他日志框架转换为SL4J的直接链接">​</a></h3><p><strong>SpringBoot（sl4j+lockbcak）</strong></p><p>Spring（commons-logging）</p><p>Hibernate（jboss-logging）</p><p>转换方式如下：</p><p><img loading="lazy" alt="22" src="/Computer-Science-Learn-Notes/assets/images/22-4f5414c90fb995c1f65311c1ff317080.png" width="1587" height="1123" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="springboot和日志关系">SpringBoot和日志关系<a href="#springboot和日志关系" class="hash-link" aria-label="SpringBoot和日志关系的直接链接" title="SpringBoot和日志关系的直接链接">​</a></h3><p><img loading="lazy" alt="23" src="/Computer-Science-Learn-Notes/assets/images/23-f66d0bc54d7ecf02ecba3c70dfd08352.png" width="1149" height="356" class="img_ev3q"></p><p>SpringBoot使用spring-boot-starter-logging来记录日志</p><p><img loading="lazy" alt="24" src="/Computer-Science-Learn-Notes/assets/images/24-b8be05417f737410617fd968b3657983.png" width="720" height="352" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="日志的配置">日志的配置<a href="#日志的配置" class="hash-link" aria-label="日志的配置的直接链接" title="日志的配置的直接链接">​</a></h3><p>路径的配置：</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 不指定路径当前项目下生成springboot.log日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#logging.file.name=springboot.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 在当前磁盘根路径下创建spring文件夹和里面的log文件，使用spring.log作为默认文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging.file.path=/springLog/log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="25" src="/Computer-Science-Learn-Notes/assets/images/25-6ac63da1a26e8ae8edde9bfab5022734.png" width="1229" height="229" class="img_ev3q"></p><p>日志输出格式控制：</p><ul><li>日志输出格式：</li><li>%d表示日期时间，</li><li>%thread表示线程名，</li><li>%-5level：级别从左显示5个字符宽度</li><li>%logger{50} 表示logger名字最长50个字符，否则按照句点分割。</li><li>%msg：日志消息，</li><li>%n是换行符</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 在控制台输出的日志格式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging.pattern.console=%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 指定文件中日志的输出格式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging.pattern.file=%d{yyyy-MM-dd} === [%thread] === %-5level === %logger{50} ==== %msg%n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出结果：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === INFO  === cn.zhiyucs.Springboot04ApplicationTests ==== Starting Springboot04ApplicationTests on DESKTOP-J83JFON with PID 3092 (started by 54271 in C:\Users\54271\Documents\SpringBoot_Twice\springboot_04)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === DEBUG === cn.zhiyucs.Springboot04ApplicationTests ==== Running with Spring Boot v2.3.1.RELEASE, Spring v5.2.7.RELEASE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === INFO  === cn.zhiyucs.Springboot04ApplicationTests ==== No active profile set, falling back to default profiles: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === INFO  === o.s.scheduling.concurrent.ThreadPoolTaskExecutor ==== Initializing ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === INFO  === cn.zhiyucs.Springboot04ApplicationTests ==== Started Springboot04ApplicationTests in 1.893 seconds (JVM running for 2.966)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === TRACE === cn.zhiyucs.Springboot04ApplicationTests ==== 这是跟踪日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === DEBUG === cn.zhiyucs.Springboot04ApplicationTests ==== 这是调试日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === INFO  === cn.zhiyucs.Springboot04ApplicationTests ==== 这是信息日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === WARN  === cn.zhiyucs.Springboot04ApplicationTests ==== 这是警告日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [main] === ERROR === cn.zhiyucs.Springboot04ApplicationTests ==== 这是错误日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-07-18 === [SpringContextShutdownHook] === INFO  === o.s.scheduling.concurrent.ThreadPoolTaskExecutor ==== Shutting down ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="指定日志框架">指定日志框架<a href="#指定日志框架" class="hash-link" aria-label="指定日志框架的直接链接" title="指定日志框架的直接链接">​</a></h3><p>在类路径下直接指定：logback.xml logback-spring.xml log4j2-spring.xml log4j2.xml</p><p><img loading="lazy" alt="26" src="data:image/png;base64,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" width="244" height="106" class="img_ev3q"></p><p>logback.xml：直接被日志框架识别</p><p>logback-spring.xml：可以使用SpringBoot日志的Profile的高级功能</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;springProfile name=&quot;dev&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} ----&gt; [%thread] ---&gt; %-5level %logger{50} - %msg%n&lt;/pattern&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/springProfile&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;springProfile name=&quot;!dev&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} ==== [%thread] ==== %-5level %logger{50} - %msg%n&lt;/pattern&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/springProfile&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/layout&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="切换日志框架">切换日志框架<a href="#切换日志框架" class="hash-link" aria-label="切换日志框架的直接链接" title="切换日志框架的直接链接">​</a></h3><p>直接在Maven的exclude即可</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="静态资源映射规则">静态资源映射规则<a href="#静态资源映射规则" class="hash-link" aria-label="静态资源映射规则的直接链接" title="静态资源映射规则的直接链接">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void addResourceHandlers(ResourceHandlerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!this.resourceProperties.isAddMappings()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.debug(&quot;Default resource handling disabled&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Duration cachePeriod = this.resourceProperties.getCache().getPeriod();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CacheControl cacheControl = this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        customizeResourceHandlerRegistration(registry.addResourceHandler(&quot;/webjars/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String staticPathPattern = this.mvcProperties.getStaticPathPattern();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!registry.hasMappingForPattern(staticPathPattern)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             .addResourceLocations(getResourceLocations(this.resourceProperties.getStaticLocations()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>WebJar+Maven方式加载静态资源</li></ol><p><strong>registry.hasMappingForPattern(&quot;/webjars/<!-- -->*<!-- -->*)</strong></p><p>去<a href="https://www.webjars.org/" target="_blank" rel="noopener noreferrer">WebJars</a>以jars的方式获取静态资源 如：jquery</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.webjars</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">jquery</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">3.5.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="27" src="/Computer-Science-Learn-Notes/assets/images/27-68e0f2bf9a54ef50d0f48073b3e09c79.png" width="1074" height="467" class="img_ev3q"></p><p>路径是在：org\webjars\jquery\3.5.1\jquery-3.5.1.jar!\META-INF\resources\webjars\jquery\3.5.1\jquery.js
网页访问路径：http://localhost:8080/webjars/jquery/3.5.1/jquery.js</p><p><img loading="lazy" alt="28" src="/Computer-Science-Learn-Notes/assets/images/28-d44f2a2f605953ac3a8e61c20e596e31.png" width="414" height="277" class="img_ev3q"></p><ol start="2"><li>可以设置静态资源的有关参数：（ResourceProperties.class）</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ResourceProperties {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final String[] CLASSPATH_RESOURCE_LOCATIONS = { &quot;classpath:/META-INF/resources/&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                  &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>访问当前项目的任何资源</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;/&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;classpath:/META-INF/resources/&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;classpath:/resources/&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;classpath:/static/&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;classpath:/public/&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>例如添加一个资源包：</p><p><img loading="lazy" alt="29" src="data:image/png;base64,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" width="278" height="218" class="img_ev3q"></p><p><strong>网页访问路径：http://localhost:8080/asserts/js/Chart.min.js</strong></p><ol start="4"><li>欢迎页的加载方式：也在WebMvcAutoConfiguration这个类中</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public WelcomePageHandlerMapping welcomePageHandlerMapping(ApplicationContext applicationContext,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                           FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WelcomePageHandlerMapping welcomePageHandlerMapping = new WelcomePageHandlerMapping(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.mvcProperties.getStaticPathPattern());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    welcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return welcomePageHandlerMapping;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过查看getWelcomePage方法就可以看出是<strong>加载静态资源的index.html</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private Optional&lt;Resource&gt; getWelcomePage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String[] locations = getResourceLocations(this.resourceProperties.getStaticLocations());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Arrays.stream(locations).map(this::getIndexHtml).filter(this::isReadable).findFirst();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private Resource getIndexHtml(String location) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.resourceLoader.getResource(location + &quot;index.html&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="模板引擎thymeleaf">模板引擎Thymeleaf<a href="#模板引擎thymeleaf" class="hash-link" aria-label="模板引擎Thymeleaf的直接链接" title="模板引擎Thymeleaf的直接链接">​</a></h2><p>整合SpringBoot</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-thymeleaf</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Thymeleaf的默认配置</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;spring.thymeleaf&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ThymeleafProperties {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final Charset DEFAULT_ENCODING = StandardCharsets.UTF_8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String DEFAULT_PREFIX = &quot;classpath:/templates/&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String DEFAULT_SUFFIX = &quot;.html&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>注：</strong>Controller中的@RequestMapping(&quot;/su&quot;)不能和return&quot;xx&quot;重复</p><p><img loading="lazy" alt="30" src="/Computer-Science-Learn-Notes/assets/images/30-49aa415a257f73b8cc63627efcf9ce04.png" width="306" height="124" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="springmvc自动配置原理">SpringMVC自动配置原理<a href="#springmvc自动配置原理" class="hash-link" aria-label="SpringMVC自动配置原理的直接链接" title="SpringMVC自动配置原理的直接链接">​</a></h2><p><a href="https://www.docs4dev.com/docs/zh/spring-boot/2.1.1.RELEASE/reference/boot-features-developing-web-applications.html#developing-web-applications" target="_blank" rel="noopener noreferrer">文档参考：SpringMVC</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="默认配置">默认配置<a href="#默认配置" class="hash-link" aria-label="默认配置的直接链接" title="默认配置的直接链接">​</a></h3><p>auto-configuration 在 Spring 的默认值之上添加以下 features：</p><ul><li><p>包含<code>ContentNegotiatingViewResolver</code>和<code>BeanNameViewResolver</code> beans（视图解析器，根据返回值视图对象（View），然后可以进行渲染（转发/重定向））。</p></li><li><p>支持提供静态资源，包括对 WebJars 的支持</p></li><li><p>自动注册<code>Converter</code>，<code>GenericConverter</code>和<code>Formatter</code> beans</p></li><li><ul><li>转换器 HttpMessageConverters</li><li>格式化器</li></ul></li><li><p>支持<code>HttpMessageConverters 转换 HTTP 请求和响应</code></p></li><li><p>自动注册<code>MessageCodesResolver 定义错误代码的生成规则</code></p></li><li><p>静态<code>index.html</code>支持。</p></li><li><p>自定义<code>Favicon</code>支持</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contentnegotiatingviewresolver">ContentNegotiatingViewResolver<a href="#contentnegotiatingviewresolver" class="hash-link" aria-label="ContentNegotiatingViewResolver的直接链接" title="ContentNegotiatingViewResolver的直接链接">​</a></h3><p>首先是<strong>ContentNegotiatingViewResolver</strong>：组合所有的视图解析器</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnBean(ViewResolver.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean(name = &quot;viewResolver&quot;, value = ContentNegotiatingViewResolver.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ContentNegotiatingViewResolver viewResolver(BeanFactory beanFactory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ContentNegotiatingViewResolver resolver = new ContentNegotiatingViewResolver();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resolver.setContentNegotiationManager(beanFactory.getBean(ContentNegotiationManager.class));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ContentNegotiatingViewResolver uses all the other view resolvers to locate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // a view so it should have a high precedence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resolver.setOrder(Ordered.HIGHEST_PRECEDENCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return resolver;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在ContentNegotiatingViewResolver中通过resolveViewName解析视图</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Nullable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public View resolveViewName(String viewName, Locale locale) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RequestAttributes attrs = RequestContextHolder.getRequestAttributes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Assert.state(attrs instanceof ServletRequestAttributes, &quot;No current ServletRequestAttributes&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;MediaType&gt; requestedMediaTypes = getMediaTypes(((ServletRequestAttributes) attrs).getRequest());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (requestedMediaTypes != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;View&gt; candidateViews = getCandidateViews(viewName, locale, requestedMediaTypes);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        View bestView = getBestView(candidateViews, requestedMediaTypes, attrs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (bestView != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return bestView;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过getCandidateViews进行遍历每个解析</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private List&lt;View&gt; getCandidateViews(String viewName, Locale locale, List&lt;MediaType&gt; requestedMediaTypes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;View&gt; candidateViews = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (this.viewResolvers != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Assert.state(this.contentNegotiationManager != null, &quot;No ContentNegotiationManager set&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (ViewResolver viewResolver : this.viewResolvers) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            View view = viewResolver.resolveViewName(viewName, locale);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (view != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                candidateViews.add(view);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (MediaType requestedMediaType : requestedMediaTypes) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                List&lt;String&gt; extensions = this.contentNegotiationManager.resolveFileExtensions(requestedMediaType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for (String extension : extensions) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    String viewNameWithExtension = viewName + &#x27;.&#x27; + extension;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    view = viewResolver.resolveViewName(viewNameWithExtension, locale);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (view != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        candidateViews.add(view);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后组合起来<strong>ContentNegotiatingViewResolver</strong>通过initServletContext的beansOfTypeIncludingAncestors</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected void initServletContext(ServletContext servletContext) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Collection&lt;ViewResolver&gt; matchingBeans =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BeanFactoryUtils.beansOfTypeIncludingAncestors(obtainApplicationContext(), ViewResolver.class).values();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>测试并调试：在主类创建一个视图解析器进行测试：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringbootCrudApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(SpringbootCrudApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ViewResolver myViewResovler() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new MyViewResolver();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static class MyViewResolver implements ViewResolver {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public View resolveViewName(String viewName, Locale locale) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在doDispatch进行调试：即可看见</p><p><img loading="lazy" alt="31" src="/Computer-Science-Learn-Notes/assets/images/31-349cb2f0400f19de011b2cd9f4001bd8.png" width="840" height="394" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="httpmessageconverters">HttpMessageConverters<a href="#httpmessageconverters" class="hash-link" aria-label="HttpMessageConverters的直接链接" title="HttpMessageConverters的直接链接">​</a></h3><p>Spring MVC 使用<code>HttpMessageConverter</code>接口转换 HTTP 请求和响应。</p><p>这个组件是从容器中确定的（WebMvcAutoConfiguration.class）：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public WebMvcAutoConfigurationAdapter(ResourceProperties resourceProperties, WebMvcProperties mvcProperties,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      ListableBeanFactory beanFactory, ObjectProvider&lt;HttpMessageConverters&gt; messageConvertersProvider,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      ObjectProvider&lt;ResourceHandlerRegistrationCustomizer&gt; resourceHandlerRegistrationCustomizerProvider,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      ObjectProvider&lt;DispatcherServletPath&gt; dispatcherServletPath) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.resourceProperties = resourceProperties;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.mvcProperties = mvcProperties;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.beanFactory = beanFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.messageConvertersProvider = messageConvertersProvider;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.resourceHandlerRegistrationCustomizer = resourceHandlerRegistrationCustomizerProvider.getIfAvailable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.dispatcherServletPath = dispatcherServletPath;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>从构造函数就可以看出这个类是获取了所有的HttpMessageConverter</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public HttpMessageConverters(HttpMessageConverter&lt;?&gt;... additionalConverters) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this(Arrays.asList(additionalConverters));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可知只要自定义Converter就可以像上面视图解析器一样放容器即可</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="messagecodesresolver">MessageCodesResolver<a href="#messagecodesresolver" class="hash-link" aria-label="MessageCodesResolver的直接链接" title="MessageCodesResolver的直接链接">​</a></h3><p>这个是用于定义错误代码的生成规则的，如（WebMvcAutoConfiguration.class）：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public MessageCodesResolver getMessageCodesResolver() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (this.mvcProperties.getMessageCodesResolverFormat() != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultMessageCodesResolver resolver = new DefaultMessageCodesResolver();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resolver.setMessageCodeFormatter(this.mvcProperties.getMessageCodesResolverFormat());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return resolver;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过查看getMessageCodesResolverFormat（）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Formatting strategy for message codes. For instance, `PREFIX_ERROR_CODE`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private DefaultMessageCodesResolver.Format messageCodesResolverFormat;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过观察注释可以看到错误代码的定义：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public enum Format implements MessageCodeFormatter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * Prefix the error code at the beginning of the generated message code. e.g.:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * {@code errorCode + &quot;.&quot; + object name + &quot;.&quot; + field}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PREFIX_ERROR_CODE {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public String format(String errorCode, @Nullable String objectName, @Nullable String field) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return toDelimitedString(errorCode, objectName, field);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * Postfix the error code at the end of the generated message code. e.g.:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * {@code object name + &quot;.&quot; + field + &quot;.&quot; + errorCode}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    POSTFIX_ERROR_CODE {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public String format(String errorCode, @Nullable String objectName, @Nullable String field) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return toDelimitedString(objectName, field, errorCode);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="springboot在springmvc的配置模式">SpringBoot在SpringMVC的配置模式<a href="#springboot在springmvc的配置模式" class="hash-link" aria-label="SpringBoot在SpringMVC的配置模式的直接链接" title="SpringBoot在SpringMVC的配置模式的直接链接">​</a></h3><p>以HiddenHttpMethodFilter为例：Spring在自动配置很多组件的时候，先看容器是否么有自己配置的（@Bean @Component）如果有就用用户配置的（如hiddenHttpMethodFilter），如果没有才自动配置，如果可以有多个（ViewResolver）将用户配置和自己默认组合一起</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean(HiddenHttpMethodFilter.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnProperty(prefix = &quot;spring.mvc.hiddenmethod.filter&quot;, name = &quot;enabled&quot;, matchIfMissing = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public OrderedHiddenHttpMethodFilter hiddenHttpMethodFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new OrderedHiddenHttpMethodFilter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="接管springboot的springmvc">接管SpringBoot的SpringMVC<a href="#接管springboot的springmvc" class="hash-link" aria-label="接管SpringBoot的SpringMVC的直接链接" title="接管SpringBoot的SpringMVC的直接链接">​</a></h3><p>使用WebMvcConfigurer的接口可以扩展SpringMVC</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyMvcConfig implements WebMvcConfigurer {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="32" src="/Computer-Science-Learn-Notes/assets/images/32-5df05d25f8501d04be6a239d2fac8d3f.png" width="982" height="403" class="img_ev3q"></p><p>比如使用SpringMVC的Controller：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyMvcConfig implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addViewControllers(ViewControllerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addViewController(&quot;/hello&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setViewName(&quot;success&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>分析这个WebMvcAutoConfigurationAdapter（WebMvcAutoConfiguration.class）,查看这个Import(EnableWebMvcConfiguration.class)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import(EnableWebMvcConfiguration.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties({ WebMvcProperties.class, ResourceProperties.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Order(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class WebMvcAutoConfigurationAdapter implements WebMvcConfigurer {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class EnableWebMvcConfiguration extends DelegatingWebMvcConfiguration implements ResourceLoaderAware {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在它的父类DelegatingWebMvcConfiguration中，setConfigurers通过addWebMvcConfigurers从容器中获取所有的WebMvcConfigure</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired(required = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void setConfigurers(List&lt;WebMvcConfigurer&gt; configurers) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!CollectionUtils.isEmpty(configurers)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.configurers.addWebMvcConfigurers(configurers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当然，下面也有很多方法：</p><p><img loading="lazy" alt="33" src="/Computer-Science-Learn-Notes/assets/images/33-f1e89c84576e4074cfde7a9e8c1367c7.png" width="620" height="453" class="img_ev3q"></p><p>以addViewControllers为例:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void addViewControllers(ViewControllerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (WebMvcConfigurer delegate : this.delegates) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delegate.addViewControllers(registry);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="小结-1">小结：<a href="#小结-1" class="hash-link" aria-label="小结：的直接链接" title="小结：的直接链接">​</a></h3><ol><li><p>实现了WebMvcConfigurer接口，SpringBoot就会将这个一起实现，如刚刚MyMvcConfig</p></li><li><p>DelegatingWebMvcConfiguration（也就是是实现了WebMvcConfigurer），SpringBoot会扫描整个能使用的Configurer到SpringMVC，然后就能使用SpringMVC的功能啦（setConfigurers -- addWebMvcConfigurers）</p></li></ol><p>【不推荐】<em>全面接管SpringMVC</em>：自己配SpringMVC@EnableWebMvc</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@EnableWebMvc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyMvcConfig implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addViewControllers(ViewControllerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addViewController(&quot;/hello&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setViewName(&quot;success&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个的核心就是 -- DelegatingWebMvcConfiguration</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Target(ElementType.TYPE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Documented</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import(DelegatingWebMvcConfiguration.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface EnableWebMvc {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也是组合自己写的Configurer</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired(required = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void setConfigurers(List&lt;WebMvcConfigurer&gt; configurers) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!CollectionUtils.isEmpty(configurers)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.configurers.addWebMvcConfigurers(configurers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>【重点小结】在<strong>DelegatingWebMvcConfiguration</strong>中与<strong>WebMvcAutoConfiguration</strong>（<strong>@ConditionalOnMissingBean</strong>）比较可知：容器中没有这个组件的时候，这个自动配置类才生效，如果我们使用<strong>@EnableWebMvc</strong>，这个自动配置类就不会生效。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureAfter({ DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     ValidationAutoConfiguration.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebMvcAutoConfiguration {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="国际化">国际化<a href="#国际化" class="hash-link" aria-label="国际化的直接链接" title="国际化的直接链接">​</a></h2><p>创建国际化文件
中文：xxx_zh_CN.properties
English：xxx_en_US.properties</p><p><img loading="lazy" alt="34" src="data:image/png;base64,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" width="278" height="106" class="img_ev3q"></p><p>IDEA快速创建国际化文件：</p><p><img loading="lazy" alt="35" src="/Computer-Science-Learn-Notes/assets/images/35-10df685f18745fb06768686160f29ec3.png" width="786" height="136" class="img_ev3q"></p><p>可以切换视图快速开发国际化</p><p><img loading="lazy" alt="36" src="data:image/png;base64,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" width="443" height="648" class="img_ev3q"></p><p>然后就可以多个文件开发：</p><p><img loading="lazy" alt="37" src="/Computer-Science-Learn-Notes/assets/images/37-7f01a8c678c6ad4ad92af0772aa6650a.png" width="822" height="389" class="img_ev3q"></p><p>SpringBoot使用MessageSourceAutoConfiguration自动配置了管理国际化的组件：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean(name = AbstractApplicationContext.MESSAGE_SOURCE_BEAN_NAME, search = SearchStrategy.CURRENT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Conditional(ResourceBundleCondition.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageSourceAutoConfiguration {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public MessageSource messageSource(MessageSourceProperties properties) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (StringUtils.hasText(properties.getBasename())) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 设置国际化资源及出门（去掉语言国家代码）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageSource.setBasenames(StringUtils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   .commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename())));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (properties.getEncoding() != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageSource.setDefaultEncoding(properties.getEncoding().name());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Duration cacheDuration = properties.getCacheDuration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (cacheDuration != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageSource.setCacheMillis(cacheDuration.toMillis());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return messageSource;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>由此可以配置主配置文件</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.messages.basename=i18n/login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用thymeleaf国际化">使用thymeleaf国际化<a href="#使用thymeleaf国际化" class="hash-link" aria-label="使用thymeleaf国际化的直接链接" title="使用thymeleaf国际化的直接链接">​</a></h3><p><img loading="lazy" alt="38" src="/Computer-Science-Learn-Notes/assets/images/38-be9c456e3cabfa24090524b88d9a40d9.png" width="905" height="279" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="springboot区域信息解析器">SpringBoot区域信息解析器<a href="#springboot区域信息解析器" class="hash-link" aria-label="SpringBoot区域信息解析器的直接链接" title="SpringBoot区域信息解析器的直接链接">​</a></h3><p>在WebMvcAutoConfiguration中解析区域信息localeResolver</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;locale&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public LocaleResolver localeResolver() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (this.mvcProperties.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new FixedLocaleResolver(this.mvcProperties.getLocale());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    localeResolver.setDefaultLocale(this.mvcProperties.getLocale());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return localeResolver;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>获取区域信息的方式：通过AcceptHeaderLocaleResolver，根据请求头的Accept-Language：zh_CN/ en_US获取</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Locale resolveLocale(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Locale defaultLocale = getDefaultLocale();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (defaultLocale != null &amp;&amp; request.getHeader(&quot;Accept-Language&quot;) == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return defaultLocale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Locale requestLocale = request.getLocale();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Locale&gt; supportedLocales = getSupportedLocales();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (supportedLocales.isEmpty() || supportedLocales.contains(requestLocale)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return requestLocale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Locale supportedLocale = findSupportedLocale(request, supportedLocales);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (supportedLocale != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return supportedLocale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (defaultLocale != null ? defaultLocale : requestLocale);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="自定义国际化">自定义国际化<a href="#自定义国际化" class="hash-link" aria-label="自定义国际化的直接链接" title="自定义国际化的直接链接">​</a></h3><p>前端设置：thymeleaf的(xxx)表示?xxx</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">btn btn-sm</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">th:</span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">@{/index(l=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">zh_CN</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">)}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">中文</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">btn btn-sm</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">th:</span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">@{/index(l=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">en_US</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">)}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">English</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>自定义创建一个判别前端传入的参数：要实现LocaleResolver接口</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyLocale implements LocaleResolver {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Locale resolveLocale(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String l = request.getParameter(&quot;l&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Locale locale = Locale.getDefault();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!StringUtils.isEmpty(l)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String[] s = l.split(&quot;_&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            locale = new Locale(s[0], s[1]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return locale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在自定义的MVC中实现这个国际化：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public LocaleResolver localeResolver() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new MyLocale();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="拦截器">拦截器<a href="#拦截器" class="hash-link" aria-label="拦截器的直接链接" title="拦截器的直接链接">​</a></h2><p>以拦截登录为例</p><p>首先把登录名放入到session中：session.setAttribute</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@PostMapping(&quot;/user/login&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public String login(@RequestParam(&quot;username&quot;) String username,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @RequestParam(&quot;password&quot;) String password,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Map&lt;String, Object&gt; map,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    HttpSession session) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!StringUtils.isEmpty(username) &amp;&amp; &quot;123&quot;.contentEquals(password)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        session.setAttribute(&quot;username&quot;, username);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;redirect:/main&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map.put(&quot;msg&quot;, &quot;用户名密码错误&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注册一个拦截器：<strong>HandlerInterceptor</strong></p><p>并且判断，如果用户名为空就不放行，转发到登录页面，并放入没有权限的信息，如果成功就放行</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginHandlerInterceptor implements HandlerInterceptor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = request.getSession();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object username = session.getAttribute(&quot;username&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (username == null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            request.setAttribute(&quot;msg&quot;, &quot;没有权限请先登录&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            request.getRequestDispatcher(&quot;/&quot;).forward(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在SpringMVC中注册这个拦截器，并<strong>拦截响应的访问地址</strong>：</p><p>这里拦截了所有的地址：除了/index / /user/login这三个地址</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void addInterceptors(InterceptorRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    registry.addInterceptor(new LoginHandlerInterceptor())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addPathPatterns(&quot;/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .excludePathPatterns(&quot;/index&quot;,&quot;/&quot;,&quot;/user/login&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>为了防止SpringBoot拦截静态资源可以加入<strong>addResourceHandlers</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void addResourceHandlers(ResourceHandlerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    registry.addResourceHandler(&quot;/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addResourceLocations(&quot;classpath:/static/&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="错误处理原理">错误处理原理<a href="#错误处理原理" class="hash-link" aria-label="错误处理原理的直接链接" title="错误处理原理的直接链接">​</a></h2><p>如果访问了没有的路径网页会：</p><p><img loading="lazy" alt="39" src="/Computer-Science-Learn-Notes/assets/images/39-be3e2cdab1493f79b1ade9b876ff4f1b.png" width="685" height="313" class="img_ev3q"></p><p>其他客户端会发送json数据：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: &quot;2020-07-18T17:08:27.106+00:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;status&quot;: 404,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;error&quot;: &quot;Not Found&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;message&quot;: &quot;No message available&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;path&quot;: &quot;/aaa&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>错误处理的自动配置：ErrorMvcAutoConfiguration</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnClass({ Servlet.class, DispatcherServlet.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Load before the main WebMvcAutoConfiguration so that the error View is available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureBefore(WebMvcAutoConfiguration.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties({ ServerProperties.class, ResourceProperties.class, WebMvcProperties.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ErrorMvcAutoConfiguration {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个类给容器添加了以下组件：</p><ul><li>DefaultErrorAttributes</li><li>BasicErrorController</li><li>ErrorPageCustomizer</li><li>DefaultErrorViewResolver</li></ul><p>首先看<strong>ErrorPageCustomizer</strong>：看registerErrorPages -- getRelativePath</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static class ErrorPageCustomizer implements ErrorPageRegistrar, Ordered {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void registerErrorPages(ErrorPageRegistry errorPageRegistry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ErrorPage errorPage = new ErrorPage(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.dispatcherServletPath.getRelativePath(this.properties.getError().getPath()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        errorPageRegistry.addErrorPages(errorPage);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个getPath的跳转位置：可知 -- 系统出现错误，来到error请求进行处理</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Value(&quot;${error.path:/error}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private String path = &quot;/error&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>BasicErrorController</strong>：处理默认/error请求</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;${server.error.path:${error.path:/error}}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class BasicErrorController extends AbstractErrorController {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>下面有两种处理方式：（这里就可以解释开头的现象），通过RequestHeader - <strong>accept判断</strong></p><p>产生HTML类型的数据</p><p><img loading="lazy" alt="40" src="/Computer-Science-Learn-Notes/assets/images/40-fffd7f173db54eac036cde429549bb5b.png" width="535" height="79" class="img_ev3q"></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(produces = MediaType.TEXT_HTML_VALUE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ModelAndView errorHtml(HttpServletRequest request, HttpServletResponse response) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpStatus status = getStatus(request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, Object&gt; model = Collections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .unmodifiableMap(getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.TEXT_HTML)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response.setStatus(status.value());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 去哪个页面作为错误页面，包含页面地址和页面内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ModelAndView modelAndView = resolveErrorView(request, response, status, model);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (modelAndView != null) ? modelAndView : new ModelAndView(&quot;error&quot;, model);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>产生JSON数据</p><p><img loading="lazy" alt="41" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgEAAAAeCAYAAAC1+c0GAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAS6SURBVHhe7d05SyRBGMbx/TiKIiIGYm5uZGZiIugHMDAyMDIWE8FMUDDwNhE0MBBF0Mg7EQQv8ABvrOVprdmaskene6bcxv4P/LDnrep2d2vo9+l2xv3z/Pxs/rfz8/PYOgAgv+gN4RECAACZRG8IjxAAAMgkekN4hAAAQCbRG8IjBAAAMoneEF6qEHB2dmZOT0+jBUpC+2hf/3ga82sAgHyjN4SXOASoiU9OTpqWlhZTU1OTiPbRvn4QYKEBAD56Q3iJQ4Cu5tMEAEv76hjuMVloAICP3hBe4hCgRYlr7kn4C/ubF/rx8dHs7u6aqakps7y8HNG2ahqL2wcAQAj4CcFDQF1dnenv7zetra2FWtoQcHd3ZwYGBsz09HTseNbc3t6a2dlZs729be7v7wt1baumMc1x9wEAvCu3N2xsbJjh4eHYMfULt2d8NTePgoaA+vp6s7KyYvQ4Pj4u1NOGgIODAzM0NBQtoAJB3JwsWVhYMFdXV7FjorH5+fnYMQDIuyQhIO7iUH1CPUO9w9ZKzc2rYCGgoaHBrK2tRQFAj9XV1cJY2hCghdMCjo2NFS3qT5mYmDAXFxexYz79+fb29opqm5ubEbemOf/j7wIAWfddb9AFYXt7exHdLbYXifbCUc+/m5tXQUJAY2OjWV9f/2j/7wFAocCOpwkBar5aMH2NS3LuAtuFFW3bur0FpBdGZ2dnVNNX24T1VXPcfez3cY/f29tb+L6lLC0tmYeHh6KaPhXhfzJCczTXrQEAyusNttGLeoM7pvO2W/tqbl5VFAJGRkbM0dGRaWtrK9SamprM1tbWR/s3ZnFxMXpfgB2XNCFAC2abuBsI9FyN2o65VPPDgr+v+1wvkJ6enkIoUE0NX9/bJkm733f82/yHh4fRmwJPTk6K6sKPBADgs+96g73Q0zk67vztnuu/mptnFYWA6+vrqNFfXl5GQaC5udns7OxENT1mZmZMbW1tUQCQNCFADdheiVu2OSvV+YvpvwAs7eMfx94NEB1Lx7TzFSIkaQjQ+wH8moKA+PW4uQCQd+X0hlJ0ro+7OESxikJAd3e3eX19jRq+bmurQdrH+Ph4bACQpCFAx9Vius3ZLnCaEFDqhVHNEKBb/P5HAONCgObw4wAA+KySEKDztc73cWP4p+L3BCgIvLy8fLT+98fo6GjRHF/SEGAbsVtzm7zG4hq7anH72Vv8bl0UAnRXwI65c0uFjVI0b39/v/BczV+3/cUNAppT7jEBIE/ShgC3P8SN45+qvDGwq6srCgJvb29mcHDw07gvaQgo1XzdJq9te3tfi6+mLdq2dRsUbLP356uu7b6+vsKYGyK0rVo5bwx8enqKGn45HxHU3LhxAMiztCHgqzu+KFaVECAdHR1RGIgb8yUNAT9FIcD/cUAlbm5uzNzcXMlfFqQxzXH3AQC8y0pv+M2qFgKSyEsIEH5tMACkQwgIL3EI+M3/gVCIEAAASIcQEF7iEMB/JQwA+An0hvAShwBRE9fVvBYoCe3jBwDRmF8DAOQbvSG8VCGg2lhoAICP3hAeIQAAkEn0hvAIAQCATKI3hEcIAABkEr0hPEIAACCT6A3hEQIAAJlEbwjvj/6RAQBA3pybv+kdgd7LlnaBAAAAAElFTkSuQmCC" width="513" height="30" class="img_ev3q"></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpStatus status = getStatus(request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (status == HttpStatus.NO_CONTENT) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new ResponseEntity&lt;&gt;(status);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, Object&gt; body = getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.ALL));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new ResponseEntity&lt;&gt;(body, status);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>响应错误页面的解析代码：errorHtml -- resolveErrorView(request, response, status, model);</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected ModelAndView resolveErrorView(HttpServletRequest request, HttpServletResponse response, HttpStatus status,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        Map&lt;String, Object&gt; model) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (ErrorViewResolver resolver : this.errorViewResolvers) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ModelAndView modelAndView = resolver.resolveErrorView(request, status, model);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (modelAndView != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return modelAndView;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>最后看DefaultErrorViewResolver，它首先声明了<em>SERIES_VIEWS</em>，用于判断状态码</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private static final Map&lt;Series, String&gt; SERIES_VIEWS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;Series, String&gt; views = new EnumMap&lt;&gt;(Series.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    views.put(Series.CLIENT_ERROR, &quot;4xx&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    views.put(Series.SERVER_ERROR, &quot;5xx&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SERIES_VIEWS = Collections.unmodifiableMap(views);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注释解释两个方法：SpringBoot是如何找错误页面的</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ModelAndView resolveErrorView(HttpServletRequest request, HttpStatus status, Map&lt;String, Object&gt; model) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ModelAndView modelAndView = resolve(String.valueOf(status.value()), model);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (modelAndView == null &amp;&amp; SERIES_VIEWS.containsKey(status.series())) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return modelAndView;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ModelAndView resolve(String viewName, Map&lt;String, Object&gt; model) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 默认Springboot可以找到一个页面 error/404</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String errorViewName = &quot;error/&quot; + viewName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 模板引擎可以解析这个页面地址就用模板引擎解析</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TemplateAvailabilityProvider provider = this.templateAvailabilityProviders.getProvider(errorViewName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                                           this.applicationContext);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (provider != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 模板引擎可用的情况下返回errorviewname指定的地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new ModelAndView(errorViewName, model);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 模板引擎不可用时，就在静态资源文件下找errorViewName页面 /error/404.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return resolveResource(errorViewName, model);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="定制错误页面和json错误数据">定制错误页面和JSON错误数据<a href="#定制错误页面和json错误数据" class="hash-link" aria-label="定制错误页面和JSON错误数据的直接链接" title="定制错误页面和JSON错误数据的直接链接">​</a></h2><p>定制错误页面
直接把文件放到error文件夹下，名字为4xx，5xx即可</p><p><img loading="lazy" alt="42" src="data:image/png;base64,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" width="362" height="187" class="img_ev3q"></p><p>当发生错误页面的时候可以获取错误页面的信息（有模板引擎情况下）：
timestamp 时间戳
status 状态码
error 错误信息
exception 异常对象
message 异常消息
errors JSR303 数据校验的错误</p><p><img loading="lazy" alt="43" src="/Computer-Science-Learn-Notes/assets/images/43-24ea1be45f2bff7d32c8256821b1222d.png" width="967" height="105" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="定制一个json数据">定制一个JSON数据<a href="#定制一个json数据" class="hash-link" aria-label="定制一个JSON数据的直接链接" title="定制一个JSON数据的直接链接">​</a></h3><p>这个错误处理属于Controller：</p><ul><li><p><strong>@ControllerAdvice</strong> 是一个特殊的@Component，用于标识一个类，这个类中被以下三种注解标识的方法：@ExceptionHandler，@InitBinder，@ModelAttribute，将作用于所有的@Controller类的接口上</p></li><li><p>@ResponseBody</p></li><li><p><strong>@ExceptionHandler</strong> (错误类.class) 统一异常处理，也可以指定要处理的异常类型</p></li></ul><p>第一种写法：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ControllerAdvice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyExceptionHandler {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ExceptionHandler(UserNotException.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Map&lt;String, Object&gt; handlerException(Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        map.put(&quot;code&quot;, &quot;user.notexist&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        map.put(&quot;message&quot;, e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return map;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>第二种：注意使用request定制状态码setAttribute(&quot;javax.servlet.error.status_code&quot;, 500);</p><p>设置以后SpringBoot自适应就会进入错误页面：（resource/error/500）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ExceptionHandler(UserNotException.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public String handlerException(Exception e, HttpServletRequest req) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 传入错误状态码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    req.setAttribute(&quot;javax.servlet.error.status_code&quot;, 400);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map.put(&quot;code&quot;, &quot;user.notexist&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map.put(&quot;message&quot;, e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;forward:/error&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>【推荐】</strong>第三种：响应是自适应的，通过ErrorAttributes改变需要返回的内容</p><p>首先定制一个错误控制：定义状态码、错误信息等</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ControllerAdvice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyExceptionHandler {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ExceptionHandler(UserNotException.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String handlerException(Exception e, HttpServletRequest req) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 传入错误状态码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        req.setAttribute(&quot;javax.servlet.error.status_code&quot;, 500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        map.put(&quot;code&quot;, &quot;user.notexist&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //        map.put(&quot;message&quot;, e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        map.put(&quot;message&quot;, &quot;用户不存在啦!!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        req.setAttribute(&quot;ext&quot;, map);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;forward:/error&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后创建一个错误数据传输中间，这个类的功能就是把自定义的错误页面的数据传给SpringBoot，然后响应到自适应页面：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyErrorAttributes extends DefaultErrorAttributes {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Map&lt;String, Object&gt; getErrorAttributes(WebRequest webRequest, ErrorAttributeOptions options) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, Object&gt; map = (Map&lt;String, Object&gt;)webRequest.getAttribute(&quot;ext&quot;, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return map;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>至于第二个参数scope是怎么定义的：</p><p>0 - request</p><p>1 - session</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface RequestAttributes {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Constant that indicates request scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int SCOPE_REQUEST = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Constant that indicates session scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * &lt;p&gt;This preferably refers to a locally isolated session, if such</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * a distinction is available.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Else, it simply refers to the common session.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int SCOPE_SESSION = 1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="44" src="/Computer-Science-Learn-Notes/assets/images/44-ffe50aa19b572717c5bb54c833e89f0f.png" width="1074" height="256" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="嵌入式servlet">嵌入式Servlet<a href="#嵌入式servlet" class="hash-link" aria-label="嵌入式Servlet的直接链接" title="嵌入式Servlet的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring两种配置方式">Spring两种配置方式：<a href="#spring两种配置方式" class="hash-link" aria-label="Spring两种配置方式：的直接链接" title="Spring两种配置方式：的直接链接">​</a></h3><ul><li>xxxConfigurer扩展配置</li><li>xxxCustomizer定制配置</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="嵌入式servlet两种修改相关配置">嵌入式Servlet两种修改相关配置<a href="#嵌入式servlet两种修改相关配置" class="hash-link" aria-label="嵌入式Servlet两种修改相关配置的直接链接" title="嵌入式Servlet两种修改相关配置的直接链接">​</a></h3><ol><li>配置文件</li></ol><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server.port=8083</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>在嵌入式Servlet中修改：在自定义的SpringMVC配置</li></ol><p>注：SpringBoot2 使用的是<strong>WebServerFactoryCustomizer</strong><code>&lt;ConfigurableWebServerFactory&gt;</code></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyMvcConfig implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public WebServerFactoryCustomizer&lt;ConfigurableWebServerFactory&gt; webServerFactoryCustomizer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new WebServerFactoryCustomizer&lt;ConfigurableWebServerFactory&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            嵌入式servlet容器相关的配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void customize(ConfigurableWebServerFactory factory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                factory.setPort(8083);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="注册三大组件">注册三大组件<a href="#注册三大组件" class="hash-link" aria-label="注册三大组件的直接链接" title="注册三大组件的直接链接">​</a></h3><ul><li>Filter</li><li>Servlet</li><li>Linstener</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="定制servlet">定制Servlet<a href="#定制servlet" class="hash-link" aria-label="定制Servlet的直接链接" title="定制Servlet的直接链接">​</a></h4><hr><p>创建一个Servlet，继承<strong>HttpServlet</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        doPost(req, resp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resp.getWriter().write(&quot;Hello MyServlet&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>创建一个自己的配置类，把这个Servlet加入到容器中（<strong>ServletRegistrationBean</strong>、@Bean）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyServerConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    注册三大组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ServletRegistrationBean myServelet() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletRegistrationBean registrationBean = new ServletRegistrationBean(new MyServlet(), &quot;/myservlet&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return registrationBean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="定制filter">定制Filter<a href="#定制filter" class="hash-link" aria-label="定制Filter的直接链接" title="定制Filter的直接链接">​</a></h4><hr><p>先创建一个自己的Filter，继承<strong>HttpFilter</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyFilter extends HttpFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MyFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;MyFilter process....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chain.doFilter(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.doFilter(request, response, chain);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同样是在配置类内注册，<strong>FilterRegistrationBean</strong>：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyServerConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    注册三大组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FilterRegistrationBean myFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FilterRegistrationBean filterRegistrationBean = new FilterRegistrationBean();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filterRegistrationBean.setFilter(new MyFilter());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filterRegistrationBean.setUrlPatterns(Arrays.asList(&quot;/&quot;, &quot;/index&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return filterRegistrationBean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="定制listener">定制Listener<a href="#定制listener" class="hash-link" aria-label="定制Listener的直接链接" title="定制Listener的直接链接">​</a></h4><hr><p>注册一个监听器，实现接口<strong>ServletContextListener</strong>：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyListener implements ServletContextListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void contextInitialized(ServletContextEvent sce) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;web应用启动!!!!!!!!!!!!!!!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void contextDestroyed(ServletContextEvent sce) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;web销毁!!!!!!!!!!!!!!!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>把监听器注册到配置类中，并放入容器<strong>ServletListenerRegistrationBean</strong>：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyServerConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    注册三大组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ServletListenerRegistrationBean myListener() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletListenerRegistrationBean&lt;MyListener&gt; listener = new ServletListenerRegistrationBean&lt;&gt;(new MyListener());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return listener;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用其他的嵌入式容器</p><ul><li>Jetty（长连接）</li><li>Undertow（不支持JSP）</li><li>Tomcat（默认）</li></ul><p><img loading="lazy" alt="45" src="/Computer-Science-Learn-Notes/assets/images/45-1790688f1a1db84684d96db83d86bb01.png" width="485" height="222" class="img_ev3q"></p><p>切换容器的方式：</p><p><img loading="lazy" alt="46" src="/Computer-Science-Learn-Notes/assets/images/46-d76d780e00cff08c5fe661b682e2bedd.png" width="1061" height="821" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="源码刨析-嵌入式servlet原理">源码刨析 嵌入式Servlet原理<a href="#源码刨析-嵌入式servlet原理" class="hash-link" aria-label="源码刨析 嵌入式Servlet原理的直接链接" title="源码刨析 嵌入式Servlet原理的直接链接">​</a></h2><p>WebServerFactoryCustomizer嵌入式Servlet的自动配置类：<strong>ServletWebServerFactoryAutoConfiguration</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 仅在类 ServletRequest 存在于 classpath 上时才生效</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnClass(ServletRequest.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 仅在当前应用是 Servlet Web 应用时才生效</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 确保前缀为 server 的配置参数加载到 bean ServerProperties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties(ServerProperties.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 1. 导入 ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar 以注册</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// BeanPostProcessor : WebServerFactoryCustomizerBeanPostProcessor 和 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ErrorPageRegistrarBeanPostProcessor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2. 导入 EmbeddedTomcat/EmbeddedJetty/EmbeddedUndertow 这三个属于</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ServletWebServerFactoryConfiguration 的嵌套配置类，这三个配置类会分别检测</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// classpath上存在的类，从而判断当前应用使用的是 Tomcat/Jetty/Undertow,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 从而决定定义哪一个 Servlet Web服务器的工厂 bean :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// TomcatServletWebServerFactory/JettyServletWebServerFactory/UndertowServletWebServerFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import({ ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletWebServerFactoryConfiguration.EmbeddedTomcat.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletWebServerFactoryConfiguration.EmbeddedJetty.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletWebServerFactoryConfiguration.EmbeddedUndertow.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ServletWebServerFactoryAutoConfiguration {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>针对当前Servlet容器是Tomcat时定义该 bean，用于定制化 TomcatServletWebServerFactory</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 仅在类 org.apache.catalina.startup.Tomcat 存在于 classpath 上时才生效</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnClass(name = &quot;org.apache.catalina.startup.Tomcat&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public TomcatServletWebServerFactoryCustomizer tomcatServletWebServerFactoryCustomizer(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ServerProperties serverProperties) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new TomcatServletWebServerFactoryCustomizer(serverProperties);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ServletWebServerFactoryConfiguration是一个针对ServletWebServerFactory进行配置的配置类。它通过检测应用classpath存在的类，从而判断当前应用要使用哪个Servlet容器:Tomcat,Jetty还是Undertow。检测出来之后，定义相应的Servlet Web服务器工厂组件bean</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ServletWebServerFactoryConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConditionalOnClass({ Servlet.class, Tomcat.class, UpgradeProtocol.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConditionalOnMissingBean(value = ServletWebServerFactory.class, search = SearchStrategy.CURRENT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static class EmbeddedTomcat {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConditionalOnClass({ Servlet.class, Server.class, Loader.class, WebAppContext.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConditionalOnMissingBean(value = ServletWebServerFactory.class, search = SearchStrategy.CURRENT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static class EmbeddedJetty {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConditionalOnClass({ Servlet.class, Undertow.class, SslClientAuthMode.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConditionalOnMissingBean(value = ServletWebServerFactory.class, search = SearchStrategy.CURRENT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static class EmbeddedUndertow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>三个实现类都继承自抽象基类AbstractServletWebServerFactory：</p><p><img loading="lazy" alt="47" src="/Computer-Science-Learn-Notes/assets/images/47-2c0fe927bacb62831396808d5d7c147f.png" width="1348" height="109" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="以tomcat为例">以Tomcat为例<a href="#以tomcat为例" class="hash-link" aria-label="以Tomcat为例的直接链接" title="以Tomcat为例的直接链接">​</a></h4><p>进入TomcatServletWebServerFactory，可以看到这个方法，配置Tomcat基本环境，返回一个嵌入式Servlet容器：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public WebServer getWebServer(ServletContextInitializer... initializers) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (this.disableMBeanRegistry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Registry.disableRegistry();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Tomcat tomcat = new Tomcat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    File baseDir = (this.baseDirectory != null) ? this.baseDirectory : createTempDir(&quot;tomcat&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tomcat.setBaseDir(baseDir.getAbsolutePath());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Connector connector = new Connector(this.protocol);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    connector.setThrowOnFailure(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tomcat.getService().addConnector(connector);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    customizeConnector(connector);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tomcat.setConnector(connector);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tomcat.getHost().setAutoDeploy(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configureEngine(tomcat.getEngine());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (Connector additionalConnector : this.additionalTomcatConnectors) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tomcat.getService().addConnector(additionalConnector);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prepareContext(tomcat.getHost(), initializers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return getTomcatWebServer(tomcat);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>查看最后返回的getTomcatWebServer，只要端口号大于等于0就自动启动</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected TomcatWebServer getTomcatWebServer(Tomcat tomcat) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new TomcatWebServer(tomcat, getPort() &gt;= 0, getShutdown());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过进入TomcatWebServer的initialize方法就可以看到启动容器</p><p><img loading="lazy" alt="48" src="/Computer-Science-Learn-Notes/assets/images/48-af92ff9c381fc8988acb5e585e1a5deb.png" width="880" height="584" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置是如何修改原理">配置是如何修改原理<a href="#配置是如何修改原理" class="hash-link" aria-label="配置是如何修改原理的直接链接" title="配置是如何修改原理的直接链接">​</a></h3><p>看ServletWebServerFactoryAutoConfiguration中，在自动配置之前先导入了BeanPostProcessorsRegistrar（后置处理器，Bean初始化前后，创建完对象没有赋值的除四害工作）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Import({ ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void setBeanFactory(BeanFactory beanFactory) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (beanFactory instanceof ConfigurableListableBeanFactory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.beanFactory = (ConfigurableListableBeanFactory) beanFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过观察下面的：registerBeanDefinitions方法中WebServerFactoryCustomizerBeanPostProcessor，</p><p>初始之前，如果当前初始化的一个WebServerFactory就调用postProcessBeforeInitialization</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (bean instanceof WebServerFactory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        postProcessBeforeInitialization((WebServerFactory) bean);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>获取所有的定制其，调用每一个定制其的customize方法来给servlet容器赋值（端口...）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private void postProcessBeforeInitialization(WebServerFactory webServerFactory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LambdaSafe.callbacks(WebServerFactoryCustomizer.class, getCustomizers(), webServerFactory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withLogger(WebServerFactoryCustomizerBeanPostProcessor.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .invoke((customizer) -&gt; customizer.customize(webServerFactory));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>再看WebServerFactoryCustomizerBeanPostProcessor中的Collection，这个从容器中获取这个类型的组件。定制servlet容器组件</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private Collection&lt;WebServerFactoryCustomizer&lt;?&gt;&gt; getCustomizers() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (this.customizers == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Look up does not include the parent context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.customizers = new ArrayList&lt;&gt;(getWebServerFactoryCustomizerBeans());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.customizers.sort(AnnotationAwareOrderComparator.INSTANCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.customizers = Collections.unmodifiableList(this.customizers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.customizers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="小结-2">小结：<a href="#小结-2" class="hash-link" aria-label="小结：的直接链接" title="小结：的直接链接">​</a></h3><ol><li>根据导入情况，添加相应的容器工厂：</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Import({ ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletWebServerFactoryConfiguration.EmbeddedTomcat.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletWebServerFactoryConfiguration.EmbeddedJetty.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletWebServerFactoryConfiguration.EmbeddedUndertow.class })</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>容器中某个组件创建就会触发<strong>后置处理器（BeanPostProcessorsRegistrar）</strong></li></ol><p>只要是ConfigurableListableBeanFactory就工作：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (beanFactory instanceof ConfigurableListableBeanFactory)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>这个后置处理器从容器中<strong>获取所有的定制器，然后定制属性（端口..）</strong></li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private Collection&lt;WebServerFactoryCustomizer&lt;?&gt;&gt; getCustomizers() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (this.customizers == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Look up does not include the parent context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.customizers = new ArrayList&lt;&gt;(getWebServerFactoryCustomizerBeans());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.customizers.sort(AnnotationAwareOrderComparator.INSTANCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.customizers = Collections.unmodifiableList(this.customizers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this.customizers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="嵌入式servlet自动配置原理">嵌入式Servlet自动配置原理<a href="#嵌入式servlet自动配置原理" class="hash-link" aria-label="嵌入式Servlet自动配置原理的直接链接" title="嵌入式Servlet自动配置原理的直接链接">​</a></h2><p>断点声明：</p><p><img loading="lazy" alt="49" src="/Computer-Science-Learn-Notes/assets/images/49-6fa6f9272e50dc2f34e49e5ea162ace9.png" width="888" height="346" class="img_ev3q"></p><p>首先启动SpringBoot</p><p><img loading="lazy" alt="50" src="/Computer-Science-Learn-Notes/assets/images/50-6cfb01d1c2e477b0d7041afb5c20d83c.png" width="1075" height="730" class="img_ev3q"></p><p>然后调用run方法：</p><p><img loading="lazy" alt="51" src="/Computer-Science-Learn-Notes/assets/images/51-0887f5020c3e417f244bb86c4aeb095a.png" width="1254" height="791" class="img_ev3q"></p><p>创建和刷新容器</p><p><img loading="lazy" alt="52" src="/Computer-Science-Learn-Notes/assets/images/52-d01bcfdbd50ea68e21d8297be94c19c4.png" width="1211" height="746" class="img_ev3q"></p><p>查看是如何创建容器的：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected ConfigurableApplicationContext createApplicationContext() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class&lt;?&gt; contextClass = this.applicationContextClass;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (contextClass == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            switch (this.webApplicationType) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case SERVLET:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    contextClass = Class.forName(DEFAULT_SERVLET_WEB_CONTEXT_CLASS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case REACTIVE:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    contextClass = Class.forName(DEFAULT_REACTIVE_WEB_CONTEXT_CLASS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                default:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    contextClass = Class.forName(DEFAULT_CONTEXT_CLASS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果是一个WEB容器：<strong>DEFAULT_SERVLET_WEB_CONTEXT_CLASS</strong>，如果是一个普通容器就创建：<strong>DEFAULT_CONTEXT_CLASS</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * The class name of application context that will be used by default for non-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * environments.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String DEFAULT_CONTEXT_CLASS = &quot;org.springframework.context.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            + &quot;annotation.AnnotationConfigApplicationContext&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * The class name of application context that will be used by default for web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * environments.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String DEFAULT_SERVLET_WEB_CONTEXT_CLASS = &quot;org.springframework.boot.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            + &quot;web.servlet.context.AnnotationConfigServletWebServerApplicationContext&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>主要是刷新IOC容器</p><p><img loading="lazy" alt="53" src="/Computer-Science-Learn-Notes/assets/images/53-937980323f5edcd6d1be52393d7ac381.png" width="1175" height="683" class="img_ev3q"></p><p>刷新IOC容器</p><p><img loading="lazy" alt="54" src="/Computer-Science-Learn-Notes/assets/images/54-af36c98584c8eba69187a245332b36f6.png" width="1213" height="786" class="img_ev3q"></p><p>以此类推</p><p><img loading="lazy" alt="55" src="/Computer-Science-Learn-Notes/assets/images/55-2743334ee5dadffe256e663716a121aa.png" width="661" height="95" class="img_ev3q"></p><p><img loading="lazy" alt="56" src="/Computer-Science-Learn-Notes/assets/images/56-924e0cb6243393bc9b6c0e4370be3782.png" width="615" height="109" class="img_ev3q"></p><p><img loading="lazy" alt="57" src="/Computer-Science-Learn-Notes/assets/images/57-b50851102761294da171565b9080fea9.png" width="793" height="685" class="img_ev3q"></p><p>然后就创建嵌入式的servlet容器：</p><p><img loading="lazy" alt="58" src="/Computer-Science-Learn-Notes/assets/images/58-f6198b31e5c48d31b9b0435d0eed6822.png" width="1001" height="707" class="img_ev3q"></p><p>然后就获取到了嵌入式servlet容器</p><p><img loading="lazy" alt="59" src="/Computer-Science-Learn-Notes/assets/images/59-b63f017e0b700a0f0b11b9102089965b.png" width="1167" height="674" class="img_ev3q"></p><p><strong>小结</strong>：IOC容器启动创建嵌入式的servlet容器</p><ol><li><p>SpringBoot启动运行run方法</p></li><li><p>刷新IOC容器（创建IOC容器对象，初始化容器，创建每一个组件）</p></li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">refreshContext(context);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后开始创建web容器：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">context = createApplicationContext();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果是web环境创建：AnnotationConfigServletWebServerApplicationContext</p><p>否则创建：AnnotationConfigApplicationContext</p><ol start="3"><li>刷新刚才创建号的IOC容器：</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">refresh((ApplicationContext) context);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li><p>调用onRefresh()，web的IOC容器重写了onRefresh方法</p></li><li><p>webIOC容器会创建嵌入式的Servlet容器</p></li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected void onRefresh() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    super.onRefresh();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        createWebServer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>获取嵌入式的Servlet容器工厂</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ServletWebServerFactory factory = getWebServerFactory();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后从IOC容器中获取TomcatServletWebServerFactory组件；</p><p>后置处理器：BeanPostProcessorsRegistrar 获取所有的定制器来定制Servlet的相关配置</p><ol start="7"><li>嵌入式Servlet容器创建并启动Tomcat</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="整合jdbc">整合JDBC<a href="#整合jdbc" class="hash-link" aria-label="整合JDBC的直接链接" title="整合JDBC的直接链接">​</a></h2><p>YAML配置：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3306/mybatis_test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver-class-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.mysql.jdbc.Driver</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动配置原理-2">自动配置原理<a href="#自动配置原理-2" class="hash-link" aria-label="自动配置原理的直接链接" title="自动配置原理的直接链接">​</a></h3><p>DataSourceProperties </p><ol><li>DataSourceConfiguration，根据配置创建数据源，默认使用Tomcat连接池，可以使用spring.datasource.type自定义数据源类型</li></ol><ul><li>Tomcat</li><li>Hikari</li><li>Dbcp2</li><li>Generic 自定义数据源</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean(DataSource.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnProperty(name = &quot;spring.datasource.type&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static class Generic {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DataSource dataSource(DataSourceProperties properties) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 使用DataSourceBuilder创建数据源，利用创建响应type的数据源，并且绑定相关属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return properties.initializeDataSourceBuilder().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><p>DataSourceAutoConfiguration</p></li><li><p>JdbcTemplateAutoConfiguration</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="整合druid">整合Druid<a href="#整合druid" class="hash-link" aria-label="整合Druid的直接链接" title="整合Druid的直接链接">​</a></h2><p>导入POM：</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">druid-spring-boot-starter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.1.10</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">log4j</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">log4j</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.2.17</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>首先配置YAML：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3306/mybatis_test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver-class-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.alibaba.druid.pool.DruidDataSource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#   数据源其他配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">initialSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">minIdle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxActive</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxWait</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">timeBetweenEvictionRunsMillis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">minEvictableIdleTimeMillis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">validationQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SELECT 1 FROM DUAL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testWhileIdle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testOnBorrow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testOnReturn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">poolPreparedStatements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#   配置监控统计拦截的filters，去掉后监控界面sql无法统计，&#x27;wall&#x27;用于防火墙</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">wall</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">log4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">useGlobalDataSourceStat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">connectionProperties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>配置Druid</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DruidConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSource druid() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new DruidDataSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    配置监控</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ServletRegistrationBean statViewServlet() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletRegistrationBean bean = new ServletRegistrationBean(new StatViewServlet(), &quot;/druid/*&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, String&gt; initParams = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;loginUsername&quot;, &quot;admin&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;loginPassword&quot;, &quot;123&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;allow&quot;, &quot;&quot;); // 默认所有</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        initParams.put(&quot;deny&quot;, &quot;&quot;); // 拒绝访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setInitParameters(initParams);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    配置一个web监控的filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FilterRegistrationBean webStatFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FilterRegistrationBean bean = new FilterRegistrationBean();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setFilter(new WebStatFilter());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, String&gt; initParams = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;exclusions&quot;, &quot;*.js,*.css,/druid/*&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setInitParameters(initParams);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setUrlPatterns(Arrays.asList(&quot;/*&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后就可以看见查询的信息：</p><p><img loading="lazy" alt="60" src="/Computer-Science-Learn-Notes/assets/images/60-b86923823a212b39bfd74bbd07fceaf5.png" width="1117" height="296" class="img_ev3q"></p><p>SpringBoot2 使用YAML直接配置监控器和访问地址：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3306/mybatis_test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver-class-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.alibaba.druid.pool.DruidDataSource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#   数据源其他配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">initialSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">minIdle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxActive</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxWait</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">timeBetweenEvictionRunsMillis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">minEvictableIdleTimeMillis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">validationQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SELECT 1 FROM DUAL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testWhileIdle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testOnBorrow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testOnReturn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">poolPreparedStatements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#   配置监控统计拦截的filters，去掉后监控界面sql无法统计，&#x27;wall&#x27;用于防火墙</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">wall</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">log4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">useGlobalDataSourceStat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">connectionProperties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">druid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">wall</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">aop-patterns</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.javayh.druid.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">web-stat-filter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">url-pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">exclusions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /druid/*</span><span class="token punctuation" style="color:#393A34">,</span><span class="token important">*.js</span><span class="token punctuation" style="color:#393A34">,</span><span class="token important">*.gif</span><span class="token punctuation" style="color:#393A34">,</span><span class="token important">*.jpg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token important">*.bmp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token important">*.png</span><span class="token punctuation" style="color:#393A34">,</span><span class="token important">*.css</span><span class="token punctuation" style="color:#393A34">,</span><span class="token important">*.ico</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">session-stat-enable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">session-stat-max-count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">stat-view-servlet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 是否启用statViewServlet配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 访问监控页面</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">url-pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/druid/*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 禁止手动重置监控数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">reset-enable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 设置监控页面的登陆名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">login-username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 设置监控页面的登陆密码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">login-password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="整合mybatis">整合Mybatis<a href="#整合mybatis" class="hash-link" aria-label="整合Mybatis的直接链接" title="整合Mybatis的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maven">Maven<a href="#maven" class="hash-link" aria-label="Maven的直接链接" title="Maven的直接链接">​</a></h3><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-jdbc</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.mybatis.spring.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">mybatis-spring-boot-starter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.1.3</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">mysql</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">mysql-connector-java</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">runtime</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用注解">使用注解<a href="#使用注解" class="hash-link" aria-label="使用注解的直接链接" title="使用注解的直接链接">​</a></h3><p>创建实体类进行测试：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class Employee {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String lastName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer gender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String email;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer dId;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class Department {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String departmentName;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用注解<strong>@Mapper</strong>标注使用Mybatis</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Mapper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface DepartmentMapper {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Select(&quot;select * from department where id = #{id} ;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Department getDepById(Integer id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Delete(&quot;delete from department where id = #{id}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int deleteDepById(Integer id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Options(useGeneratedKeys = true, keyProperty = &quot;id&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Insert(&quot;insert into department (department_name) values (#{departmentName});&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int insert(Department department);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Update(&quot;update department set department_name=#{departmentName} where id = #{id}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int updateDept(Department department);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也可以自定义Mybatis：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@org.springframework.context.annotation.Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MybatisConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ConfigurationCustomizer configurationCustomizer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new ConfigurationCustomizer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void customize(Configuration configuration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                configuration.setMapUnderscoreToCamelCase(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果@Mapper过多可以在主类中使用<strong>@MapperScan</strong>批量扫描接口</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@MapperScan(&quot;cn.zhiyucs.mapper&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringbootMybatis01Application {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(SpringbootMybatis01Application.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用配置文件">使用配置文件<a href="#使用配置文件" class="hash-link" aria-label="使用配置文件的直接链接" title="使用配置文件的直接链接">​</a></h3><p>创建Mybatis目录结构：</p><p><img loading="lazy" alt="61" src="data:image/png;base64,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" width="291" height="106" class="img_ev3q"></p><p>Mybatis主配置environment可以什么都不写：</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">configuration</span><span class="token doctype" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doctype" style="color:#999988;font-style:italic">        </span><span class="token doctype name" style="color:#999988;font-style:italic">PUBLIC</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype string" style="color:#e3116c;font-style:italic">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><span class="token doctype" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doctype" style="color:#999988;font-style:italic">        </span><span class="token doctype string" style="color:#e3116c;font-style:italic">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">settings</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">setting</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">mapUnderscoreToCamelCase</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">settings</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在主配置文件中配置MyBatis：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">mybatis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">config-location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mybatis/mybatis</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mapper-locations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mybatis/mapper/</span><span class="token important">*.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="springboot启动原理">SpringBoot启动原理<a href="#springboot启动原理" class="hash-link" aria-label="SpringBoot启动原理的直接链接" title="SpringBoot启动原理的直接链接">​</a></h2><p>程序入口：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SpringApplication.run(SpringbootStartertheoryApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="第一步创建springapplication对象">第一步：创建SpringApplication对象<a href="#第一步创建springapplication对象" class="hash-link" aria-label="第一步：创建SpringApplication对象的直接链接" title="第一步：创建SpringApplication对象的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static ConfigurableApplicationContext run(Class&lt;?&gt; primarySource, String... args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return run(new Class&lt;?&gt;[] { primarySource }, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static ConfigurableApplicationContext run(Class&lt;?&gt;[] primarySources, String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new SpringApplication(primarySources).run(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以观察它的构造方法：创建方法见下面</p><p>主要是配置两个类</p><ul><li>ApplicationContextInitializer</li><li>SpringApplicationRunListener</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.resourceLoader = resourceLoader;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Assert.notNull(primarySources, &quot;PrimarySources must not be null&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 配置source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.primarySources = new LinkedHashSet&lt;&gt;(Arrays.asList(primarySources));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 判断是否是web应用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.webApplicationType = WebApplicationType.deduceFromClasspath();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 创建初始化构造器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 创建应用监听器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 推断出main方法类</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.mainApplicationClass = deduceMainpplicationClass();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>再进入：getSpringFactoriesInstances</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private &lt;T&gt; Collection&lt;T&gt; getSpringFactoriesInstances(Class&lt;T&gt; type) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return getSpringFactoriesInstances(type, new Class&lt;?&gt;[] {});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private &lt;T&gt; Collection&lt;T&gt; getSpringFactoriesInstances(Class&lt;T&gt; type, Class&lt;?&gt;[] parameterTypes, Object... args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 获取类加载器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ClassLoader classLoader = getClassLoader();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Use names and ensure unique to protect against duplicates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 通过类加载器，获取指定的META-INF/spring.factories文件，获取文件中工厂类的全类名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set&lt;String&gt; names = new LinkedHashSet&lt;&gt;(SpringFactoriesLoader.loadFactoryNames(type, classLoader));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 通过类路径反射得到工厂对象，构造方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;T&gt; instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AnnotationAwareOrderComparator.sort(instances);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return instances;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过loadFactoryNames就可以知道</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static final String FACTORIES_RESOURCE_LOCATION = &quot;META-INF/spring.factories&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="第二步启动应用">第二步：启动应用<a href="#第二步启动应用" class="hash-link" aria-label="第二步：启动应用的直接链接" title="第二步：启动应用的直接链接">​</a></h3><p>主类：ConfigurableApplicationContext</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public ConfigurableApplicationContext run(String... args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StopWatch stopWatch = new StopWatch();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 应用启动计时器开始计时</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stopWatch.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConfigurableApplicationContext context = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Collection&lt;SpringBootExceptionReporter&gt; exceptionReporters = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Headless模式配置（做AWT，暂时不用管）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configureHeadlessProperty();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 获取启动监听器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SpringApplicationRunListeners listeners = getRunListeners(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 应用启动监听器开始计时（回调所有的SpringApplicationRunListeners.starting()）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listeners.starting();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 封装命令行参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationArguments applicationArguments = new DefaultApplicationArguments(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 配置环境模块（祥见下面prepareEnvironment方法）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 配置需要忽略的bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        configureIgnoreBeanInfo(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Banner配置(打印Spring的图标)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Banner printedBanner = printBanner(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 创建应用上下文对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context = createApplicationContext();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 异常分析报告</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exceptionReporters = getSpringFactoriesInstances(SpringBootExceptionReporter.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         new Class[] { ConfigurableApplicationContext.class }, context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 上下文基本属性配置（祥见下面prepareContext方法）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prepareContext(context, environment, listeners, applicationArguments, printedBanner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 更新应用上下文/刷新IOC容器（祥见下面refresh方法）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        refreshContext(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 从IOC容器中获取所有的ApplicationRunner和CommandLineRunner进行回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 先ApplicationRunner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        afterRefresh(context, applicationArguments);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stopWatch.stop();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (this.logStartupInfo) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new StartupInfoLogger(this.mainApplicationClass).logStarted(getApplicationLog(), stopWatch);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listeners.started(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        callRunners(context, applicationArguments);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catch (Throwable ex) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        handleRunFailure(context, ex, exceptionReporters, listeners);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new IllegalStateException(ex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listeners.running(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catch (Throwable ex) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        handleRunFailure(context, ex, exceptionReporters, null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new IllegalStateException(ex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 整个SpringBoot启动完成返回IOC容器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>获取监听器的方法：<strong>getSpringFactoriesInstances</strong>，可以看出也是从<strong>META-INF</strong>获取</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private SpringApplicationRunListeners getRunListeners(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class&lt;?&gt;[] types = new Class&lt;?&gt;[] { SpringApplication.class, String[].class };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new SpringApplicationRunListeners(logger,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             getSpringFactoriesInstances(SpringApplicationRunListener.class, types, this, args));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>配置Listener环境：<strong>prepareEnvironment</strong>(listeners, applicationArguments);</p><p>环境完成后回调SpringApplicationRunListeners.environmentPrepared方法，表示环境准备完成</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private ConfigurableEnvironment prepareEnvironment(SpringApplicationRunListeners listeners,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                   ApplicationArguments applicationArguments) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Create and configure the environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 创建配置环境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConfigurableEnvironment environment = getOrCreateEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 加载属性文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configureEnvironment(environment, applicationArguments.getSourceArgs());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConfigurationPropertySources.attach(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 监听器监听配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listeners.environmentPrepared(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bindToSpringApplication(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!this.isCustomEnvironment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment = new EnvironmentConverter(getClassLoader()).convertEnvironmentIfNecessary(environment,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                                               deduceEnvironmentClass());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConfigurationPropertySources.attach(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return environment;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以看到放行Banner后出现：</p><p><img loading="lazy" alt="63" src="data:image/png;base64,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" width="385" height="168" class="img_ev3q"></p><p>然后看<strong>createApplicationContext</strong>：决定创建</p><p>WEB（DEFAULT_SERVLET_WEB_CONTEXT_CLASS）</p><p>还是</p><p>普通IOC（DEFAULT_CONTEXT_CLASS）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected ConfigurableApplicationContext createApplicationContext() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class&lt;?&gt; contextClass = this.applicationContextClass;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (contextClass == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            switch (this.webApplicationType) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case SERVLET:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    contextClass = Class.forName(DEFAULT_SERVLET_WEB_CONTEXT_CLASS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case REACTIVE:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    contextClass = Class.forName(DEFAULT_REACTIVE_WEB_CONTEXT_CLASS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                default:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    contextClass = Class.forName(DEFAULT_CONTEXT_CLASS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        catch (ClassNotFoundException ex) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new IllegalStateException(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Unable create a default ApplicationContext, please specify an ApplicationContextClass&quot;, ex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (ConfigurableApplicationContext) BeanUtils.instantiateClass(contextClass);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>看<strong>prepareContext</strong>准备上下文：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private void prepareContext(ConfigurableApplicationContext context, ConfigurableEnvironment environment,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            SpringApplicationRunListeners listeners, ApplicationArguments applicationArguments, Banner printedBanner) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 保存刚刚的environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context.setEnvironment(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 后置处理器，注册小组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    postProcessApplicationContext(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 主要：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    applyInitializers(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listeners.contextPrepared(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (this.logStartupInfo) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logStartupInfo(context.getParent() == null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logStartupProfileInfo(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Add boot specific singleton beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConfigurableListableBeanFactory beanFactory = context.getBeanFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    beanFactory.registerSingleton(&quot;springApplicationArguments&quot;, applicationArguments);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (printedBanner != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beanFactory.registerSingleton(&quot;springBootBanner&quot;, printedBanner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (beanFactory instanceof DefaultListableBeanFactory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ((DefaultListableBeanFactory) beanFactory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (this.lazyInitialization) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.addBeanFactoryPostProcessor(new LazyInitializationBeanFactoryPostProcessor());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Load the sources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set&lt;Object&gt; sources = getAllSources();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Assert.notEmpty(sources, &quot;Sources must not be empty&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load(context, sources.toArray(new Object[0]));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 完成后回调contextLoaded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listeners.contextLoaded(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>看关键的applyInitializers，回调之前保存的ApplicationContextInitializer的initialize：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected void applyInitializers(ConfigurableApplicationContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (ApplicationContextInitializer initializer : getInitializers()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Class&lt;?&gt; requiredType = GenericTypeResolver.resolveTypeArgument(initializer.getClass(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                        ApplicationContextInitializer.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Assert.isInstanceOf(requiredType, context, &quot;Unable to call initializer.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initializer.initialize(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后看 listeners.contextPrepared(context); 回调之前的SpringApplicationRunListener的contextPrepared方法</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void contextPrepared(ConfigurableApplicationContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (SpringApplicationRunListener listener : this.listeners) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listener.contextPrepared(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后开始刷新容器<strong>refreshContext(context)</strong>：（配置、组件、自动配置）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void refresh() throws BeansException, IllegalStateException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Object var1 = this.startupShutdownMonitor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    synchronized(this.startupShutdownMonitor) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //准备更新上下文时的预备工作：1.初始化PropertySource; 2.验证Enrivonment中必要的属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.prepareRefresh();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //获取上下文中的BeanFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigurableListableBeanFactory beanFactory = this.obtainFreshBeanFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //对BeanFactory做些预备工作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.prepareBeanFactory(beanFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //对BeanFactory进行预处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.postProcessBeanFactory(beanFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //执行容器中的BeanFactoryPostProcessor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.invokeBeanFactoryPostProcessors(beanFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //注册BeanPostProcessor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.registerBeanPostProcessors(beanFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //初始化MessageSource(国际化相关)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.initMessageSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //初始化容器事件广播器(用来发布事件)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.initApplicationEventMulticaster();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //初始化一些特殊的Bean,主要做了: 1.初始化ThemeSource(跟国际化相关的接口) 2.创建WebServer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.onRefresh();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //将所有监听器注册到前两步创建的事件广播器中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.registerListeners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //结束BeanFactory的初始化工作(这一步主要用来将所有的单例BeanDefinition实例化)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.finishBeanFactoryInitialization(beanFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //上下文刷新完毕</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.finishRefresh();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (BeansException var9) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (this.logger.isWarnEnabled()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                this.logger.warn(&quot;Exception encountered during context initialization - cancelling refresh attempt: &quot; + var9);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.destroyBeans();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.cancelRefresh(var9);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw var9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.resetCommonCaches();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="基于原理的测试笔记测试启动的四个类">（基于原理的测试笔记）测试启动的四个类<a href="#基于原理的测试笔记测试启动的四个类" class="hash-link" aria-label="（基于原理的测试笔记）测试启动的四个类的直接链接" title="（基于原理的测试笔记）测试启动的四个类的直接链接">​</a></h2><p>测试类：</p><ul><li>ApplicationContextInitializer</li><li>SpringApplicationRunListener</li><li>ApplicationRunner</li><li>CommandLineRunner</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloApplicationContextInitializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void initialize(ConfigurableApplicationContext applicationContext) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ApplicationContextInitializer............initialize........&quot; + applicationContext);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloSpringApplicationRunListener implements SpringApplicationRunListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public HelloSpringApplicationRunListener(SpringApplication application, String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void starting() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;SpringApplicationRunListener......starting.......&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void environmentPrepared(ConfigurableEnvironment environment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(environment.getSystemEnvironment().get(&quot;os.name&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;SpringApplicationRunListener.........environmentPrepared.............&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void contextPrepared(ConfigurableApplicationContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;SpringApplicationRunListener.........contextPrepared.............&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void contextLoaded(ConfigurableApplicationContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;SpringApplicationRunListener.........contextLoaded.............&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void started(ConfigurableApplicationContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;SpringApplicationRunListener.........started.............&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void running(ConfigurableApplicationContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void failed(ConfigurableApplicationContext context, Throwable exception) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloApplicationRunner implements ApplicationRunner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run(ApplicationArguments args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ApplicationRunner.........run.........&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloCommandLineRunner implements CommandLineRunner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run(String... args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;CommandLineRunner............run........&quot; + Arrays.asList(args));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在主配置类中（application.properties）配置前两个类：</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.context.ApplicationContextInitializer=\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cn.zhiyucs.listener.HelloApplicationContextInitializer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.boot.SpringApplicationRunListener=\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cn.zhiyucs.listener.HelloSpringApplicationRunListener</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="自定义starters暂时无法理解">自定义starters【暂时无法理解】<a href="#自定义starters暂时无法理解" class="hash-link" aria-label="自定义starters【暂时无法理解】的直接链接" title="自定义starters【暂时无法理解】的直接链接">​</a></h2><p>编写自动配置类需要的注解：</p><ul><li><strong>@Configuration</strong> 指定是一个配置类</li><li><strong>@Conditionalxxx</strong> 指定条件成立的时候自动配置生效</li><li><strong>@AutoConfigureOrder</strong> 指定自动配置类的顺序</li><li><strong>@AutoConfigureAfter</strong></li><li><strong>@Bean</strong> 给容器添加组件</li><li><strong>@ConfigurationProperties(prefix = &quot;&quot;)</strong> 绑定相关的配置</li><li><strong>@EnableConfigurationProperties</strong> 让xxxProperties生效加入到容器中</li></ul><p>加入到META-INF-factories里面：</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Initializers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.context.ApplicationContextInitializer=\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.boot.autoconfigure.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>引入模式：</p><p>启动器依赖自动模式，只需引入starter即可</p><p>推荐命名：xxx-spring-boot-starter</p><p><img loading="lazy" alt="64" src="/Computer-Science-Learn-Notes/assets/images/64-04d71dd6d89b85bb3604089de35beef7.jpg" width="474" height="255" class="img_ev3q"></p><p>创建一个空工程</p><p>创建一个model</p><p><img loading="lazy" alt="65" src="/Computer-Science-Learn-Notes/assets/images/65-c87a4a2bc8133a30e561b9c4c3c7727e.png" width="1288" height="365" class="img_ev3q"></p><p>创建一个springbootInitialize</p><p><img loading="lazy" alt="66" src="/Computer-Science-Learn-Notes/assets/images/66-1e800c17351f075c7e9ed3495d2b9154.png" width="751" height="448" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="springboot缓存基本使用">SpringBoot缓存基本使用<a href="#springboot缓存基本使用" class="hash-link" aria-label="SpringBoot缓存基本使用的直接链接" title="SpringBoot缓存基本使用的直接链接">​</a></h2><p>应用--缓存--数据库的关系</p><p><img loading="lazy" alt="67" src="/Computer-Science-Learn-Notes/assets/images/67-4f3587989ea4be28b674ea2f04650cc1.png" width="1060" height="623" class="img_ev3q"></p><p>几个重要的缓存注解：</p><table><thead><tr><th>Cache</th><th>缓存接口，定义缓存操作。实现有：RedisCache、EhCacheCache、ConcurrentMapCache等</th></tr></thead><tbody><tr><td>CacheManager</td><td>缓存管理器，管理各种缓存（Cache）组件</td></tr><tr><td>@Cacheable</td><td>主要针对方法配置，能够根据方法的请求参数对其结果进行缓存</td></tr><tr><td>@CacheEvict</td><td>清空缓存</td></tr><tr><td>@CachePut</td><td>保证方法被调用，又希望结果被缓存。</td></tr><tr><td>@EnableCaching</td><td>开启基于注解的缓存</td></tr><tr><td>keyGenerator</td><td>缓存数据时key生成策略</td></tr><tr><td>serialize</td><td>缓存数据时value序列化策略</td></tr></tbody></table><p>缓存的spel</p><table><thead><tr><th>名字</th><th>位置</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>methodName</td><td>root object</td><td>当前被调用的方法名</td><td>#root.methodName</td></tr><tr><td>method</td><td>root object</td><td>当前被调用的方法</td><td>#root.method.name</td></tr><tr><td>target</td><td>root object</td><td>当前被调用的目标对象</td><td>#root.target</td></tr><tr><td>targetClass</td><td>root object</td><td>当前被调用的目标对象类</td><td>#root.targetClass</td></tr><tr><td>args</td><td>root object</td><td>当前被调用的方法的参数列表</td><td>#root.args<!-- -->[0]</td></tr><tr><td>caches</td><td>root object</td><td>当前方法调用使用的缓存列表（如@Cacheable(value={&quot;cache1&quot;, &quot;cache2&quot;})），则有两个cache</td><td>#root.caches<!-- -->[0]<!-- -->.name</td></tr><tr><td><em>argument name</em></td><td>evaluation context</td><td>方法参数的名字. 可以直接 #参数名 ，也可以使用 #p0或#a0 的形式，0代表参数的索引；</td><td>#iban 、 #a0 、 #p0</td></tr><tr><td>result</td><td>evaluation context</td><td>方法执行后的返回值（仅当方法执行之后的判断有效，如‘unless’，’cache put’的表达式 ’cache evict’的表达式beforeInvocation=false）</td><td>#result</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="基本使用">基本使用<a href="#基本使用" class="hash-link" aria-label="基本使用的直接链接" title="基本使用的直接链接">​</a></h3><p>在主类开启<strong>@EnableCaching</strong>缓存</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@MapperScan(&quot;cn.zhiyucs.mapper&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableCaching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringbootCache01Application {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(SpringbootCache01Application.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>要缓存的方法开启<strong>@Cacheable</strong>：（介绍见注释）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @Cacheable :将方法结果放入缓存，以后要有相同的数据直接从缓存中获取，不用调方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * CacheManager 管理多个cache组件，对缓存的真正CRUD操作再cache组件中，每一个缓存都有自己唯一的名字</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @Cacheable几个属性：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      cacheNames/value: 指定缓存组件的名字</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      key: 缓存数据使用的key，默认是使用参数方法参数的值， 1-方法的返回值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      keyGenerator: key的生成器，可以自己指定key的生成器的组件id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *          key / keyGenerator 二选一</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      cacheManager: 指定缓存管理器/缓存解析器（cacheResolver）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      condition: 指定符合条件下才缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      unless: 否定缓存,当unless指定的条件为true，方法的返回值就不会被缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *          eg. unless = &quot;#result == null&quot; 数据为空不缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      sync: 是否使用异步模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Cacheable(cacheNames = {&quot;emp&quot;},condition = &quot;#id&gt;0&quot;,unless = &quot;#result == null&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Employee getEmp(Integer id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;缓存测试专业SOUT&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Employee emp = employeeMapper.getEmpById(id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return emp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>数据库方面：开启驼峰命名自动映射，开启打印SQL：</p><p>打印SQL：</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">logging.level.cn.zhiyucs.mapper=debug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>驼峰命名自动映射：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">mybatis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">configuration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">map-underscore-to-camel-case</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="几个属性介绍">几个属性介绍<a href="#几个属性介绍" class="hash-link" aria-label="几个属性介绍的直接链接" title="几个属性介绍的直接链接">​</a></h3><p>cacheNames/value: 指定缓存组件的名字，将方法的返回结果放在哪个缓存中，是数组的方式，可以指定多个</p><p>condition #a0&gt;1的意思是当第一个参数的值大于1才生效</p><p>unless 同理，第一个参数为2的话就不会缓存</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Cacheable(cacheNames = {&quot;emp&quot;},key = &quot;keyGenerator&quot;, condition = &quot;#a0&gt;1&quot;,unless = &quot;#a0==2&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>key的两种方法：</strong></p><ul><li>直接指定：<strong>key = &quot;#root.methodName+&#x27;<!-- -->[&#x27;+#id+&#x27;]<!-- -->&quot;</strong></li><li>使用配置类指定：</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyCacheConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public KeyGenerator keyGenerator() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new KeyGenerator() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public Object generate(Object target, Method method, Object... params) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return method.getName()+&quot;[&quot;+ Arrays.asList(params).toString()+&quot;]&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后直接调用即可：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> @Cacheable(cacheNames = {&quot;emp&quot;},key = &quot;keyGenerator&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="缓存自动配置原理">缓存自动配置原理<a href="#缓存自动配置原理" class="hash-link" aria-label="缓存自动配置原理的直接链接" title="缓存自动配置原理的直接链接">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnClass(CacheManager.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnBean(CacheAspectSupport.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean(value = CacheManager.class, name = &quot;cacheResolver&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties(CacheProperties.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureAfter({ CouchbaseAutoConfiguration.class, HazelcastAutoConfiguration.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HibernateJpaAutoConfiguration.class, RedisAutoConfiguration.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import({ CacheConfigurationImportSelector.class, CacheManagerEntityManagerFactoryDependsOnPostProcessor.class })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CacheAutoConfiguration {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个类主要是导入了：CacheConfigurationImportSelector，导入了缓存要用的组件</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static class CacheConfigurationImportSelector implements ImportSelector {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String[] selectImports(AnnotationMetadata importingClassMetadata) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CacheType[] types = CacheType.values();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String[] imports = new String[types.length];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; types.length; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            imports[i] = CacheConfigurations.getConfigurationClass(types[i]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return imports;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>主要是导入了这几个组件：默认使用的是 -- SimpleCacheConfiguration</p><p><img loading="lazy" alt="68" src="/Computer-Science-Learn-Notes/assets/images/68-b7546feb3c64d94ecae4c3025949216b.png" width="604" height="219" class="img_ev3q"></p><p><strong>SimpleCacheConfiguration</strong>：给容器中注册了一个cacheManager</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConcurrentMapCacheManager cacheManager(CacheProperties cacheProperties,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       CacheManagerCustomizers cacheManagerCustomizers) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConcurrentMapCacheManager cacheManager = new ConcurrentMapCacheManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;String&gt; cacheNames = cacheProperties.getCacheNames();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!cacheNames.isEmpty()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cacheManager.setCacheNames(cacheNames);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return cacheManagerCustomizers.customize(cacheManager);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>进入<strong>ConcurrentMapCacheManager</strong></p><p>cacheManager的作用是：通过进入<strong>createConcurrentMapCache</strong>方法，可知这个主要是创建了<strong>ConcurrentMapCache</strong>类型的缓存组件</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Nullable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Cache getCache(String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Cache cache = this.cacheMap.get(name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (cache == null &amp;&amp; this.dynamic) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized (this.cacheMap) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cache = this.cacheMap.get(name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (cache == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                cache = createConcurrentMapCache(name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                this.cacheMap.put(name, cache);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return cache;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>ConcurrentMapCache</strong>的作用是把数据保存在ConcurrentMap&lt;Object, Object&gt;中：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private final ConcurrentMap&lt;Object, Object&gt; store;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Nullable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected Object lookup(Object key) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.store.get(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="以cacheable为例">以@Cacheable为例<a href="#以cacheable为例" class="hash-link" aria-label="以@Cacheable为例的直接链接" title="以@Cacheable为例的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Cacheable(cacheNames = {&quot;emp&quot;},condition = &quot;#id&gt;0&quot;,unless = &quot;#result == null&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>方法运行之前，先去查询Cache（缓存组件），按照cacheNames指定的名字获取：CacheManager先获取相应的缓存，第一次获取缓存会自动创建出来（createConcurrentMapCache(name)）</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Nullable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Cache getCache(String name) {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="69" src="/Computer-Science-Learn-Notes/assets/images/69-fd5f50baa7d68538063a98cd62aaa816.png" width="682" height="249" class="img_ev3q"></p><ol start="2"><li>Cache查找缓存的内容，使用一个key -- 默认是方法的参数，</li></ol><p>key是按照某种策略生成的，默认是使用keyGennerator生成 -- 默认使用的是SimpleKeyGennerator</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 生成策略</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static Object generateKey(Object... params) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (params.length == 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return SimpleKey.EMPTY;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (params.length == 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Object param = params[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (param != null &amp;&amp; !param.getClass().isArray()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return param;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new SimpleKey(params);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Nullable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected Object generateKey(@Nullable Object result) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (StringUtils.hasText(this.metadata.operation.getKey())) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EvaluationContext evaluationContext = createEvaluationContext(result);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return evaluator.key(this.metadata.operation.getKey(), this.metadata.methodKey, evaluationContext);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.metadata.keyGenerator.generate(this.target, this.metadata.method, this.args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="70" src="data:image/png;base64,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" width="330" height="82" class="img_ev3q"></p><p>查询缓存的方法：（AbstractValueAdaptingCache.class）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Nullable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ValueWrapper get(Object key) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Object value = lookup(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return toValueWrapper(value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>没有查到缓存就调用目标方法</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected Object lookup(Object key) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.store.get(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="71" src="/Computer-Science-Learn-Notes/assets/images/71-7fc9e0f01dc00433550e6d78cfa168a1.png" width="660" height="300" class="img_ev3q"></p><ol start="4"><li>将目标方法返回的结果，放进缓存中</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void put(Object key, @Nullable Object value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.store.put(key, toStoreValue(value));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="72" src="/Computer-Science-Learn-Notes/assets/images/72-81aa7198c403b6e6ff86f514c644abef.png" width="875" height="306" class="img_ev3q"></p><p>第二次再访问时：lookup和getCache都会被访问到</p><p>lookup找到缓存后会转到 ValueWrapper get(Object key) 得到值；</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="小结-3">小结：<a href="#小结-3" class="hash-link" aria-label="小结：的直接链接" title="小结：的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="核心">核心：<a href="#核心" class="hash-link" aria-label="核心：的直接链接" title="核心：的直接链接">​</a></h4><ol><li><p>使用CacheManager（ConcurrentMapCacheManager）按照名字得到Cache组件（ConcurrentMapCache）</p></li><li><p>key使用的是keyGennerator生成，默认是SimpleKeyGennerator</p></li></ol><ol><li><p>@Cacheable标注的方法执行前先检查缓存中有没有这个数据，默认按照参数的值作为key去查询缓存，如果没有就运行方法并将结果放入缓存。 以后再来调用就直接使用缓存中的数据</p></li><li><p>SimpleKeyGennerator生成策略：</p></li></ol><ul><li>如果没有参数，key就使用key = new SimpleKey()</li><li>如果有一个参数key=参数的值</li><li>如果有多个参数key = new SimpleKey(params)</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SimpleKeyGenerator implements KeyGenerator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object generate(Object target, Method method, Object... params) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return generateKey(params);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="73" src="/Computer-Science-Learn-Notes/assets/images/73-b78657af2f1f17226e29da5fc64ca67b.png" width="676" height="506" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="思路整理">思路整理<a href="#思路整理" class="hash-link" aria-label="思路整理的直接链接" title="思路整理的直接链接">​</a></h4><p>ConcurrentMapCacheManager通过getCache获取到name（key）</p><ol><li>第一次访问，没有缓存的情况</li></ol><p>createConcurrentMapCache -&gt; lookup根据key(key有生成策略)查找缓存的数据 -&gt; 调用目标方法 -&gt; 把数据放在缓存（store）里(this.store.put(key, toStoreValue(value)))</p><ol start="2"><li>第二次访问</li></ol><p><img loading="lazy" alt="74" src="/Computer-Science-Learn-Notes/assets/images/74-875b390275a8d8fb18cf19913befeaa0.png" width="883" height="366" class="img_ev3q"></p><p>Cache cache = this.cacheMap.get(name);调回缓存的数据-&gt; 返回方法</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cacheput的使用">@CachePut的使用<a href="#cacheput的使用" class="hash-link" aria-label="@CachePut的使用的直接链接" title="@CachePut的使用的直接链接">​</a></h2><p><strong>@CachePut</strong>的key属性有两种写法：</p><ul><li>key = &quot;#employee.id&quot;</li><li>key = &quot;#result.id&quot;</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @CachePut 既调用方法，又更新缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 修改了数据库的某个数据，同时更新缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 运行时机：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  1. 先调用目标方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  2. 将目标方法的结果缓存起来</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @CachePut(cacheNames = &quot;emp&quot;, key = &quot;#result.id&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Employee updateEmp(Employee employee) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(employee);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        employeeMapper.updateEmp(employee);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return employee;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>为了实现同步缓存，这里的cacheNames可以和查询方法的一样，这样就可以实现更新的同时更换缓存的内容，从而达到查询也同步缓存。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Cacheable(cacheNames = {&quot;emp&quot;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Employee getEmp(Integer id) {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="75" src="/Computer-Science-Learn-Notes/assets/images/75-9356f57ba6d5ac5fc0c5a2e465791cde.png" width="858" height="304" class="img_ev3q"></p><p><img loading="lazy" alt="76" src="/Computer-Science-Learn-Notes/assets/images/76-2ba0d68fb5a43d84fc6344be3631473b.png" width="993" height="112" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cacheevict-清除缓存">@CacheEvict 清除缓存<a href="#cacheevict-清除缓存" class="hash-link" aria-label="@CacheEvict 清除缓存的直接链接" title="@CacheEvict 清除缓存的直接链接">​</a></h2><p>@CacheEvict要清除name为emp缓存中key为id的所有数据 </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @CacheEvict 缓存清除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * key 指定要清除的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * allEntries 要清除这个缓存中的所有数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * beforeInvocation = false 缓存的清除是否在方法之前执行，默认时在方法执行之后执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      如果出现异常就不会清除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@CacheEvict(value = &quot;emp&quot;,key = &quot;#id&quot;, allEntries = false, beforeInvocation = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void deleteEmp(Integer id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;deleteEmp:&quot; + id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //        employeeMapper.deleteEmpById(id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="caching和cacheconfig">@Caching和@CacheConfig<a href="#caching和cacheconfig" class="hash-link" aria-label="@Caching和@CacheConfig的直接链接" title="@Caching和@CacheConfig的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="caching">@Caching<a href="#caching" class="hash-link" aria-label="@Caching的直接链接" title="@Caching的直接链接">​</a></h3><p>​    <strong>@Caching</strong> 这个caching因为使用了<strong>@CachePut</strong>所以第二次还是会执行，但是如果执行了通过id和email查询就在执行了这个方法后就直接执行，因为这个方法已经缓存了这个内容</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @Caching 定义复杂的缓存规则</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param lastName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Caching(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cacheable = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Cacheable(value = &quot;emp&quot;, key = &quot;#lastName&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    put = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @CachePut(value = &quot;emp&quot;, key = &quot;#result.id&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @CachePut(value = &quot;emp&quot;, key = &quot;#result.email&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Employee getEmpByLastName(String lastName) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return employeeMapper.getEmpByLastName(lastName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cacheconfig">@CacheConfig<a href="#cacheconfig" class="hash-link" aria-label="@CacheConfig的直接链接" title="@CacheConfig的直接链接">​</a></h3><p>使用了这个直接之后，之后的所有注解（@Cacheable、@CachePut）就不用写已经在@CacheConfig中写了的属性</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@CacheConfig(cacheNames = &quot;emp&quot;) //抽取缓存的公共配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class EmployeeService {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="整合缓存中间件redis">整合缓存中间件Redis<a href="#整合缓存中间件redis" class="hash-link" aria-label="整合缓存中间件Redis的直接链接" title="整合缓存中间件Redis的直接链接">​</a></h2><p>导包：</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-data-redis</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>配置Redis：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在要是有Redis的地方注入redis：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StringRedisTemplate stringRedisTemplate; // 操作字符串</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RedisTemplate redisTemplate; // k-v操作对象</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>直接使用Redis类型：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void test01() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ValueOperations&lt;String, String&gt; ops = stringRedisTemplate.opsForValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String msg = ops.get(&quot;msg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>自定义Redis类型（JSON类型）：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyRedisConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RedisTemplate&lt;Object, Employee&gt; empRedisTemplate(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RedisConnectionFactory redisConnectionFactory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throws UnknownHostException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RedisTemplate&lt;Object, Employee&gt; template = new RedisTemplate&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template.setConnectionFactory(redisConnectionFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Jackson2JsonRedisSerializer&lt;Employee&gt; redisSerializer = new Jackson2JsonRedisSerializer&lt;Employee&gt;(Employee.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template.setDefaultSerializer(redisSerializer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return template;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后就可以注入这个自定义的类：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RedisTemplate&lt;Object, Employee&gt; employeeRedisTemplate;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void test02() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Employee emp = employeeMapper.getEmpById(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ValueOperations&lt;Object, Employee&gt; ops = employeeRedisTemplate.opsForValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ops.set(&quot;emp&quot;, emp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="77" src="/Computer-Science-Learn-Notes/assets/images/77-7c6fe4fdeb7eea7022e504a5a9f491e2.png" width="1084" height="338" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="自定义rediscachemanager">自定义RedisCacheManager<a href="#自定义rediscachemanager" class="hash-link" aria-label="自定义RedisCacheManager的直接链接" title="自定义RedisCacheManager的直接链接">​</a></h2><p>在配置类中直接添加即可：实现序列化转为JSON格式</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 缓存管理器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public CacheManager cacheManager(RedisConnectionFactory redisConnectionFactory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //初始化一个RedisCacheWriter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RedisCacheWriter redisCacheWriter = RedisCacheWriter.nonLockingRedisCacheWriter(redisConnectionFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //设置CacheManager的值序列化方式为json序列化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RedisSerializer&lt;Object&gt; jsonSerializer = new GenericJackson2JsonRedisSerializer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RedisSerializationContext.SerializationPair&lt;Object&gt; pair = RedisSerializationContext.SerializationPair</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .fromSerializer(jsonSerializer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RedisCacheConfiguration defaultCacheConfig= RedisCacheConfiguration.defaultCacheConfig()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .serializeValuesWith(pair);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //设置默认超过期时间是30秒</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    defaultCacheConfig.entryTtl(Duration.ofSeconds(30));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //初始化RedisCacheManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new RedisCacheManager(redisCacheWriter, defaultCacheConfig);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="78" src="/Computer-Science-Learn-Notes/assets/images/78-77eb4372ce80e203656f85d70f49a33c.png" width="644" height="399" class="img_ev3q"></p><p>有两种调用方式：</p><p>第一种就是常用的注解：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Cacheable(cacheNames = &quot;dept&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Department getDeptById(Integer id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;查询部门&quot; + id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Department department = departmentMapper.getDeptById(id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return department;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>第二种是注入CacheManager后得到缓存，进行API调用：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CacheManager cacheManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Department getDeptById(Integer id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;查询部门&quot; + id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Department department = departmentMapper.getDeptById(id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Cache dept = cacheManager.getCache(&quot;dept&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dept.put(&quot;1&quot;, department);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return department;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="79" src="/Computer-Science-Learn-Notes/assets/images/79-b6bd52d6d29b8cff1c5f2672f8fcdedc.png" width="662" height="261" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="扩展cachemanager的用法">扩展CacheManager的用法<a href="#扩展cachemanager的用法" class="hash-link" aria-label="扩展CacheManager的用法的直接链接" title="扩展CacheManager的用法的直接链接">​</a></h4><p>判断在Redis中是否存在这个nosql，如果有就直接使用缓存，不查数据库，如果没有就查数据库缓存数据：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public Department getDeptById(Integer id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Department dp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Cache dept = cacheManager.getCache(&quot;dept&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dp = dept.get(&quot;1&quot;, Department.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (dp == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dp = departmentMapper.getDeptById(id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dept.put(&quot;1&quot;, dp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return dp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="springsecurity的简单使用">SpringSecurity的简单使用<a href="#springsecurity的简单使用" class="hash-link" aria-label="SpringSecurity的简单使用的直接链接" title="SpringSecurity的简单使用的直接链接">​</a></h2><p>导包：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>建立一个配置类：</p><p>@EnableWebSecurity 开启安全配置，它里面有@Configuration</p><p>继承： WebSecurityConfigurerAdapter</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@EnableWebSecurity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MySecurityConfig extends WebSecurityConfigurerAdapter {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>定义授权规则和定义认证规则</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 定义授权规则</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected void configure(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //        super.configure(http);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 定制授权规则</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http.authorizeRequests().antMatchers(&quot;/&quot;).permitAll()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .antMatchers(&quot;/level1/**&quot;).hasRole(&quot;VIP1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;VIP2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .antMatchers(&quot;/level3/**&quot;).hasRole(&quot;VIP3&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 开启自动配置的登录功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // /login来到登录页</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 重定向到/login/error登录失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 如果没有登录权限就会来到登录页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http.formLogin();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 开启自动配置的注销功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 访问/login注销用户，清空session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 注销成功会返回/login?logout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http.logout().logoutSuccessUrl(&quot;/&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 定义认证规则</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected void configure(AuthenticationManagerBuilder auth) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //super.configure(auth);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auth.inMemoryAuthentication().passwordEncoder(NoOpPasswordEncoder.getInstance())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withUser(&quot;admin&quot;).password(&quot;123&quot;).roles(&quot;VIP1&quot;,&quot;VIP2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .and()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withUser(&quot;lisi&quot;).password(&quot;123&quot;).roles(&quot;VIP2&quot;, &quot;VIP3&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .and()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withUser(&quot;zhiyu&quot;).password(&quot;123&quot;).roles(&quot;VIP1&quot;, &quot;VIP3&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="thymeleaf整合springsecurity">Thymeleaf整合SpringSecurity<a href="#thymeleaf整合springsecurity" class="hash-link" aria-label="Thymeleaf整合SpringSecurity的直接链接" title="Thymeleaf整合SpringSecurity的直接链接">​</a></h3><p>导包：</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.thymeleaf.extras</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">thymeleaf-extras-springsecurity5</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在前端加入额外的xmlns：</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">th</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.thymeleaf.org</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">sec</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.thymeleaf.org/extras/spring-security</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>判定是否授权了：<strong>sec:authorize=&quot;!isAuthenticated()&quot;</strong></p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">sec:</span><span class="token tag attr-name" style="color:#00a4db">authorize</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">!isAuthenticated()</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">align</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">center</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">游客您好，如果想查看武林秘籍 </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">th:</span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">@{/login}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">请登录</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>获取授权名：<strong>sec:authentication=&quot;name&quot;</strong></li><li>获取授权的权限名：<strong>sec:authentication=&quot;principal.authorities&quot;</strong></li><li>注销登录：<strong>th:action=&quot;@{/logout}&quot;</strong></li><li>判断是否存在这个权限：<strong>sec:authorize=&quot;hasRole(&#x27;权限名字&#x27;)&quot;</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="记住我"><strong>记住我</strong><a href="#记住我" class="hash-link" aria-label="记住我的直接链接" title="记住我的直接链接">​</a></h3><p>直接在授权规则的configure配置即可</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 开启记住我功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 登录成功将cookie发给浏览器保存，以后登录就会带上这个cookie(14天)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http.rememberMe();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="定制自己的登录页面">定制自己的登录页面<a href="#定制自己的登录页面" class="hash-link" aria-label="定制自己的登录页面的直接链接" title="定制自己的登录页面的直接链接">​</a></h3><p>直接在授权规则的configure配置，</p><p>前端使用post方式：处理凭据，如果有效，则对用户进行身份验证</p><p>使用get：处理登录表格</p><p>如果action定位到userlogin/error，方法get：重定向到此处以进行失败的身份验证尝试</p><p>如果action定位到userlogin/logout，方法get：成功注销后重定向到此处</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http.formLogin().usernameParameter(&quot;user&quot;).passwordParameter(&quot;pwd&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .loginPage(&quot;/userlogin&quot;); // 默认post请求的/login是处理登录</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">align</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">center</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">th:</span><span class="token tag attr-name" style="color:#00a4db">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">@{/userlogin}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">th:</span><span class="token tag attr-name" style="color:#00a4db">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">post</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            用户名:</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            密码:</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">pwd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">checkbox</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> 记住我 </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">submit</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">登陆</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="shiro的简单使用">Shiro的简单使用<a href="#shiro的简单使用" class="hash-link" aria-label="Shiro的简单使用的直接链接" title="Shiro的简单使用的直接链接">​</a></h2><p>Shiro的功能框架图：</p><p><img loading="lazy" alt="80" src="/Computer-Science-Learn-Notes/assets/images/80-76f4dbbaf641ec94449df6be8bdc285e.png" width="1168" height="600" class="img_ev3q"></p><p>导包：</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shiro</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shiro-spring</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.4.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>测试环境设置（省略跳转网页的controller）：</p><p><img loading="lazy" alt="81" src="/Computer-Science-Learn-Notes/assets/images/81-466fa56f1fb0910402d6a9cf460e24e0.png" width="465" height="227" class="img_ev3q"></p><p>注：使用Thymeleaf模板的时候需要用到跳转页面@{}注意，如：th:href=&quot;@{/alogin}&quot;，里面内容需要是controller的内容</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="开始配置一个shiro">开始配置一个shiro<a href="#开始配置一个shiro" class="hash-link" aria-label="开始配置一个shiro的直接链接" title="开始配置一个shiro的直接链接">​</a></h3><p>Shiro 架构包含三个主要的理念：Subject 认证主体，SecurityManager 安全管理器和 Realm 域对象</p><ul><li>ShiroFilterFactoryBean ShiroFilter是整个Shiro的入口点，用于拦截需要安全控制的请求进行处理</li><li>DefaultWebSecurityManager 安全管理器</li><li>Realm 域对象</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ShiroConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ShiroFilterFactoryBean shiroFilterFactoryBean(@Qualifier(&quot;securityManager&quot;) DefaultWebSecurityManager securityManager) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ShiroFilterFactoryBean bean = new ShiroFilterFactoryBean();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setSecurityManager(securityManager);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 设置无权限时跳转的 url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shiroFilterFactoryBean.setUnauthorizedUrl(&quot;/notRole&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * anon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 无参，开放权限，可以理解为匿名用户或游客</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * authc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 无参，需要认证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * logout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 无参，注销，执行后会直接跳转到shiroFilterFactoryBean.setLoginUrl(); 设置的 url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * authcBasic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 无参，表示 httpBasic 认证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 无参，表示必须存在用户，当登入操作时不做检查</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * ssl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 无参，表示安全的URL请求，协议为 https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * perms[user]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 参数可写多个，表示需要某个或某些权限才能通过，多个参数时写 perms[&quot;user, admin&quot;]，当有多个参数时必须每个参数都通过才算通过</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * roles[admin]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 参数可写多个，表示是某个或某些角色才能通过，多个参数时写 roles[&quot;admin，user&quot;]，当有多个参数时必须每个参数都通过才算通过</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * rest[user]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 根据请求的方法，相当于 perms[user:method]，其中 method 为 post，get，delete 等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * port[8081]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 当请求的URL端口不是8081时，跳转到schemal://serverName:8081?queryString 其中 schmal 是协议 http 或 https 等等，serverName 是你访问的 Host，8081 是 Port 端口，queryString 是你访问的 URL 里的 ? 后面的参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 设置拦截器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, String&gt; filterMap = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filterMap.put(&quot;/&quot;, &quot;anon&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filterMap.put(&quot;/alogin&quot;, &quot;perms[user:add]&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filterMap.put(&quot;/ulogin&quot;, &quot;authc&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setFilterChainDefinitionMap(filterMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setLoginUrl(&quot;/login&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DefaultWebSecurityManager securityManager(@Qualifier(&quot;userRealm&quot;) UserRealm userRealm) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        securityManager.setRealm(userRealm);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return securityManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UserRealm userRealm() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new UserRealm();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>域对象</strong>的创建</p><ul><li>继承AuthorizingRealm</li><li>主要分为：授权和认证</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class UserRealm extends AuthorizingRealm {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 授权</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;执行了授权...........&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SimpleAuthorizationInfo info = new SimpleAuthorizationInfo();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 只要登录就有权限</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        info.addStringPermission(&quot;user:add&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String username =  (String) principals.getPrimaryPrincipal();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(username);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String role = userMapper.getRole(username);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(role);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Set&lt;String&gt; set = new HashSet&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //需要将 role 封装到 Set 作为 info.setRoles() 的参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        set.add(role);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //设置该用户拥有的角色</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //将用户对应的角色和权限信息 放到权限器中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        info.addStringPermissions(set);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        info.setRoles(set);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return info;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 认证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       System.out.println(&quot;执行了认证............&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        一般在数据库中取账号和密码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UsernamePasswordToken userToken = (UsernamePasswordToken) token;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String username = userToken.getUsername();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User user = userMapper.getUserByName(username);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (user == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // SimpleAuthenticationInfo参数：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // principle 认证实体，可以是username，也可以是实体类</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // credentials 密码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // realmName 当前realm对象的name，直接调用父类的getName方法即可</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new SimpleAuthenticationInfo(username, user.getPassword(), getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用控制层的请求把数据传输给Shiro和注销</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/loginAuth&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public String loginAuth(@PathParam(&quot;username&quot;) String username,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        @PathParam(&quot;password&quot;) String password,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Model model) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 获取当前用户</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 封装用户的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UsernamePasswordToken token = new UsernamePasswordToken(username, password);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 执行登录的方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subject.login(token);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (UnknownAccountException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model.addAttribute(&quot;msg&quot;, &quot;用户名错误&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;login&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (IncorrectCredentialsException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model.addAttribute(&quot;msg&quot;, &quot;密码错误&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;login&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(value = &quot;/logout&quot;, method = RequestMethod.GET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ResultMap logout() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //注销</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subject.logout();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return resultMap.success().message(&quot;成功注销！&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="整合shiro启动器">整合Shiro启动器<a href="#整合shiro启动器" class="hash-link" aria-label="整合Shiro启动器的直接链接" title="整合Shiro启动器的直接链接">​</a></h3><p>导包：</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shiro</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shiro-spring-boot-web-starter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.4.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>项目结构：和security测试的时候一致</p><p><img loading="lazy" alt="82" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAADcCAYAAABgfg1NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABL1SURBVHhe7Z1LjxXHFcexATuAeRgb/OINw5vBYHuAGQbw4Ae2olgGPyQvIiI/AoEsCJZiyfYMlqxEjmSQwqyywVLEYAnxBYYsIkXKJvkC2WQVKZt8h0pVd1f36erTfaun79x7uuu/+Gludz1uDdSPqtu3zmHJydOvKgCADAYm5O9v/ynHzHe31EcXP2HrAhAqPYX8/uZN9eDBg1JMOdfOxRXScvHSVbY+ACHSU8h33r2g7t+/z8po7ptyrp0LJ6MPXF8AdBWvLev0jW9YIc19rj4HJ5sPXF8AdBUvId946211796PORnNtbnP1efgZPPB7Wf81Idqem5e3b5yVd2en1fzczfUhVNn9P34+uHDhxF3Zz5M21yYmUvvz8/Pqsu6ftxXvk2u7P0b6m7Jdd0xLGRsIEy8H+pcu/55TkhzzdUrg5PNB7cfK0NRrDk1/b69tsJoSRyxsn5iSagc41dm0359hOTkpv1l9+uNDYSLt5Cnp15Td+7ciWQ0P801V68MTjYK14aDTuj0nhbJrjIUI4cVZZ5IYdvYlS29VyELJ6Q7Brc/e7/u2EC4eAtp+PjTzyIhzU+uvApOQoqp868/n2Wh/dSRgWLb2clfLmRS3kch646NqwPCoJaQk2em1JdffR395Mqr4CSkcG04WBmSlYbeuzybyKNFmk7u07bcFpPKEwuYCWI+66XbWY8xmOtpsgrWGZutB8KjlpBN4CSkmDrc6mig/ZRN3Fig7MFJXgDy4GY2+97TypKWkRXRQB+43NUSVa2QUX9kDLnPlwsYGwgTUUICEDoDE9IHbnU0cHUB6CKihAQgdLBCAiAIrJAACAJCAiAICAmAICAkAIKAkAAIAkICIIjWCeme8Blmbp5+nj91z86CMBmYkF3MzQMhQb8ZmJBdzM3TRMh+ygy6w0C3rF3LzQMhQb8ZqJCycvOY0Cu9RbyShUYZOUxMpA2HiqP6Y3G4uMnzkx8kUuXDuKhkXOhVIezL9PWeqZeFbPXKteM7/rR+SQhY9g8D/zv0Ko/r5Mvs+7ptewVqgyE81JGTmyc/SexEtjGJ8QRO4h9J4LIpMzGMsVjxhMvFPpq6tp0pn83aFcqiyZqU0fcjr00ZR63xe4yj8neoLDfjyD770t+LawuqGbiQi52bpwy3n+JEKr8uvs5P1vxqUbzHrXZuvbxA5j3MRM7G41I1Xu7a4DOOuG12r2d58g+BC91d0LagmoELaVjM3DxluP3UndBmMptJZn6mq1CvyRpJlm13C6sWacutirYOJ2ad8dcZR9yW/A69ys1qWbIV5dqCaoYi5GLm5inD7afOhI6uzSSem1W3kyRYcZ14wtHUG5GwdrI7kzVX5kzWnCT6NZsHKKqTSFZj/D7jKP0depab98lLl+YMcn5H0JuhCNkETjYf3H7qTGjbxnx2pBM7nXB6Atqtmp2otDzdxpG8PKbcTOyoje7TfajD5dpZsJAV4/D9HcrKs3EVH/ikbSGkN8EKuRCMJHbb1xV6SQOpBkvrhBwWdEvJlbcVCCkLCOmB3T52cVJCSFlASAAEASEBEASEBEAQEBIAQUBIAAQBIQEQRNBCnpk8nb7+eteI+vmRo+rc+MlcHQAGSdBCXjo0qr7dvkO9N3Zcfb9tu7r79NPqh2efzepoYSeJtEAO8dHA7h3UCFrIsydPqd/u3adef3lMndJ/sdMju9U/Vq5Urx8fV3tfGVNHj76kxsaOqVMnxtXkKV5M7sxrdN+c7CmJglgo9kv6srCseCz587ZdBUJ2mG07dqqRg4fUa1q+h6vXqL+sWKF+WLNG3dIr5rfPP6+ubdumPt+xQ70xMVloOwwh787FoWBuOT2sDiHbSbBCTui/yIOjL6qjx46rzZs2q43r16tNevv6phbw70uXqv8tWaL+o/nvsmXqb198oX715pvq6oGDhX6GIeTtmeK52rhMj2OmPD6xS0DIDvL0hg3qCb1F3fLcc+qgXgHHR0fV4cOH1Utbtqgb69apvz72mPr38uXqnx98oG6ePav+8NRT6sjLr+T68BXSrl7RCkYmUtyehEbZIOL0DGlcHoVopTl8zhQiT9KYRyf2MT4UXxUalX9/3/K4jv/Y6T8QNJ7SXEdhbbNXk/70n6VHniAI2UGMXD95/HG14ckn1d7t29VJLeP5M2fUuZMn1WYt6BHNe1u3quvPPKN+p7etP923X53QnztpHz5CxlIUJ4/bNpvIWZwiG5uYTFJbVrhv39fcF5pLx/6Dkh+v6VO3s9e6zEiYjwel71/ef1sJ/jPkocNH1Lo1a9WOF15QL+3bp86dOKHen5pS+7SAuzV79+xR+w8cUKNa1omJ4lciXkLaiebUsxPOJZqoZIKn9ZlJX5jU5LVtx63Ovv2Xltccuwv3Z+L+WVZdx68hZKcwq91W/blx1YoVaqNeJffrVXJCizc6MqK26W3sbr11PaBXyRf19dj+/WqC+QqkbPJxYti6dhJyddy6ZUJE10n7abJ9pX3a7WpallthqvvvWV5z7C4QkidIIcdOTKiRPXvVqieeUI888ohavmyZWqm3rk+uXh2J+cz69WqL3qbu3LRJ7dWr5KGdO9XYkaNsXwb3M5GdbFQENkdOUo9O3Kp8NO49276wrbRCOtLQcdq+BpVLJ/7HIJPLblmjPu14oz4hJFvQZfboz4JLlixJMVI+vnx5tFKu05Kaz5TPb9igtupVctfmzeqAXiHHnc+OLjaImW7dysrpJLermC3LZOstpCGa0LQ/KmRS3/Y9zFw6VMjoIY4zRvM7QMiAt6z7D46qlStXpVIuXbpUrXjsMbV65Uq1fs2aaJXctHGj2rVlqzp2fJzto81w0tQpB4tD0J8hj09Mqh27RtSatWvVo48+qpYZKfXWde2qVdH3kiN6q3qso2dbIaRMghbS8vKx42r33n1qy9ZtaoteEXdpSUcPv6jGJ6u3qW0GQsoEQgIgCAgJgCAgJACCgJAACAJCAiAICAmAICAkAIJonZDu/2o1890t9dHFT9i6g8Y9rwlAXVovpOXipew857CAkKApnRGyF1xfHHVOqOA0C+g3ENIBQoJhErSQJnSJhhZdmryiTIxfes+GCDFhRnH4T76u+9+Su3XckCwAXIIVMpasGE/nrnrRdY+8NGld0qeVERKCOoQrZCJMIc9NyTbUXU17ClmR4gKAMoL/DGmlSvPcsJL55aWBkKApQW9Z+Tw3jmQeeWlYIZMVOC3T19PYvoIeBL1CluW5sdvT6EFNkpzY1qN5aQp13Yc6yeoalZP7AJQR/JYVAEm0TkgAugyEBEAQEBIAQUBIAAQBIQEQBIQEQBAQEgBBQEgABAEhARBE64R0T+BIyqnjQ3zGFcfoAM/AhPz+5k314MGDUkw5187FFdIiIaeODxASVDEwId9594K6f/8+K6O5b8q5di6cjD64/biRGoPCV8hhjQ8Ml4FuWadvfMMKae5z9Tk42Xxw+4GQQCIDFfKNt95W9+79mJPRXJv7XH0OTjYfaB+xFPl8OFHuHOd+GpQc3Z9T01eycCojiomVLNa1IuX7smK5QtIQLVuv7vgMXEYDWwbaw8Af6ly7/nlOSHPN1SuDk80Htx93BUqlS9J50HIrQipGIqKNocwHJsftqBRRkHNangkZ1fXN11M1PvL+pgy0l4ELeXrqNXXnzp1IRvPTXHP1yuBk88HtpzDhyWpHMatQUYbya7df972okLbcK19Pz/EV8wOB9jFwIQ0ff/pZJKT5yZVXwcnmg9sPN+HtClisuzhC2u1qut1lVlqf8VlsG4jZXoYi5OSZKfXlV19HP7nyKjjZfHD7KUz4ZJWhIl2etXLUF9JNCcJuWR3J8vVqjE+LzOUHsvVAexiKkE3gZPOB64vmw4k+GyYrlt0O5mWoJ+RtLYvtx0qW1c1LZ+tV5eupGp+hLD8QaBdBC7kYYIUCTWidkNKBkKAJELLPQEjQBAgJgCAgJACCgJAACAJCAiAICAmAICAkAIKAkAAIIlgh3ZM8bcvNA7pJ64REbh7QZVonpLTcPAD0k1ZuWSXl5gGgn7RSSCm5eQzZ2dU4XpELjaoKm7JxjlHYlAnhmsnHSNJyA/LodJvWPtSRlpsnF/NoAo9pzGNp3pxYNito2peNfyRxlrTc1KfZBUwZ6AatFVJqbp6ye9xqxqXloPfMa9uGgjw63aW1Qhok5uZx79ntKps3x0NIt9zFvhfE7AatFlJSbp7SHDqOVLkyry1rXnbk0ek2rRayCZxsPrj9pDKU5tCJy9PtppM3hz7wYR/qkHJDXs7sPvLodAMIWRO3n36vTj7bVNBdghWyXzQRMm5LV9N4i0q/2gBhASEb0nSFdLekkDFsICQAgoCQAAgCQgIgCAgJgCAgJACCgJAACAJCAiAICNkQ9yTPQnPzxIcCskMC/WQx+wb9JVghb966pX727nm2rA6ukJa6uXkGLSROBckkWCFN2JbJwTNz4xv1+jn/TAMunIw+uP0MSkh7ssgcgL89CyGlEbSQFpP+49pvrtcOcjZwsvng9jPoFdJgokUgpCwgJMFkHvj401+y9cvgZPPB7ceVJr7On3G1qxuVKIqvdOIn3XOxELI9QEgGE/TMteHgZPPB7YdKE78uyaVDMwrQ+1VtIGRrgJAEKSukkc6ucpR4lczEc9OBVLeBkG0AQmqkfYbsFaRsRTLbVStUVRsI2R6CFlLqU9b4dT7G0ubSieqalXFuVt2eo1vU8jYQsj0EK+Rifw/ZC7cfV5qqXDrpVxdOHp2yNhCyPQQrZL/gZPOB6wsACAmAICAkAIKAkAAIAkICIAgICYAgICQAgoCQAAgCQgIgCAgJgCAgZEPcEzjIqQOaEKyQIefUoaFa+J+XZRGskJKjPdyyptC+o9ckTCsK28LqKYaghZQaD+mWNaWq77gMq6QUICQhtJw6URlWSFFASIZQcurY+EkaawmGC4QkhJRTJ1pZsVUVB4TUhJZTx7R3sw0AGQQtZIg5deiqausBOQQrZKg5dcq2tvgcKYNghewXnGw+cH0BACEBEASEBEAQEBIAQUBIAAQBIQEQBIQEQBAQEgBBQEgABAEhARAEhGyIewIHOXVAE4IVMuicOtF1fOYVwcmyCFZIydEebllTaN/xwfTsfRCKJYughZQaD+mWNaWq716xl2CwQEhCiDl18N+aywJCMnQ9pw6Nm0QcpCwgJCGknDqW6DMktqxigJCa0HLqFMuQ7EoKQQsZbE4d8lSVfga198DwCFbIUHPqmGsjoa2D7yFlEayQ/YKTzQeuLwAgJACCgJAACAJCAiAICAmAICAkAIKAkAAIAkICIAgICYAgIOQi8IvLv45+4kAAqAuE7DNGRiueK6O9z+Eeb2tCfISu3oHx+P37f8i8n79XCEDIPmJltOJREel9DggJDBCyT1AZrXj0mt7nGPbErRKSBju7Zb2AkPWAkIsIhISQdYGQfYKTj4Nra3AnbnydhVK5YVK0fN6INENSe0Rb1rh+Kpout31xOXS4eia8qzAO/R7nJ6/Eda9k4V5GVpq1IA2cjtpDSF8gZJ/g5OPg2hroxLUSUHGijABOeRbvmMRHlgqZxU6Wfb6squeukGld+36JiPm29P0hpC8QUgh04nLpOKgUbDm5x66QiYBxP2VC8vV4IWnd8uv4NYT0BUI25MM/Ti0Y2g+duOVCJpMcQnYWCNkQK9fRqf3s6ypoP3Tixq+ZLasVLin337KWiJbbllbUg5ADA0I2xMrVTyGz64qHOpFMNR7qcKJ5CmmubR4e8x7pQ520rts2u45fQ0hfIGRDrFxGQgoVrwyuv4XCbWNB+4CQDbFyUQkXW8h49SquptzXGaBdQMiGWLkGKaSBblkNkLEbQMiGcKL5wvUHwgZCAiAICAmAICAkAIKAkAAIAkICIAgISUAuHDBsIGTCQnPhNEXq0TL3OFy/wFG6aiCkpkkunKZASEAJXsimuXCa0kYh3eiPOkDIarBCMkBICDksgheSk4+Da2u4PJsd6o4nG4kbZGIY3bOn7gStrseHY8VlWh6PHDdV70FJ+0SOnYECIRn5OLi2BhMnmOaS0RPw7txcOvmsrOnkTlYbusLQCWonuysIdz+S3WmXyp+IUJ7jhh+L7Tu+n/SJHDsDBVvWhtDJdnnWTFg94aKJaSZtMoHJSkHJZE0mq5EsmdS592DuF6WmkpVfV43F9s33QX4fVkjP949eQ8gyghWSi77whfaTTVQ90aiIZvtGVgxOtLh9NkHrC0knOS+Ae101FkqxDwg5CIIXsh9xjGbbaraqdotmr+2qE0/C/Lbw8mwiIZmgbj1zPZ2uosyW1QofldcRomQsuW2p2weEHAQQsg9CxhOZTFAysd06douYn8zZBKX1ig9uyMOUQpmfEO575MZCxl3sIxPSXCPHzuIAIbWEFCpeGVx/APQDCEkkhJBg2EBICAkEEbyQC4HrD4B+EKyQAEgEQgIgCAgJgCAgJACCgJAAiOFV9X/LchzSUH4sHgAAAABJRU5ErkJggg==" width="228" height="220" class="img_ev3q"></p><p>同样的配置类：（加入了MD5盐值加密算法）</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ShiroConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 设置用于匹配密码的CredentialsMatcher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public HashedCredentialsMatcher credentialsMatcher() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HashedCredentialsMatcher credentialsMatcher = new HashedCredentialsMatcher();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //这里是使用sha256加密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*credentialsMatcher.setHashAlgorithmName(Sha256Hash.ALGORITHM_NAME);  // 散列算法，这里使用更安全的sha256算法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        credentialsMatcher.setStoredCredentialsHexEncoded(false);  // 数据库存储的密码字段使用HEX还是BASE64方式加密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        credentialsMatcher.setHashIterations(1024);  // 散列迭代次数*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果MD5密码加密,可以打开下面配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //加密算法的名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        credentialsMatcher.setHashAlgorithmName(&quot;MD5&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //配置加密的次数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        credentialsMatcher.setHashIterations(1024);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //是否存储为16进制</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        credentialsMatcher.setStoredCredentialsHexEncoded(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return credentialsMatcher;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 配置url过滤器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ShiroFilterChainDefinition shiroFilterChainDefinition() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultShiroFilterChainDefinition filter = new DefaultShiroFilterChainDefinition();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filter.addPathDefinition(&quot;/level1/**&quot;, &quot;perms[st:vip1]&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filter.addPathDefinition(&quot;/level2/**&quot;, &quot;perms[st:vip2]&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filter.addPathDefinition(&quot;/level3/**&quot;, &quot;perms[st:vip3]&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filter.addPathDefinition(&quot;/login&quot;, &quot;anon&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filter.addPathDefinition(&quot;/&quot;, &quot;anon&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return filter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DefaultWebSecurityManager securityManager() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultWebSecurityManager manager = new DefaultWebSecurityManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        manager.setRealm(userRealm());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return manager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 配置自定义Realm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UserRealm userRealm() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserRealm userRealm = new UserRealm();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userRealm.setCredentialsMatcher(credentialsMatcher());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return userRealm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>认证和授权：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class UserRealm extends AuthorizingRealm {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UserMapper userMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    授权</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;授权........................&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User user = (User) SecurityUtils.getSubject().getPrincipal();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SimpleAuthorizationInfo authorizationInfo = new SimpleAuthorizationInfo();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 角色</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Set&lt;String&gt; roles = new HashSet&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 权限</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Set&lt;String&gt; permissions = new HashSet&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 测试用权限</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String role = userMapper.getRole(user.getUsername());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        roles.add(user.getUsername());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        permissions.add(role);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        authorizationInfo.setRoles(roles);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        authorizationInfo.setStringPermissions(permissions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return authorizationInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    认证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;认证........................&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String username = (String) token.getPrincipal();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User user = userMapper.getUserByName(username);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(user.getPassword());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (user == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new UnknownAccountException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        MD5盐值加密ByteSource.Util.bytes(username)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SimpleAuthenticationInfo authenticationInfo = new SimpleAuthenticationInfo(user, user.getPassword(), ByteSource.Util.bytes(username), getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return authenticationInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>控制层判断：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(value = &quot;/loginAuth&quot;,method = RequestMethod.POST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public String loginAuth(@PathParam(&quot;username&quot;) String username,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        @PathParam(&quot;password&quot;) String password,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Model model) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 获取当前用户</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 封装用户的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UsernamePasswordToken token = new UsernamePasswordToken(username, password);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 执行登录的方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subject.login(token);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;welcome&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (UnknownAccountException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model.addAttribute(&quot;msg&quot;, &quot;用户名错误&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return PREFIX+&quot;login&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (IncorrectCredentialsException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model.addAttribute(&quot;msg&quot;, &quot;密码错误&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return PREFIX+&quot;login&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="扩展">扩展：<a href="#扩展" class="hash-link" aria-label="扩展：的直接链接" title="扩展：的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="shiro默认过滤器">shiro默认过滤器<a href="#shiro默认过滤器" class="hash-link" aria-label="shiro默认过滤器的直接链接" title="shiro默认过滤器的直接链接">​</a></h4><ul><li>anon	AnonymousFilter	指定url可以匿名访问</li><li>authc	FormAuthenticationFilter	指定url需要form表单登录，默认会从请求中获取username、password,rememberMe等参数并尝试登录，如果登录不了就会跳转到loginUrl配置的路径。我们也可以用这个过滤器做默认的登录逻辑，但是一般都是我们自己在控制器写登录逻辑的，自己写的话出错返回的信息都可以定制嘛。</li><li>authcBasic	BasicHttpAuthenticationFilter	指定url需要basic登录</li><li>logout	LogoutFilter	登出过滤器，配置指定url就可以实现退出功能，非常方便</li><li>noSessionCreation	NoSessionCreationFilter	禁止创建会话</li><li>perms	PermissionsAuthorizationFilter	需要指定权限才能访问</li><li>port	PortFilter	需要指定端口才能访问</li><li>rest	HttpMethodPermissionFilter	将http请求方法转化成相应的动词来构造一个权限字符串，这个感觉意义不大，有兴趣自己看源码的注释</li><li>roles	RolesAuthorizationFilter	需要指定角色才能访问</li><li>ssl	SslFilter	需要https请求才能访问</li><li>user	UserFilter	需要已登录或“记住我”的用户才能访问</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="shiro常用的权限控制注解可以在控制器类上使用">shiro常用的权限控制注解，可以在控制器类上使用<a href="#shiro常用的权限控制注解可以在控制器类上使用" class="hash-link" aria-label="shiro常用的权限控制注解，可以在控制器类上使用的直接链接" title="shiro常用的权限控制注解，可以在控制器类上使用的直接链接">​</a></h4><ul><li>@RequiresGuest	只有游客可以访问</li><li>@RequiresAuthentication	需要登录才能访问</li><li>@RequiresUser	已登录的用户或“记住我”的用户能访问</li><li>@RequiresRoles	已登录的用户需具有指定的角色才能访问</li><li>@RequiresPermissions	已登录的用户需具有指定的权限才能访问</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/edit/master/docs/Java/fm/SpringBoot.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/Computer-Science-Learn-Notes/docs/Java/fm/Mybatis"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Mybatis</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringDataJpa"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">SpringDataJpa</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#环境搭建--简化部署" class="table-of-contents__link toc-highlight">环境搭建 &amp; 简化部署</a><ul><li><a href="#环境搭建" class="table-of-contents__link toc-highlight">环境搭建</a></li><li><a href="#简化部署" class="table-of-contents__link toc-highlight">简化部署</a></li></ul></li><li><a href="#springbootapplication启动原理" class="table-of-contents__link toc-highlight">@SpringBootApplication启动原理</a></li><li><a href="#idea-快速构建" class="table-of-contents__link toc-highlight">IDEA 快速构建</a></li><li><a href="#yaml" class="table-of-contents__link toc-highlight">YAML</a><ul><li><a href="#yaml基本语法" class="table-of-contents__link toc-highlight">YAML基本语法</a></li></ul></li><li><a href="#单元测试" class="table-of-contents__link toc-highlight">单元测试</a><ul><li><a href="#ssm" class="table-of-contents__link toc-highlight">SSM</a></li><li><a href="#springboot" class="table-of-contents__link toc-highlight">SpringBoot</a></li></ul></li><li><a href="#configurationpropertiesvalue" class="table-of-contents__link toc-highlight">@ConfigurationProperties&amp;@Value</a></li><li><a href="#propertysourceimportresource" class="table-of-contents__link toc-highlight">@PropertySource&amp;@ImportResource</a><ul><li><a href="#推荐自己创建个配置类" class="table-of-contents__link toc-highlight">【推荐】自己创建个配置类</a></li><li><a href="#配置文件的占位符" class="table-of-contents__link toc-highlight">配置文件的占位符</a></li><li><a href="#多profile支持" class="table-of-contents__link toc-highlight">多Profile支持</a></li></ul></li><li><a href="#加载配置文件的位置和优先级" class="table-of-contents__link toc-highlight">加载配置文件的位置和优先级</a></li><li><a href="#自动配置原理" class="table-of-contents__link toc-highlight">自动配置原理</a><ul><li><a href="#自动配置原理-1" class="table-of-contents__link toc-highlight">自动配置原理</a></li><li><a href="#以httpencodingautoconfiguration为例解释自动配置原理" class="table-of-contents__link toc-highlight">以HttpEncodingAutoConfiguration为例解释自动配置原理</a></li><li><a href="#小结" class="table-of-contents__link toc-highlight">小结</a></li></ul></li><li><a href="#conditional相关注解和debug" class="table-of-contents__link toc-highlight">@Conditional相关注解和Debug</a></li><li><a href="#日志框架sl4j" class="table-of-contents__link toc-highlight">日志框架SL4J</a><ul><li><a href="#其他日志框架转换为sl4j" class="table-of-contents__link toc-highlight">其他日志框架转换为SL4J</a></li><li><a href="#springboot和日志关系" class="table-of-contents__link toc-highlight">SpringBoot和日志关系</a></li><li><a href="#日志的配置" class="table-of-contents__link toc-highlight">日志的配置</a></li><li><a href="#指定日志框架" class="table-of-contents__link toc-highlight">指定日志框架</a></li><li><a href="#切换日志框架" class="table-of-contents__link toc-highlight">切换日志框架</a></li></ul></li><li><a href="#静态资源映射规则" class="table-of-contents__link toc-highlight">静态资源映射规则</a></li><li><a href="#模板引擎thymeleaf" class="table-of-contents__link toc-highlight">模板引擎Thymeleaf</a></li><li><a href="#springmvc自动配置原理" class="table-of-contents__link toc-highlight">SpringMVC自动配置原理</a><ul><li><a href="#默认配置" class="table-of-contents__link toc-highlight">默认配置</a></li><li><a href="#contentnegotiatingviewresolver" class="table-of-contents__link toc-highlight">ContentNegotiatingViewResolver</a></li><li><a href="#httpmessageconverters" class="table-of-contents__link toc-highlight">HttpMessageConverters</a></li><li><a href="#messagecodesresolver" class="table-of-contents__link toc-highlight">MessageCodesResolver</a></li><li><a href="#springboot在springmvc的配置模式" class="table-of-contents__link toc-highlight">SpringBoot在SpringMVC的配置模式</a></li><li><a href="#接管springboot的springmvc" class="table-of-contents__link toc-highlight">接管SpringBoot的SpringMVC</a></li><li><a href="#小结-1" class="table-of-contents__link toc-highlight">小结：</a></li></ul></li><li><a href="#国际化" class="table-of-contents__link toc-highlight">国际化</a><ul><li><a href="#使用thymeleaf国际化" class="table-of-contents__link toc-highlight">使用thymeleaf国际化</a></li><li><a href="#springboot区域信息解析器" class="table-of-contents__link toc-highlight">SpringBoot区域信息解析器</a></li><li><a href="#自定义国际化" class="table-of-contents__link toc-highlight">自定义国际化</a></li></ul></li><li><a href="#拦截器" class="table-of-contents__link toc-highlight">拦截器</a></li><li><a href="#错误处理原理" class="table-of-contents__link toc-highlight">错误处理原理</a></li><li><a href="#定制错误页面和json错误数据" class="table-of-contents__link toc-highlight">定制错误页面和JSON错误数据</a><ul><li><a href="#定制一个json数据" class="table-of-contents__link toc-highlight">定制一个JSON数据</a></li></ul></li><li><a href="#嵌入式servlet" class="table-of-contents__link toc-highlight">嵌入式Servlet</a><ul><li><a href="#spring两种配置方式" class="table-of-contents__link toc-highlight">Spring两种配置方式：</a></li><li><a href="#嵌入式servlet两种修改相关配置" class="table-of-contents__link toc-highlight">嵌入式Servlet两种修改相关配置</a></li><li><a href="#注册三大组件" class="table-of-contents__link toc-highlight">注册三大组件</a></li></ul></li><li><a href="#源码刨析-嵌入式servlet原理" class="table-of-contents__link toc-highlight">源码刨析 嵌入式Servlet原理</a><ul><li><a href="#配置是如何修改原理" class="table-of-contents__link toc-highlight">配置是如何修改原理</a></li><li><a href="#小结-2" class="table-of-contents__link toc-highlight">小结：</a></li></ul></li><li><a href="#嵌入式servlet自动配置原理" class="table-of-contents__link toc-highlight">嵌入式Servlet自动配置原理</a></li><li><a href="#整合jdbc" class="table-of-contents__link toc-highlight">整合JDBC</a><ul><li><a href="#自动配置原理-2" class="table-of-contents__link toc-highlight">自动配置原理</a></li></ul></li><li><a href="#整合druid" class="table-of-contents__link toc-highlight">整合Druid</a></li><li><a href="#整合mybatis" class="table-of-contents__link toc-highlight">整合Mybatis</a><ul><li><a href="#maven" class="table-of-contents__link toc-highlight">Maven</a></li><li><a href="#使用注解" class="table-of-contents__link toc-highlight">使用注解</a></li><li><a href="#使用配置文件" class="table-of-contents__link toc-highlight">使用配置文件</a></li></ul></li><li><a href="#springboot启动原理" class="table-of-contents__link toc-highlight">SpringBoot启动原理</a><ul><li><a href="#第一步创建springapplication对象" class="table-of-contents__link toc-highlight">第一步：创建SpringApplication对象</a></li><li><a href="#第二步启动应用" class="table-of-contents__link toc-highlight">第二步：启动应用</a></li></ul></li><li><a href="#基于原理的测试笔记测试启动的四个类" class="table-of-contents__link toc-highlight">（基于原理的测试笔记）测试启动的四个类</a></li><li><a href="#自定义starters暂时无法理解" class="table-of-contents__link toc-highlight">自定义starters【暂时无法理解】</a></li><li><a href="#springboot缓存基本使用" class="table-of-contents__link toc-highlight">SpringBoot缓存基本使用</a><ul><li><a href="#基本使用" class="table-of-contents__link toc-highlight">基本使用</a></li><li><a href="#几个属性介绍" class="table-of-contents__link toc-highlight">几个属性介绍</a></li></ul></li><li><a href="#缓存自动配置原理" class="table-of-contents__link toc-highlight">缓存自动配置原理</a><ul><li><a href="#以cacheable为例" class="table-of-contents__link toc-highlight">以@Cacheable为例</a></li><li><a href="#小结-3" class="table-of-contents__link toc-highlight">小结：</a></li></ul></li><li><a href="#cacheput的使用" class="table-of-contents__link toc-highlight">@CachePut的使用</a></li><li><a href="#cacheevict-清除缓存" class="table-of-contents__link toc-highlight">@CacheEvict 清除缓存</a></li><li><a href="#caching和cacheconfig" class="table-of-contents__link toc-highlight">@Caching和@CacheConfig</a><ul><li><a href="#caching" class="table-of-contents__link toc-highlight">@Caching</a></li><li><a href="#cacheconfig" class="table-of-contents__link toc-highlight">@CacheConfig</a></li></ul></li><li><a href="#整合缓存中间件redis" class="table-of-contents__link toc-highlight">整合缓存中间件Redis</a></li><li><a href="#自定义rediscachemanager" class="table-of-contents__link toc-highlight">自定义RedisCacheManager</a></li><li><a href="#springsecurity的简单使用" class="table-of-contents__link toc-highlight">SpringSecurity的简单使用</a><ul><li><a href="#thymeleaf整合springsecurity" class="table-of-contents__link toc-highlight">Thymeleaf整合SpringSecurity</a></li><li><a href="#记住我" class="table-of-contents__link toc-highlight"><strong>记住我</strong></a></li><li><a href="#定制自己的登录页面" class="table-of-contents__link toc-highlight">定制自己的登录页面</a></li></ul></li><li><a href="#shiro的简单使用" class="table-of-contents__link toc-highlight">Shiro的简单使用</a><ul><li><a href="#开始配置一个shiro" class="table-of-contents__link toc-highlight">开始配置一个shiro</a></li><li><a href="#整合shiro启动器" class="table-of-contents__link toc-highlight">整合Shiro启动器</a></li><li><a href="#扩展" class="table-of-contents__link toc-highlight">扩展：</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Computer-Science-Learn-Notes/docs/intro">主页</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="#" class="footer__link-item">莫得</a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/zhiyu1998" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Computer Science Learn Notes, Inc. Built with Zhiyu1998.</div></div></div></footer></div>
<script src="/Computer-Science-Learn-Notes/assets/js/runtime~main.24523488.js"></script>
<script src="/Computer-Science-Learn-Notes/assets/js/main.ade148c6.js"></script>
</body>
</html>