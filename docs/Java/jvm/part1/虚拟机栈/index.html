<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Java/jvm/part1/虚拟机栈">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">虚拟机栈 | Computer Science Learn Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/docs/Java/jvm/part1/虚拟机栈"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="虚拟机栈 | Computer Science Learn Notes"><meta data-rh="true" name="description" content="[TOC]"><meta data-rh="true" property="og:description" content="[TOC]"><link data-rh="true" rel="icon" href="/Computer-Science-Learn-Notes/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/docs/Java/jvm/part1/虚拟机栈"><link data-rh="true" rel="alternate" href="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/docs/Java/jvm/part1/虚拟机栈" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/docs/Java/jvm/part1/虚拟机栈" hreflang="x-default"><link rel="stylesheet" href="/Computer-Science-Learn-Notes/assets/css/styles.afdb522f.css">
<link rel="preload" href="/Computer-Science-Learn-Notes/assets/js/runtime~main.2a55ec46.js" as="script">
<link rel="preload" href="/Computer-Science-Learn-Notes/assets/js/main.1a67b453.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Computer-Science-Learn-Notes/"><div class="navbar__logo"><img src="/Computer-Science-Learn-Notes/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/Computer-Science-Learn-Notes/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Computer Science Learn Notes</b></a><a class="navbar__item navbar__link" href="/Computer-Science-Learn-Notes/docs/intro">主页</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/Computer-Science-Learn-Notes/docs/golang/learnInProblem">目录</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/golang/learnInProblem">Go语言</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/frontend/react/">前端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/fundamental/datastruct">基础知识</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/basic/">Java基础</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/basic/">基础知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/concurrent/">并发编程</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/简介">虚拟机</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/简介">简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/类加载子系统">类加载子系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/运行时数据区">运行时数据区</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/程序计数器（PC寄存器）">程序计数器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/虚拟机栈">虚拟机栈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/本地方法接口">本地方法接口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/本地方法栈">本地方法栈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/堆">堆</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/方法区">方法区</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/对象的实例化内存布局与访问定位">对象的实例化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/直接内存">直接内存</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/执行引擎">执行引擎</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/StringTable">StringTable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/垃圾回收概述">垃圾回收概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/垃圾回收相关算法">垃圾回收相关算法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/垃圾回收相关概念">垃圾回收相关概念</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/垃圾回收器">垃圾回收器</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/Spring">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringMVC">SpringMVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/Mybatis">Mybatis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringBoot">SpringBoot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringDataJpa">SpringDataJpa</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringSecurity">SpringSecurity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/fm/SpringCloud">SpringCloud</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/docker/main">Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/integration/main">SpringBoot整合其他框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/kotlin/">Kotlin with Spring</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/Java/eightpart/giant">Java面试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/Computer-Science-Learn-Notes/docs/others/personal_tech">其他分享</a></div></li></ul></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/Computer-Science-Learn-Notes/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">目录</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Java基础</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">虚拟机</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">虚拟机栈</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>虚拟机栈</h1></header><p>[TOC]</p><h1>虚拟机栈</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a class="hash-link" href="#概述" title="标题的直接链接">​</a></h2><p>Java 虚拟机栈是描述 Java 方法运行过程的内存模型。</p><p>Java 虚拟机栈会为每一个即将运行的 Java 方法创建一块叫做“栈帧”的区域，用于存放该方法运行过程中的一些信息，如：</p><ul><li>局部变量表</li><li>操作数栈</li><li>动态链接</li><li>方法出口信息</li><li>......</li></ul><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/fRXOugtw4tiQchlKWWHkd0X1gRrG96s8E-_HH4aXN_Y-cea8211cfc206ea3bba486f5f80fc890.png" width="584" height="588" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="内存中的栈和堆">内存中的栈和堆<a class="hash-link" href="#内存中的栈和堆" title="标题的直接链接">​</a></h2><ol><li>首先栈是运行时的单位，而堆是存储的单位。</li><li>即：栈解决程序的运行问题，即程序如何执行，或者说如何处理数据。堆解决的是数据存储的问题，即数据怎么放，放哪里</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="基本内容">基本内容<a class="hash-link" href="#基本内容" title="标题的直接链接">​</a></h2><p>Java虚拟机栈是什么？</p><ul><li>Java虚拟机栈（Java Virtual Machine Stack），早期也叫Java栈。每个线程在创建时都会创建一个虚拟机栈，其内部保存一个个的栈帧（Stack Frame），<strong>对应着一次次的Java方法调用</strong>，栈是线程私有的</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class StackTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StackTest test = new StackTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        test.methodA();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void methodA() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int j = 20;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        methodB();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void methodB(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int k = 30;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int m = 40;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/0XIXN182ik7AIvq7zF0cwIbl9u9RhTkCswUO5Zckw90-38e3256057bce9ca869d641b2fa2299f.png" width="682" height="666" class="img_ev3q"></p><ul><li>虚拟机栈的生命周期<ul><li>生命周期和线程一致，也就是线程结束了，该虚拟机栈也销毁了</li></ul></li><li>虚拟机栈的作用<ul><li>主管Java程序的运行，它保存方法的局部变量（8 种基本数据类型、对象的引用地址）、部分结果，并参与方法的调用和返回。</li><li>局部变量 vs 成员变量来说的（或属性）</li><li>基本数据类型变量 vs 引用类型变量（类、数组、接口）</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="特点">特点<a class="hash-link" href="#特点" title="标题的直接链接">​</a></h2><ul><li><p>运行速度特别快,仅仅次于 PC 寄存器。</p></li><li><p>局部变量表随着栈帧的创建而创建，它的大小在编译时确定，创建时只需分配事先规定的大小即可。在方法运行过程中，局部变量表的大小不会发生改变。</p></li><li><p>Java 虚拟机栈会出现两种异常：StackOverFlowError 和 OutOfMemoryError。</p><ul><li>StackOverFlowError 若 Java 虚拟机栈的大小不允许动态扩展，那么当线程请求栈的深度超过当前 Java 虚拟机栈的最大深度时，抛出 StackOverFlowError 异常。</li><li>OutOfMemoryError 若允许动态扩展，那么当线程请求栈时内存用完了，无法再动态扩展时，抛出 OutOfMemoryError 异常。<!-- -->*<!-- --> Java 虚拟机栈也是线程私有，随着线程创建而创建，随着线程的结束而销毁。</li></ul></li><li><p>出现 StackOverFlowError 时，内存空间可能还有很多。</p></li><li><p>对于栈来说不存在垃圾回收问题</p><ul><li>栈不需要GC，但是可能存在OOM</li></ul></li><li><p>JVM直接对Java栈的操作只有两个：</p><ul><li>每个方法执行，伴随着<strong>进栈</strong>（入栈、压栈）</li><li>执行结束后的<strong>出栈</strong>工作</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="面试题栈中可能出现的异常">面试题：<strong>栈中可能出现的异常？</strong><a class="hash-link" href="#面试题栈中可能出现的异常" title="标题的直接链接">​</a></h2><ul><li>Java 虚拟机规范允许Java栈的大小是动态的或者是固定不变的。<ul><li>如果采用固定大小的Java虚拟机栈，那每一个线程的Java虚拟机栈容量可以在线程创建的时候独立选定。如果线程请求分配的栈容量超过Java虚拟机栈允许的最大容量，Java虚拟机将会抛出一个<strong>StackoverflowError</strong> 异常。</li><li>如果Java虚拟机栈可以动态扩展，并且在尝试扩展的时候无法申请到足够的内存，或者在创建新的线程时没有足够的内存去创建对应的虚拟机栈，那Java虚拟机将会抛出一个 <strong>OutofMemoryError</strong> 异常。</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="设置栈内存大小">设置栈内存大小<a class="hash-link" href="#设置栈内存大小" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="概念">概念<a class="hash-link" href="#概念" title="标题的直接链接">​</a></h3><blockquote><p>官方文档：<a href="https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE</a></p></blockquote><p>我们可以使用参数 <strong>-Xss</strong> 选项来设置线程的最大栈空间，栈的大小直接决定了函数调用的最大可达深度。</p><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Sets the thread stack size (in bytes). Append the letter `k` or `K` to indicate KB, `m` or `M` to indicate MB, and `g` or `G` to indicate GB. The default value depends on the platform:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Linux/x64 (64-bit): 1024 KB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* macOS (64-bit): 1024 KB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Oracle Solaris/x64 (64-bit): 1024 KB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Windows: The default value depends on virtual memory</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例">示例<a class="hash-link" href="#示例" title="标题的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 演示栈中异常：StackOverflowError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Exception in thread &quot;main&quot; java.lang.StackOverflowError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StackErrorTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        main(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="如何测试xss参数">如何测试XSS参数<a class="hash-link" href="#如何测试xss参数" title="标题的直接链接">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class StackErrorTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int count = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        count++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        main(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>本台电脑默认执行了：11411次</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">11409</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11410</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11411</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message transform method call failed at JPLISAgent.c line: 844</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>设置了-Xss256k的VM Option后：执行了2469次</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2466</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2467</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2468</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2469</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message transform method call failed at JPLISAgent.c line: 844</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="栈的存储结构">栈的存储结构<a class="hash-link" href="#栈的存储结构" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="存储什么">存储什么？<a class="hash-link" href="#存储什么" title="标题的直接链接">​</a></h3><ol><li>每个线程都有自己的栈，栈中的数据都是以<strong>栈帧</strong>（Stack Frame）的格式存在</li><li>在这个线程上正在执行的每个方法都各自对应一个栈帧（Stack Frame）。</li><li>栈帧是一个内存区块，是一个数据集，维系着方法执行过程中的各种数据信息。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="运行原理">运行原理<a class="hash-link" href="#运行原理" title="标题的直接链接">​</a></h3><ol><li>JVM直接对Java栈的操作只有两个，就是对栈帧的<strong>压栈和出栈</strong>，遵循先进后出（后进先出）原则</li><li>在一条活动线程中，一个时间点上，只会有一个活动的栈帧。即只有当前正在执行的方法的栈帧（栈顶栈帧）是有效的。这个栈帧被称为<strong>当前栈帧（Current Frame）</strong>，与当前栈帧相对应的方法就是<strong>当前方法（Current Method）</strong>，定义这个方法的类就是<strong>当前类（Current Class）</strong></li><li>执行引擎运行的所有字节码指令只针对当前栈帧进行操作。</li><li>如果在该方法中调用了其他方法，对应的新的栈帧会被创建出来，放在栈的顶端，成为新的当前帧</li></ol><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/ygbip8-zvGYZ4DRc3cBeddjl-6I1OXuUbRUjZeRLM-k-23f95bb92366ad55ec5a9c2d885d344a.jpg" width="1420" height="768" class="img_ev3q"></p><ol><li><strong>不同线程中所包含的栈帧是不允许存在相互引用的</strong>，即不可能在一个栈帧之中引用另外一个线程的栈帧。</li><li>如果当前方法调用了其他方法，方法返回之际，当前栈帧会传回此方法的执行结果给前一个栈帧，接着，虚拟机会丢弃当前栈帧，使得前一个栈帧重新成为当前栈帧。</li><li>Java方法有两种返回函数的方式。<ul><li>一种是正常的函数返回，使用return指令。</li><li>另一种是方法执行中出现未捕获处理的异常，以抛出异常的方式结束。</li><li>但不管使用哪种方式，都会导致栈帧被弹出。</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="理解栈帧">理解栈帧<a class="hash-link" href="#理解栈帧" title="标题的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class StackFrameTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StackFrameTest test = new StackFrameTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        test.method1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method1开始执行....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        method2();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method1执行结束....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int method2() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method2开始执行....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        method3();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method2即将结束....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private double method3() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method3开始执行....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double j = 20.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method3执行结束....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return j;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>如果正常执行，如果下图所示，就会把当前方法压入栈中，当执行到方法3的时候，当前栈帧就指向方法3（method3）</li></ol><p><img loading="lazy" alt="image" src="data:image/png;base64,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" width="368" height="144" class="img_ev3q"></p><ol start="2"><li>如果方法3出现异常，就会抛出异常给方法2，如果方法2也没有处理异常的函数，就会抛给方法1以此类推（具体操作见下面的代码）</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class StackFrameTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StackFrameTest test = new StackFrameTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        test.method1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;main()正常结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method1开始执行....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        method2();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method1执行结束....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int method2() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method2开始执行....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        method3();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method2即将结束....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(10 / 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private double method3() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method3开始执行....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double j = 20.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;method3执行结束....&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return j;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">method1开始执行....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">method2开始执行....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">method3开始执行....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">method3执行结束....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">method2即将结束....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at cn.zhiyucs.java1.StackFrameTest.method2(StackFrameTest.java:22)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at cn.zhiyucs.java1.StackFrameTest.method1(StackFrameTest.java:13)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at cn.zhiyucs.java1.StackFrameTest.main(StackFrameTest.java:7)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果是在程序的main函数内加入一个try-catch来处理异常：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            StackFrameTest test = new StackFrameTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            test.method1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;main()正常结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">method2开始执行....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">method3开始执行....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">method3执行结束....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">method2即将结束....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main()正常结束</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java.lang.ArithmeticException: / by zero</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果方法都是正常结束的：可以看到</p><p>method1：void（可以在方法的返回加入return;  但一般是省略）</p><blockquote><p>21: return</p></blockquote><p>method2: int</p><blockquote><p>25: ireturn</p></blockquote><p>method3: double</p><blockquote><p>21: dreturn</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="栈帧的内部结构">栈帧的内部结构<a class="hash-link" href="#栈帧的内部结构" title="标题的直接链接">​</a></h3><p>每个栈帧中存储着：</p><ul><li>局部变量表（Local Variables）</li><li>操作数栈（Operand Stack）（或表达式栈）</li><li>动态链接（Dynamic Linking）（或指向运行时常量池的方法引用）</li><li>方法返回地址（Return Address）（或方法正常退出或者异常退出的定义）</li><li>一些附加信息</li></ul><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/haRY-DBke3UiKSGEOUSnagoSIvFrRj6MFsdyAvJ-Whk-978e1d4bd1576e68df9d6a46a3df401a.jpg" width="1823" height="886" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="局部变量表">局部变量表<a class="hash-link" href="#局部变量表" title="标题的直接链接">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="概念-1">概念<a class="hash-link" href="#概念-1" title="标题的直接链接">​</a></h5><ol><li>定义为一个数字数组，主要用于存储方法参数、定义在方法体内部的局部变量，数据类型包括各类基本数据类型，对象引用，以及 return address 类型。</li><li>局部变量表容量大小是在编译期确定下来的。最基本的存储单元是 slot，32 位占用一个 slot，64 位类型（long 和 double）占用两个 slot。</li><li><strong>定义为一个数字数组，主要用于存储方法参数和定义在方法体内的局部变量</strong>，这些数据类型包括各类基本数据类型、对象引用（reference），以及returnAddress返回值类型。</li><li>由于局部变量表是建立在线程的栈上，是线程的私有数据，因此<strong>不存在数据安全问题</strong></li><li>方法嵌套调用的次数由栈的大小决定。一般来说，栈越大，方法嵌套调用次数越多。<ul><li>对一个函数而言，它的参数和局部变量越多，使得局部变量表膨胀，它的栈帧就越大，以满足方法调用所需传递的信息增大的需求。</li><li>进而函数调用就会占用更多的栈空间，导致其嵌套调用次数就会减少。</li></ul></li><li>局部变量表中的变量只在当前方法调用中有效。<ul><li>在方法执行时，虚拟机通过使用局部变量表完成参数值到参数变量列表的传递过程。</li><li>当方法调用结束后，随着方法栈帧的销毁，局部变量表也会随之销毁。</li></ul></li></ol><p>例如这样一个示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class LocalVariablesTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LocalVariablesTest test = new LocalVariablesTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int num = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        test.test1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void testStatic() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new LocalVariablesTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new Date();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int count = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public LocalVariablesTest() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.count = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Date date = new Date();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String name1 = &quot;atguigu.com&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.test2(date, name1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(date + name1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String test2(Date dateP, String name2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dateP = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name2 = &quot;songhongkang&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double weight = 130.5D;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        char gender = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return dateP + name2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test3() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ++this.count;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test4() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int a = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int b = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int c = a + 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        c = a + 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过<code>javap -v</code>反编译之后可以看到main函数局部变量表：</p><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LocalVariableTable:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Start  Length  Slot  Name   Signature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            0      16     0  args   [Ljava/lang/String;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            8       8     1  test   Lcn/zhiyucs/java1/LocalVariablesTest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           11       5     2   num   I</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中L表示引用，其后面的String，变量名为arg，test同理</p><p>I表示整数型，变量为其num</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="使用jclasslib进行详解">使用jclasslib进行详解<a class="hash-link" href="#使用jclasslib进行详解" title="标题的直接链接">​</a></h5><ol><li>通过Code可以查看字节码</li></ol><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/fiv6bgdsLJyQSsKawVmZKZI2jj0WL7JcS-Kd7bht8YY-58dfbb482d106fcc55b035bfa86f31bb.png" width="703" height="290" class="img_ev3q"></p><p>以及可以查看异常和杂项（字节码的长度、最大深度）</p><ol start="2"><li>通过LineNumberTable可以查看每一个字节码指令的位置对应代码的位置</li></ol><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/SUfU7ZiaVchYvLMzgT8trzP_qfjPcvgKD3Gx3ZR3pus-17ae5ae845ffe595175c017929558977.png" width="548" height="181" class="img_ev3q"></p><ol start="3"><li>以及可以查看局部变量表的信息</li></ol><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/L5KG51fIZAmJJwAcbZegnU9jnovYmr9EzzCdq84wf6o-abc7c3465e5b0e70404ec95171199299.png" width="711" height="208" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="对slot的理解">对slot的理解<a class="hash-link" href="#对slot的理解" title="标题的直接链接">​</a></h5><ol><li>参数值的存放总是从局部变量数组索引 0 的位置开始，到数组长度-1的索引结束。</li><li>局部变量表，<strong>最基本的存储单元是Slot（变量槽）</strong>，局部变量表中存放编译期可知的各种基本数据类型（8种），引用类型（reference），returnAddress类型的变量。</li><li>在局部变量表里，<strong>32位以内的类型只占用一个slot</strong>（包括returnAddress类型），<strong>64位的类型占用两个slot</strong>（1ong和double）。</li></ol><ul><li>byte、short、char在储存前被转换为int，boolean也被转换为int，0表示false，非0表示true</li><li>long和double则占据两个slot</li></ul><ol start="4"><li>JVM会为局部变量表中的每一个Slot都分配一个访问索引，通过这个索引即可成功访问到局部变量表中指定的局部变量值</li><li>当一个实例方法被调用的时候，它的方法参数和方法体内部定义的局部变量将会<strong>按照顺序被复制</strong>到局部变量表中的每一个slot上</li><li>如果需要访问局部变量表中一个64bit的局部变量值时，只需要使用前一个索引即可。（比如：访问long或double类型变量）</li><li>如果当前帧是由构造方法或者实例方法创建的，那么<strong>该对象引用this将会存放在index为0的slot处</strong>，其余的参数按照参数表顺序继续排列。（this也相当于一个变量）</li></ol><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/5G3YqC8Lbq-v-TVx5vMZtW0jYvDidsmOPTvBg_UyjOw-0a3142ee42c25fda44de43c4c2f2d2bf.png" width="459" height="528" class="img_ev3q"></p><p>注：静态方法中是不可以用this的 -- 因为this变量不存在静态方法的局部变量表中</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="slot示例">slot示例<a class="hash-link" href="#slot示例" title="标题的直接链接">​</a></h5><ol><li>this存放在index=0的位置：</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void test3() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ++this.count;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/m2juSRh5abz449TXSKNVBJTgSrCKNhZDEUjGWQIKvzM-018c7f2aaa44d56f6e9cb4f6aa844f6d.png" width="685" height="300" class="img_ev3q"></p><ol start="2"><li>64位类型，long和double占两个slot位置</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public String test2(Date dateP, String name2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dateP = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name2 = &quot;songhongkang&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    double weight = 130.5D;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char gender = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return dateP + name2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/3KxJIQdnfuvQ2XABgG0uLWG9zQOiAMTYtIqL_VtUYJU-fdf14687adf83d5144949a4686939825.png" width="393" height="232" class="img_ev3q"></p><p>可以看到gender是5，weight是一个double在3的位置，以此就可以正面</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="slot重复利用">slot重复利用<a class="hash-link" href="#slot重复利用" title="标题的直接链接">​</a></h5><p>栈帧中的局部变量表中的槽位是可以重用的，如果一个局部变量过了其作用域，那么在其作用域之后申明新的局部变量变就很有可能会复用过期局部变量的槽位，从而达到节省资源的目的。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void test4() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int a = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int b = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            b = a + 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int c = a + 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="data:image/png;base64,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" width="397" height="198" class="img_ev3q"></p><p>可以看到变量c是使用已销毁的变量b占据的slot的位置</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="静态变量与局部变量的对比">静态变量与局部变量的对比<a class="hash-link" href="#静态变量与局部变量的对比" title="标题的直接链接">​</a></h5><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 变量的分类：按照数据类型分：1. 基本数据类型 2. 引用数据类型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *           按照在类中声明的位置分：成员变量：在使用前，都经历过默认初始化赋值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *                                  类变量：linking的prepare阶段：给类变量默认赋值 --&gt; initial阶段：给类变量显式赋值即静态代码块赋值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *                                  实例变量：随着对象的创建会在堆空间中分配实例变量空间，并进行默认赋值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *                               局部变量：在使用前，必须要进行显式赋值！否则编译不通过</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void testTemp5() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int num;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(num); // 错误信息：变量num未进行初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>参数表分配完毕之后，再根据方法体内定义的变量的顺序和作用域分配。</li><li>我们知道成员变量有两次初始化的机会<strong>，</strong>第一次是在“准备阶段”，执行系统初始化，对类变量设置零值，另一次则是在“初始化”阶段，赋予程序员在代码中定义的初始值。</li><li>和类变量初始化不同的是，<strong>局部变量表不存在系统初始化的过程</strong>，这意味着一旦定义了局部变量则必须人为的初始化，否则无法使用。</li></ol><p>补充：</p><ol><li>在栈帧中，与性能调优关系最为密切的部分就是前面提到的局部变量表。在方法执行时，虚拟机使用局部变量表完成方法的传递。</li><li>局部变量表中的变量也是重要的垃圾回收根节点，只要被局部变量表中直接或间接引用的对象都不会被回收。</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="操作数栈">操作数栈<a class="hash-link" href="#操作数栈" title="标题的直接链接">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="特点-1">特点<a class="hash-link" href="#特点-1" title="标题的直接链接">​</a></h5><ol><li>每一个独立的栈帧除了包含局部变量表以外，还包含一个后进先出（Last - In - First -Out）的 操作数栈，也可以称之为<strong>表达式栈</strong>（Expression Stack）</li><li>操作数栈，在方法执行过程中，<strong>根据字节码指令，往栈中写入数据或提取数据</strong>，即入栈（push）和 出栈（pop）</li></ol><ul><li>某些字节码指令将值压入操作数栈，其余的字节码指令将操作数取出栈。使用它们后再把结果压入栈，</li><li>比如：执行复制、交换、求和等操作</li></ul><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/gC43Vh646Rv2Ui_dKWHNu76zKRZ5YJZN7oBBMOQtssQ-0204313f256c5939a6d8544f26182ae2.png" width="695" height="237" class="img_ev3q"></p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/W3xcd9VCefaPVA2zcR7SUZfgs5eD6vXpMr_fqQBBhhc-f57a0685ab0b84b88ad8d89ba6fea7e9.png" width="1364" height="497" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="作用">作用<a class="hash-link" href="#作用" title="标题的直接链接">​</a></h5><ol><li>操作数栈，<strong>主要用于保存计算过程的中间结果，同时作为计算过程中变量临时的存储空间</strong>。</li><li>操作数栈就是JVM执行引擎的一个工作区，当一个方法刚开始执行的时候，一个新的栈帧也会随之被创建出来，这时方法的操作数栈是空的。</li><li>每一个操作数栈都会拥有一个明确的栈深度用于存储数值，其所需的最大深度在编译期就定义好了，保存在方法的Code属性中，为<strong>maxstack</strong>的值。</li><li>栈中的任何一个元素都是可以任意的Java数据类型</li></ol><ul><li>32bit的类型占用一个栈单位深度</li><li>64bit的类型占用两个栈单位深度</li></ul><ol start="5"><li>操作数栈并非采用访问索引的方式来进行数据访问的，而是只能通过标准的入栈和出栈操作来完成一次数据访问。<strong>只不过操作数栈是用数组这个结构来实现的而已</strong></li><li>如果被调用的方法带有返回值的话，其返回值将会被压入当前栈帧的操作数栈中，并更新PC寄存器中下一条需要执行的字节码指令。</li><li>操作数栈中元素的数据类型必须与字节码指令的序列严格匹配，这由编译器在编译器期间进行验证，同时在类加载过程中的类检验阶段的数据流分析阶段要再次验证。</li><li>另外，<strong>我们说Java虚拟机的**</strong>解释引擎是基于栈的执行引擎*<strong>*，其中的栈指的就是操作数栈</strong>。</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="代码追踪">代码追踪<a class="hash-link" href="#代码追踪" title="标题的直接链接">​</a></h5><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class OperandStackTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public OperandStackTest() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void testAddOperation() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        byte i = 15;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int j = 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int var10000 = i + j;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>反编译后的字节码为：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0 bipush 15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 2 istore_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 3 bipush 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 5 istore_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 6 iload_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 7 iload_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 8 iadd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 9 istore_3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 return</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>流程解析：</p><blockquote><p>PC寄存器的地址为进行调整</p></blockquote><ol><li>bitpush 15 ： 把15放入局部变量表中</li><li>istore<!-- -->_<!-- -->x：把其放入到操作数栈，该数的索引为x，栈顶指向该操作数</li><li>iload<!-- -->_<!-- -->x：从局部变量表中把索引为x的变量取出来</li><li>此时当前的操作栈已经放入了两个数据（15、8）</li><li>iadd：需要执行引擎给CPU进行运算</li><li>istore<!-- -->_<!-- -->3：计算得到的23放入到操作数栈中</li><li>return：计算结束</li></ol><p>总结：以上的操作数栈的最大深度为2，局部变量表为4</p><p><img loading="lazy" alt="image" src="data:image/png;base64,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" width="213" height="127" class="img_ev3q"></p><p>大致思路可以联想此图</p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/rJhae--4U1CaSOQjvUZlBpNN1nJZCwaQf1TaODiDZwI-96b2f2c4ae62577459f124a52e8bc9dd.png" width="1363" height="699" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="类型转换说明">类型转换说明<a class="hash-link" href="#类型转换说明" title="标题的直接链接">​</a></h5><ul><li>因为 8 可以存放在 byte 类型中，所以压入操作数栈的类型为 byte ，而不是 int ，所以执行的字节码指令为 bipush 8</li><li>但是存储在局部变量的时候，会转成 int 类型的变量：istore<!-- -->_<!-- -->4</li></ul><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/A6U2HiAWYQH0HrjId7-5YXPppkB9LU-EG9VLSx7IiJ4-4e06642e2e9aaf309ef8abb193f803f6.png" width="533" height="339" class="img_ev3q"></p><ul><li>m改成800之后，byte存储不了，就成了short型，sipush 800</li></ul><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/RC3ToH7-1fLidjgS7p3T2zTqQan9gBf9sSS7h0EDbfk-2e4498c1574dbe523bc6fa304da8172b.png" width="487" height="316" class="img_ev3q"></p><p>再如一个例子：testGetSum() 方法字节码指令：一上来就加载 getSum() 方法的返回值()</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public int getSum() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int m = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int n = 20;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int k = m + n;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return k;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void testGetSum() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //  aload_0 获取上一个栈帧返回的结果，并保存在操作数栈中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i = getSum();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int j = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/aCN_H57PJ0iRifl9TTtRmTGGRfwccc8UvDn0k1jKNuE-f87e007029cd2871c1a107df194027c1.png" width="591" height="255" class="img_ev3q"></p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/Bwowm-8waOdNnbxS1rIlByepb5EiD8z1ovOhaeHIU5c-3b34388012971b824f654fd157202952.png" width="680" height="180" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="面试题i和i的区别字节码篇解释">面试题：i++和++i的区别（字节码篇解释）<a class="hash-link" href="#面试题i和i的区别字节码篇解释" title="标题的直接链接">​</a></h5><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void add() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 第1类问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i1 = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i1++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i2 = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ++i2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 第2类问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i3 = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i4 = i3++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i5 = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i6 = ++i5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 第3类问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i7 = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i7 = i7++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i8 = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i8 = ++i8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 第4类问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i9 = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i10 = i9++ + ++i9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>对应字节码为：</p><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0 bipush 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 2 istore_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 3 iinc 1 by 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 6 bipush 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 8 istore_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 9 iinc 2 by 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12 bipush 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14 istore_3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15 iload_3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">16 iinc 3 by 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19 istore 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">21 bipush 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">23 istore 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">25 iinc 5 by 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">28 iload 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30 istore 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32 bipush 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">34 istore 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">36 iload 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">38 iinc 7 by 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">41 istore 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">43 bipush 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">45 istore 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">47 iinc 8 by 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">50 iload 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">52 istore 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">54 bipush 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">56 istore 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">58 iload 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">60 iinc 9 by 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">63 iinc 9 by 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">66 iload 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">68 iadd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">69 istore 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">71 return</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="栈顶缓存top-of-stack-cashing技术">栈顶缓存（<strong>Top Of Stack Cashing</strong>）技术<a class="hash-link" href="#栈顶缓存top-of-stack-cashing技术" title="标题的直接链接">​</a></h4><ol><li>前面提过，基于栈式架构的虚拟机所使用的零地址指令更加紧凑，但完成一项操作的时候必然需要使用更多的入栈和出栈指令，这同时也就意味着将需要更多的指令分派（instruction dispatch）次数（也就是你会发现指令很多）和导致内存读/写次数多，效率不高。</li><li>由于操作数是存储在内存中的，因此频繁地执行内存读/写操作必然会影响执行速度。为了解决这个问题，HotSpot JVM的设计者们提出了栈顶缓存（Tos，Top-of-Stack Cashing）技术，<strong>将栈顶元素全部缓存在物理CPU的寄存器中，以此降低对内存的读/写次数，提升执行引擎的执行效率**</strong>。**</li><li>寄存器的主要优点：指令更少，执行速度快，但是指令集（也就是指令种类）很多</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="动态链接">动态链接<a class="hash-link" href="#动态链接" title="标题的直接链接">​</a></h4><p>概览：</p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/haRY-DBke3UiKSGEOUSnagoSIvFrRj6MFsdyAvJ-Whk-978e1d4bd1576e68df9d6a46a3df401a.jpg" width="1823" height="886" class="img_ev3q"></p><ol><li>每一个栈帧内部都包含<strong>一个指向**</strong>运行时常量池*<strong>*中**</strong>该栈帧所属方法的引用<strong>。包含这个引用的目的就是</strong>为了支持当前方法的代码能够实现*<strong>*动态链接</strong>（Dynamic Linking），比如：invokedynamic指令</li><li>在Java源文件被编译到字节码文件中时，所有的变量和方法引用都作为符号引用（Symbolic Reference）保存在class文件的常量池里。比如：描述一个方法调用了另外的其他方法时，就是通过常量池中指向方法的符号引用来表示的，那么<strong>动态链接的作用就是为了将这些符号引用转换为调用方法的直接引用</strong></li></ol><p>例如：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class DynamicLinkingTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int num = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void methodA() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;methodA......&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void methodB() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;methodB......&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        methodA();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>字节码如下：</p><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> 0 getstatic #3 &lt;java/lang/System.out : Ljava/io/PrintStream;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 3 ldc #6 &lt;methodB......&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 5 invokevirtual #5 &lt;java/io/PrintStream.println : (Ljava/lang/String;)V&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 8 aload_0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 9 invokevirtual #7 &lt;cn/zhiyucs/java1/DynamicLinkingTest.methodA : ()V&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12 aload_0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13 dup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14 getfield #2 &lt;cn/zhiyucs/java1/DynamicLinkingTest.num : I&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">17 iconst_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">18 iadd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19 putfield #2 &lt;cn/zhiyucs/java1/DynamicLinkingTest.num : I&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">22 return</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>在methodB() 方法中通过 invokevirtual #7 指令，查看下面的常量池可以看到调用了#8和#31<ul><li>#8 当前类</li><li>#31 调用#19 #13<ul><li>#19 void</li><li>#13 ()V</li></ul></li></ul></li><li>属性是从<code>getfield #2 &lt;cn/zhiyucs/java1/DynamicLinkingTest.num : I&gt; 调用了#8和#24</code><ul><li>#8 当前类</li><li>#24<ul><li>#10</li><li>#11 Int类型</li></ul></li></ul></li></ul><p>常量池如下：</p><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Constant pool:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #1 = Methodref          #9.#23         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #2 = Fieldref           #8.#24         // cn/zhiyucs/java1/DynamicLinkingTest.num:I</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #3 = Fieldref           #25.#26        // java/lang/System.out:Ljava/io/PrintStream;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #4 = String             #27            // methodA......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #5 = Methodref          #28.#29        // java/io/PrintStream.println:(Ljava/lang/String;)V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #6 = String             #30            // methodB......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #7 = Methodref          #8.#31         // cn/zhiyucs/java1/DynamicLinkingTest.methodA:()V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #8 = Class              #32            // cn/zhiyucs/java1/DynamicLinkingTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   #9 = Class              #33            // java/lang/Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #10 = Utf8               num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #11 = Utf8               I</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #12 = Utf8               &lt;init&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #13 = Utf8               ()V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #14 = Utf8               Code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #15 = Utf8               LineNumberTable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #16 = Utf8               LocalVariableTable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #17 = Utf8               this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #18 = Utf8               Lcn/zhiyucs/java1/DynamicLinkingTest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #19 = Utf8               methodA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #20 = Utf8               methodB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #21 = Utf8               SourceFile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #22 = Utf8               DynamicLinkingTest.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #23 = NameAndType        #12:#13        // &quot;&lt;init&gt;&quot;:()V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #24 = NameAndType        #10:#11        // num:I</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #25 = Class              #34            // java/lang/System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #26 = NameAndType        #35:#36        // out:Ljava/io/PrintStream;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #27 = Utf8               methodA......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #28 = Class              #37            // java/io/PrintStream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #29 = NameAndType        #38:#39        // println:(Ljava/lang/String;)V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #30 = Utf8               methodB......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #31 = NameAndType        #19:#13        // methodA:()V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #32 = Utf8               cn/zhiyucs/java1/DynamicLinkingTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #33 = Utf8               java/lang/Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #34 = Utf8               java/lang/System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #35 = Utf8               out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #36 = Utf8               Ljava/io/PrintStream;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #37 = Utf8               java/io/PrintStream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #38 = Utf8               println</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #39 = Utf8               (Ljava/lang/String;)V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>结论：通过 #7 我们就能找到需要调用的 methodA() 方法，并进行调用，在上面，其实还有很多符号引用，比如 Object、System、PrintStream 等等</p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/NNzdzjVIn81bjQCQikIz-xXAGHletybZjyoy8hHX57E-031cb446828378895bfc529cdde83fca.jpg" width="2215" height="1007" class="img_ev3q"></p><p><strong>为什么要用常量池呢？</strong></p><ol><li>因为在不同的方法，都可能调用常量或者方法，所以只需要存储一份即可，然后记录其引用即可，节省了空间。</li><li>常量池的作用：就是为了提供一些符号和常量，便于指令的识别</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="方法的调用">方法的调用<a class="hash-link" href="#方法的调用" title="标题的直接链接">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="静态链接和动态链接">静态链接和动态链接<a class="hash-link" href="#静态链接和动态链接" title="标题的直接链接">​</a></h5><p>在JVM中，将符号引用转换为调用方法的直接引用与方法的绑定机制相关</p><ul><li><strong>静态链接</strong>：</li></ul><p>当一个字节码文件被装载进JVM内部时，如果被调用的目标方法在编译期确定，且运行期保持不变时，这种情况下将调用方法的符号引用转换为直接引用的过程称之为静态链接</p><ul><li><strong>动态链接</strong>：</li></ul><p>如果被调用的方法在编译期无法被确定下来，也就是说，只能够在程序运行期将调用的方法的符号转换为直接引用，由于这种引用转换过程具备动态性，因此也被称之为动态链接。</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="早期绑定与晚期绑定">早期绑定与晚期绑定<a class="hash-link" href="#早期绑定与晚期绑定" title="标题的直接链接">​</a></h5><blockquote><p>静态链接与动态链接针对的是方法。早期绑定和晚期绑定范围更广。早期绑定涵盖了静态链接，晚期绑定涵盖了动态链接。</p></blockquote><p>静态链接和动态链接对应的方法的绑定机制为：早期绑定（Early Binding）和晚期绑定（Late Binding）。<strong>绑定是一个字段、方法或者类在符号引用被替换为直接引用的过程</strong>，这仅仅发生一次。</p><ul><li><strong>早期绑定</strong></li></ul><p>早期绑定就是指被调用的目标方法如果在编译期可知，且运行期保持不变时，即可将这个方法与所属的类型进行绑定，这样一来，由于明确了被调用的目标方法究竟是哪一个，因此也就<strong>可以使用静态链接的方式将符号引用转换为直接引用</strong>。</p><ul><li><strong>晚期绑定</strong></li></ul><p>如果被调用的方法在编译期无法被确定下来，<strong>只能够在程序运行期根据实际的类型绑定相关的方法</strong>，这种绑定方式也就被称之为晚期绑定。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Animal {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void eat() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;动物进食&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Huntable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void hunt();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Dog extends Animal implements Huntable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void eat() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;狗吃骨头&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void hunt() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;捕食耗子，多管闲事&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Cat extends Animal implements Huntable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Cat() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();//表现为：早期绑定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Cat(String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this();//表现为：早期绑定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void eat() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.eat();//表现为：早期绑定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;猫吃鱼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void hunt() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;捕食耗子，天经地义&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AnimalTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void showAnimal(Animal animal) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        animal.eat();//表现为：晚期绑定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void showHunt(Huntable h) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        h.hunt();//表现为：晚期绑定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>字节码中：</p><p>invokevirtual 体现为晚期绑定</p><p>invokeinterface 也体现为晚期绑定</p><p>invokespecial 体现为早期绑定</p><p>eat.class</p><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> 0 aload_0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 1 invokespecial #3 &lt;cn/zhiyucs/java2/Animal.eat : ()V&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 4 getstatic #4 &lt;java/lang/System.out : Ljava/io/PrintStream;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 7 ldc #5 &lt;猫吃鱼&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 9 invokevirtual #6 &lt;java/io/PrintStream.println : (Ljava/lang/String;)V&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12 return</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AnimalTest.class</p><ol><li>showAnimal</li></ol><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0 aload_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 invokevirtual #2 &lt;cn/zhiyucs/java2/Animal.eat : ()V&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 return</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>showHunt</li></ol><div class="language-Plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0 aload_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 invokevirtual #2 &lt;cn/zhiyucs/java2/Animal.eat : ()V&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="多态与绑定">多态与绑定<a class="hash-link" href="#多态与绑定" title="标题的直接链接">​</a></h5><ol><li>随着高级语言的横空出世，类似于Java一样的基于面向对象的编程语言如今越来越多，尽管这类编程语言在语法风格上存在一定的差别，但是它们彼此之间始终保持着一个共性，那就是都支持封装、继承和多态等面向对象特性，既然这一类的编程语言具备多态特性，那么自然也就具备早期绑定和晚期绑定两种绑定方式。</li><li>Java中任何一个普通的方法其实都具备虚函数的特征，它们相当于C++语言中的虚函数（C++中则需要使用关键字virtual来显式定义）。如果在Java程序中不希望某个方法拥有虚函数的特征时，则可以使用关键字final来标记这个方法。</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="虚方法和非虚方法">虚方法和非虚方法<a class="hash-link" href="#虚方法和非虚方法" title="标题的直接链接">​</a></h5><ol><li>如果方法在编译期就确定了具体的调用版本，这个版本在运行时是不可变的。这样的方法称为非虚方法。</li><li>静态方法、私有方法、final方法、实例构造器、父类方法都是非虚方法。</li><li><strong>其他方法称为虚方法</strong>。</li></ol><p>子类对象的多态性的使用前提（非虚方法和这里是相抵触的）：</p><ol><li>类的继承关系</li><li>方法的重写</li></ol><p><strong>虚拟机中调用方法的指令</strong></p><ul><li><strong>普通指令：</strong></li></ul><ol><li><p>invokestatic：调用静态方法，解析阶段确定唯一方法版本</p></li><li><p>invokespecial：调用 <code>&lt;init&gt;</code> 方法、私有及父类方法，解析阶段确定唯一方法版本</p></li><li><p>invokevirtual：调用所有虚方法</p></li><li><p>invokeinterface：调用接口方法</p></li></ol><ul><li><strong>动态调用指令</strong></li></ul><p>invokedynamic：动态解析出需要调用的方法，然后执行</p><p>前四条指令固化在虚拟机内部，方法的调用执行不可人为干预。而invokedynamic指令则支持由用户确定方法版本。其中invokestatic指令和invokespecial指令调用的方法称为非虚方法，其余的（final修饰的除外）称为虚方法。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Father {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Father() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;father的构造器&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void showStatic(String str) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;father &quot; + str);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public final void showFinal() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;father show final&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void showCommon() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;father 普通方法&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Son extends Father {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Son() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invokespecial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Son(int age) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invokespecial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //不是重写的父类的静态方法，因为静态方法不能被重写！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void showStatic(String str) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;son &quot; + str);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void showPrivate(String str) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;son private&quot; + str);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void show() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invokestatic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        showStatic(&quot;atguigu.com&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invokestatic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.showStatic(&quot;good!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invokespecial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        showPrivate(&quot;hello!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invokespecial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.showCommon();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invokevirtual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        showFinal();//因为此方法声明有final，不能被子类重写，所以也认为此方法是非虚方法。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //虚方法如下：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        invokevirtual  你没有显示的加super.，编译器认为你可能调用子类的showCommon(即使son子类没有重写，也        会认为)，所以编译期间确定不下来，就是虚方法。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        showCommon();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        info();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MethodInterface in = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invokeinterface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        in.methodA();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void info() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void display(Father f) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.showCommon();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Son so = new Son();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        so.show();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface MethodInterface {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void methodA();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="invokedynamic-指令"> invokedynamic 指令<a class="hash-link" href="#invokedynamic-指令" title="标题的直接链接">​</a></h5><ol><li>JVM字节码指令集一直比较稳定，一直到Java7中才增加了一个invokedynamic指令，这是Java为了实现【动态类型语言】支持而做的一种改进。</li><li>但是在Java7中并没有提供直接生成invokedynamic指令的方法，需要借助ASM这种底层字节码工具来产生invokedynamic指令。直到Java8的Lambda表达式的出现，invokedynamic指令的生成，在Java中才有了直接的生成方式。</li><li>Java7中增加的动态语言类型支持的本质是对Java虚拟机规范的修改，而不是对Java语言规则的修改，这一块相对来讲比较复杂，增加了虚拟机中的方法调用，最直接的受益者就是运行在Java平台的动态语言的编译器。</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="方法重写的本质">方法重写的本质<a class="hash-link" href="#方法重写的本质" title="标题的直接链接">​</a></h5><ol><li>找到操作数栈顶的第一个元素所执行的对象的实际类型，记作C。</li><li>如果在类型C中找到与常量中的描述符合简单名称都相符的方法，则进行访问权限校验。<ul><li>如果通过则返回这个方法的直接引用，查找过程结束</li><li>如果不通过，则返回java.lang.IllegalAccessError 异常</li></ul></li><li>否则，按照继承关系从下往上依次对C的各个父类进行第2步的搜索和验证过程。</li><li>如果始终没有找到合适的方法，则抛出java.lang.AbstractMethodError异常。</li></ol><blockquote><p>上面这个过程称为<strong>动态分派</strong></p></blockquote><p><strong>IllegalAccessError介绍</strong></p><ol><li>程序试图访问或修改一个属性或调用一个方法，这个属性或方法，你没有权限访问。一般的，这个会引起编译器异常。这个错误如果发生在运行时，就说明一个类发生了不兼容的改变。</li><li>比如，你把应该有的jar包放从工程中拿走了，或者Maven中存在jar包冲突</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="虚方法表">虚方法表<a class="hash-link" href="#虚方法表" title="标题的直接链接">​</a></h5><ul><li>在面向对象的编程中，会很频繁的使用到动态分派，如果在每次动态分派的过程中都要重新在类的方法元数据中搜索合适的目标的话就可能影响到执行效率。</li><li>因此，为了提高性能，<code>JVM采用在类的方法区建立一个虚方法表（virtual method table）来实现</code>，非虚方法不会出现在表中。使用索引表来代替查找。</li><li>每个类中都有一个虚方法表，表中存放着各个方法的实际入口。</li><li><code>虚方法表是什么时候被创建的呢？</code> 虚方法表会在类加载的<code>链接阶段</code>被创建并开始初始化，类的变量初始值准备完成之后，JVM会把该类的虚方法表也初始化完毕。</li><li>如图所示：如果类中重写了方法，那么调用的时候，就会直接在该类的虚方法表中查找</li></ul><p>例子1：</p><p>如图所示：如果类中重写了方法，那么调用的时候，就会直接在该类的虚方法表中查找</p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/n_emFyb3vw9wJKqwmfjUYz2NmvhzFklfjhLD2heEJTk-8ad31c2e90c0c29d4b8f1cf0f18241e3.webp" width="772" height="500" class="img_ev3q"></p><p><strong>具体解释</strong>：比如说son在调用toString的时候，Son没有重写过，Son的父类Father也没有重写过，那就直接调用Object类的toString。那么就直接在虚方法表里指明toString直接指向Object类。下次Son对象再调用toString就直接去找Object，不用先找Son--&gt;再找Father--&gt;最后才到Object的这样的一个过程。</p><p>例子2：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class VirtualMethodTable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Friendly {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void sayHello();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void sayGoodbye();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Dog {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sayHello() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String toString() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;Dog&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Cat implements Friendly {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void eat() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sayHello() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sayGoodbye() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected void finalize() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String toString() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;Cat&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CockerSpaniel extends Dog implements Friendly {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sayHello() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.sayHello();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sayGoodbye() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/dHHAh2WohuGQfugMdi9vKRteOL3gew1MOQ4piJqc4gw-42cb33486ebae15625a2b3da28bd406d.jpeg" width="2860" height="1672" class="img_ev3q"></p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/MAswxJJqSKJHurDiyIgVMFiyC89-xX4UhBHrHoq1A4k-6b96caac3ad40db2bee64e2ffdca44cd.png" width="2880" height="1652" class="img_ev3q"></p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/GPZKPvQH8ikCYUutmUpyNioRUCuO5ibUtfgrfbJ4FT8-739ac55ff5b33667fbf3cf2c98cd76f0.png" width="2808" height="1304" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="方法返回地址">方法返回地址<a class="hash-link" href="#方法返回地址" title="标题的直接链接">​</a></h4><ul><li>存放 <code>调用该方法的pc寄存器的值</code>。</li><li>一个方法的结束，有两种方式：<ul><li>正常执行完成</li><li>出现未处理的异常，非正常退出<!-- -->*<!-- --> 无论通过哪种方式退出，在方法退出后都返回到该方法被调用的位置。方法正常退出时，<code>调用者的pc计数器的值作为返回地址，即调用该方法的指令的下一条指令的地址</code>。而通过异常退出的，返回地址是要通过<code>异常表</code>来确定，<code>栈帧中一般不会保存这部分信息</code>。</li></ul></li><li>本质上，方法的退出就是当前栈帧出栈的过程。此时，需要恢复上层方法的局部变量表、操作数栈、将返回值压入调用者栈帧的操作数栈、设置PC寄存器值等，让调用者方法继续执行下去。</li><li><code>正常完成出口和异常完成出口的区别在于：通过异常完成出口退出的不会给他的上层调用者产生任何的返回值</code>。</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="方法退出的两种方式">方法退出的两种方式<a class="hash-link" href="#方法退出的两种方式" title="标题的直接链接">​</a></h5><p>当一个方法开始执行后，只有两种方式可以退出这个方法：</p><ul><li>执行引擎遇到任意一个方法返回的字节码指令（return），会有返回值传递给上层的方法调用者，简称<code>正常完成出口</code></li><li>一个方法在正常调用完成之后，究竟需要使用哪一个返回指令，还需要根据方法返回值的实际数据类型而定。</li><li>在字节码指令中，返回指令包含：</li><li>ireturn：当返回值是<code>boolean，byte，char，short和int类型时</code>使用</li><li>lreturn：Long类型</li><li>freturn：Float类型</li><li>dreturn：Double类型</li><li>areturn：引用类型</li><li>return：返回值类型为void的方法、构造器、类和接口的初始化方法<!-- -->*<!-- --> 在方法执行过程中遇到异常（Exception），并且这个异常没有在方法内进行处理，也就是只要在本方法的异常表中没有搜索到匹配的异常处理器，就会导致方法退出，简称<code>异常完成出口</code>。</li><li>方法执行过程中，抛出异常时的异常处理，存储在一个异常处理表，方便在发生异常的时候找到处理异常的代码</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="异常处理表">异常处理表<a class="hash-link" href="#异常处理表" title="标题的直接链接">​</a></h5><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/3TyBX_x5g1lq3Tapc46ClML0_Z44L3Cd5F3lLxfv4MA-435a0009a9d5103178bd2fd1d07685e4.png" width="1312" height="482" class="img_ev3q"></p><ul><li>反编译字节码文件，可得到 Exception table</li><li>from ：字节码指令起始地址</li><li>to ：字节码指令结束地址</li><li>target ：出现异常跳转至地址为 11 的指令执行</li><li>type ：捕获异常的类型</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ReturnAddressTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean methodBoolean() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public byte methodByte() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public short methodShort() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public char methodChar() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &#x27;a&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int methodInt() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public long methodLong() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float methodFloat() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public double methodDouble() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String methodString() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Date methodDate() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void methodVoid() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method2() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        methodVoid();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            method1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (IOException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method1() throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FileReader fis = new FileReader(&quot;atguigu.txt&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        char[] cBuffer = new char[1024];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int len;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while ((len = fis.read(cBuffer)) != -1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String str = new String(cBuffer, 0, len);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(str);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fis.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/hcXu2U-_rWzxKt4zkOdtk_hTYSme9Wen5eAROq07MZA-9c5e177fe1c23e6219ffb3f5c3060e5d.png" width="1708" height="442" class="img_ev3q"></p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/p4BtH-n8tyhjizpEnFu8y1Stk-H0vE6-fav2aHb6wOY-58659c5127fdbfc825b577d20914a9f0.png" width="1562" height="528" class="img_ev3q"></p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/c_HtB6XTFRkJUrSZ9a7Zs7F0njNUSH67LQQeQdv6Hvw-b328d640ed67adf0d7573404a385d319.png" width="1926" height="520" class="img_ev3q"></p><p><img loading="lazy" alt="image" src="/Computer-Science-Learn-Notes/assets/images/CQyB7zx7B4dY-0JdXALZwaHCRrnO6dO2_iok62HP_E0-6999bab6826b94359040852154877a84.png" width="1788" height="826" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="一些附加信息">一些附加信息<a class="hash-link" href="#一些附加信息" title="标题的直接链接">​</a></h4><p>栈帧中还允许携带与Java虚拟机实现相关的一些附加信息。例如：对程序调试提供支持的信息。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="面试题">面试题<a class="hash-link" href="#面试题" title="标题的直接链接">​</a></h2><blockquote><p>举例栈溢出的情况？（StackOverflowError）</p></blockquote><p>通过-Xss设置栈的大小：OOM</p><blockquote><p>调整栈大小，就能保证不出现栈溢出</p></blockquote><p>不能。调整栈大小只能让栈溢出出现的情况晚一些，但不能保证不会出现栈溢出</p><blockquote><p>分配栈的内存越大越好吗？</p></blockquote><p>不是，一定时间内降低了<code>栈溢出</code>的概率，但是会挤占其它的线程空间，因为整个虚拟机的内存空间是有限的</p><blockquote><p>垃圾回收是否会涉及到虚拟机栈？</p></blockquote><p>不会的</p><blockquote><p>方法中定义的局部变量是否线程安全？</p></blockquote><p>何为线程安全？</p><ul><li>如果只有一个线程才可以操作此数据，则必是线程安全的。</li><li>如果有多个线程操作此数据，则此数据是共享数据。如果不考虑同步机制的话，会存在线程安全问题。</li></ul><p>具体问题具体分析：</p><ul><li>如果对象是在内部产生，并在内部消亡，没有返回到外部，那么它就是线程安全的，反之则是线程不安全的。</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/edit/master/docs/Java/jvm/part1/5.虚拟机栈.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/程序计数器（PC寄存器）"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">程序计数器</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Computer-Science-Learn-Notes/docs/Java/jvm/part1/本地方法接口"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">本地方法接口</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a></li><li><a href="#内存中的栈和堆" class="table-of-contents__link toc-highlight">内存中的栈和堆</a></li><li><a href="#基本内容" class="table-of-contents__link toc-highlight">基本内容</a></li><li><a href="#特点" class="table-of-contents__link toc-highlight">特点</a></li><li><a href="#面试题栈中可能出现的异常" class="table-of-contents__link toc-highlight">面试题：<strong>栈中可能出现的异常？</strong></a></li><li><a href="#设置栈内存大小" class="table-of-contents__link toc-highlight">设置栈内存大小</a><ul><li><a href="#概念" class="table-of-contents__link toc-highlight">概念</a></li><li><a href="#示例" class="table-of-contents__link toc-highlight">示例</a></li></ul></li><li><a href="#栈的存储结构" class="table-of-contents__link toc-highlight">栈的存储结构</a><ul><li><a href="#存储什么" class="table-of-contents__link toc-highlight">存储什么？</a></li><li><a href="#运行原理" class="table-of-contents__link toc-highlight">运行原理</a></li><li><a href="#理解栈帧" class="table-of-contents__link toc-highlight">理解栈帧</a></li><li><a href="#栈帧的内部结构" class="table-of-contents__link toc-highlight">栈帧的内部结构</a></li></ul></li><li><a href="#面试题" class="table-of-contents__link toc-highlight">面试题</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Computer-Science-Learn-Notes/docs/intro">主页</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="#" class="footer__link-item">莫得</a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/zhiyu1998" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Computer Science Learn Notes, Inc. Built with Zhiyu1998.</div></div></div></footer></div>
<script src="/Computer-Science-Learn-Notes/assets/js/runtime~main.2a55ec46.js"></script>
<script src="/Computer-Science-Learn-Notes/assets/js/main.1a67b453.js"></script>
</body>
</html>